{"version":3,"sources":["components/SVGEdge.tsx","components/SVGNode.tsx","components/SVGGraph.tsx","components/DownloadLink.tsx","components/DownloadLinkList.tsx","components/AlgorithmView.tsx","components/InitialView.tsx","components/ResultView.tsx","components/AlgorithmListView.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["SVGEdge","source","target","className","x1","x","y1","y","x2","y2","SVGNode","node","height","width","index","label","text","transform","SVGGraph","graph","over","svgRef","rest","scaler","initial","frame","scale","ratio","Math","min","createScale","d3max","nodes","d","_","map","sortBy","value","edges","find","xmlns","viewBox","ref","EdgeList","key","NodeList","n","DownloadLink","content","name","children","useState","url","setUrl","useEffect","file","File","type","URL","createObjectURL","revokeObjectURL","href","download","DownloadLinkList","gml","json","svg","AlgorithmView","title","pWidth","pHeight","SVGContent","setSVGContent","setWidth","setHeight","useCallback","serializer","XMLSerializer","serializeToString","measuredRef","getBoundingClientRect","JSON","stringify","InitialView","ResultView","algorithm","setGraph","copy","e","crop","AlgorithmListView","props","Scaling","PFS","PFSP","FTA","RWordleL","VPSC","promisingFileReader","Promise","resolve","reject","fr","FileReader","onload","result","onerror","readAsText","App","setFile","fileContent","setFileContent","error","setError","undefined","a","jsonGraph","parseGML","console","log","toGraph","message","id","onChange","currentTarget","files","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.d5b1a21e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Node } from 'agora-graph';\r\n\r\nexport const SVGEdge: React.FC<{ source: Node; target: Node }> = function({\r\n  source,\r\n  target\r\n}) {\r\n  return (\r\n    <line\r\n      className=\"link\"\r\n      x1={source.x}\r\n      y1={source.y}\r\n      x2={target.x}\r\n      y2={target.y}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SVGEdge;\r\n","import React from 'react';\r\nimport { Node } from 'agora-graph';\r\n\r\nexport const SVGNode: React.FC<{ node: Node }> = function({\r\n  node: { x, y, height, width, index, label }\r\n}) {\r\n  let text = label || index;\r\n  if (text === 'undefined') text = index;\r\n  return (\r\n    <g className=\"node\" transform={`translate(${x},${y})`}>\r\n      <rect\r\n        className=\"rect\"\r\n        width={width}\r\n        height={height}\r\n        transform={`translate(${-width / 2},${-height / 2})`}\r\n      />\r\n      <text className=\"label\" transform=\"translate(-5,6)\">\r\n        {label !== 'undefined' ? label || index : index}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n\r\nexport default SVGNode;\r\n","import React, { SVGProps } from 'react';\r\nimport _ from 'lodash';\r\nimport { max as d3max } from 'd3-array';\r\nimport { Graph, Node, Box } from 'agora-graph';\r\nimport EdgeComp from './SVGEdge';\r\nimport NodeComp from './SVGNode';\r\n\r\nexport type SVGGraphType = {\r\n  graph: Graph;\r\n  over?: boolean;\r\n  width: number;\r\n  height: number;\r\n  svgRef: any;\r\n} & SVGProps<SVGSVGElement>;\r\n\r\nexport const SVGGraph: React.FC<SVGGraphType> = function({\r\n  graph,\r\n  over = false,\r\n  width,\r\n  height,\r\n  svgRef,\r\n  ...rest\r\n}) {\r\n  const box = {\r\n    width: d3max(graph.nodes, d => d.x + d.width / 2) || 0,\r\n    height: d3max(graph.nodes, d => d.y + d.height / 2) || 0\r\n  };\r\n\r\n  const scaler = createScale(box, { width, height });\r\n\r\n  const nodes = _(graph.nodes)\r\n    .map(({ width, height, x, y, ...rest }) => ({\r\n      ...rest,\r\n      width: scaler(width),\r\n      height: scaler(height),\r\n      x: scaler(x),\r\n      y: scaler(y)\r\n    }))\r\n    .sortBy('index')\r\n    .value();\r\n\r\n  const edges: [Node, Node][] = graph.edges.map<[Node, Node]>(\r\n    ({ source, target }) => [\r\n      _.find(nodes, { index: source }) as Node,\r\n      _.find(nodes, { index: target }) as Node\r\n    ]\r\n  );\r\n\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width={width}\r\n      height={height}\r\n      viewBox={`-5,-5,${width + 10},${height + 10}`}\r\n      {...rest}\r\n      ref={svgRef}\r\n    >\r\n      <style>{`\r\n      .edges { \r\n        stroke: #878fff;\r\n        stroke-width: 2px;\r\n      }\r\n\r\n      .rect {\r\n        stroke: #000;\r\n        fill: #eee;\r\n      }\r\n      `}</style>\r\n      {over ? (\r\n        <>\r\n          <NodeList nodes={nodes} />\r\n          <EdgeList edges={edges} />\r\n        </>\r\n      ) : (\r\n        <>\r\n          <EdgeList edges={edges} />\r\n          <NodeList nodes={nodes} />\r\n        </>\r\n      )}\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default SVGGraph;\r\n\r\nconst EdgeList: React.FC<{ edges: [Node, Node][] }> = function({ edges }) {\r\n  return (\r\n    <g className=\"edges\">\r\n      {edges.map(([source, target]) => (\r\n        <EdgeComp\r\n          key={source.index + ':' + target.index}\r\n          source={source}\r\n          target={target}\r\n        />\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\nconst NodeList: React.FC<{ nodes: Node[] }> = function({ nodes }) {\r\n  return (\r\n    <g className=\"nodes\">\r\n      {nodes.map(n => (\r\n        <NodeComp key={n.index} node={n}></NodeComp>\r\n      ))}\r\n    </g>\r\n  );\r\n};\r\n\r\n/**\r\n *\r\n * @param initial\r\n * @param frame\r\n *\r\n * @returns function which converts the coordinate for the projection\r\n */\r\nexport function createScale(initial: Box, frame: Box): (ref: number) => number {\r\n  const scale: any = function(initial: number) {\r\n    return scale.ratio * initial;\r\n  };\r\n\r\n  scale.ratio = Math.min(\r\n    frame.width / initial.width,\r\n    frame.height / initial.height\r\n  );\r\n\r\n  return scale;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nexport const DownloadLink: React.FC<{\r\n  content: string;\r\n  name: string;\r\n}> = function({ content, name, children }) {\r\n  const [url, setUrl] = useState();\r\n\r\n  useEffect(() => {\r\n    var file = new File([content], name, { type: 'plain/text' });\r\n    const url = URL.createObjectURL(file);\r\n\r\n    setUrl(url);\r\n    // cleanup on unmount\r\n    return () => URL.revokeObjectURL(url);\r\n  }, [name, content]);\r\n\r\n  // TODO suspense update\r\n  return url ? (\r\n    <a href={url} download={name} className=\"bw1 ba ph1 mr1 no-underline\">\r\n      {children ? children : name}\r\n    </a>\r\n  ) : null;\r\n};\r\n\r\nexport default DownloadLink;\r\n","import React from 'react';\r\nimport DownloadLink from './DownloadLink';\r\n\r\nexport const DownloadLinkList: React.FC<{\r\n  name: string;\r\n  gml?: string;\r\n  json: string;\r\n  svg?: string | null;\r\n}> = function({ name, gml, json, svg }) {\r\n  return (\r\n    <div>\r\n      {gml ? (\r\n        <DownloadLink content={gml} name={name + '.gml'}>\r\n          GML\r\n        </DownloadLink>\r\n      ) : null}\r\n      <DownloadLink content={json} name={name + '.json'}>\r\n        JSON\r\n      </DownloadLink>\r\n      {svg ? (\r\n        <DownloadLink content={svg} name={name + '.svg'}>\r\n          SVG\r\n        </DownloadLink>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DownloadLinkList;\r\n","import React, { useState, useCallback } from 'react';\r\nimport SVGGraph, { SVGGraphType } from './SVGGraph';\r\nimport { DownloadLinkList } from './DownloadLinkList';\r\n\r\nexport type AlgorithmViewType = {\r\n  title: string;\r\n  gml?: string;\r\n  width?: number;\r\n  height?: number;\r\n} & Omit<SVGGraphType, 'svgRef' | 'width' | 'height'>;\r\n\r\nexport const AlgorithmView: React.FC<AlgorithmViewType> = function({\r\n  title,\r\n  graph,\r\n  width: pWidth,\r\n  height: pHeight,\r\n  gml,\r\n  className,\r\n  ...rest\r\n}) {\r\n  const [SVGContent, setSVGContent] = useState<string | null>(null);\r\n  const [width, setWidth] = useState(pWidth);\r\n  const [height, setHeight] = useState(pHeight);\r\n  const svgRef = useCallback(\r\n    svgRef => {\r\n      if (svgRef) {\r\n        const serializer = new XMLSerializer();\r\n        setSVGContent(serializer.serializeToString(svgRef));\r\n      }\r\n    },\r\n    [graph]\r\n  );\r\n  const measuredRef = useCallback(\r\n    node => {\r\n      if (node !== null) {\r\n        if (!pHeight) setHeight(node.getBoundingClientRect().height);\r\n        if (!pWidth) setWidth(node.getBoundingClientRect().width);\r\n      }\r\n    },\r\n    [pWidth, pHeight]\r\n  );\r\n  return (\r\n    <div className={'graph ' + className}>\r\n      <h2 className=\"title\">{title}</h2>\r\n      <DownloadLinkList\r\n        name={title}\r\n        json={JSON.stringify(graph)}\r\n        gml={gml}\r\n        svg={SVGContent}\r\n      />\r\n      <div className=\"graph w-100 h-100 ma1\" ref={measuredRef}>\r\n        {height && width ? (\r\n          <SVGGraph\r\n            graph={graph}\r\n            width={width}\r\n            height={height}\r\n            svgRef={svgRef}\r\n            {...rest}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default AlgorithmView;\r\n","import React from 'react';\r\nimport { AlgorithmView, AlgorithmViewType } from './AlgorithmView';\r\n\r\nexport type InitialViewType = AlgorithmViewType;\r\n\r\nexport const InitialView: React.FC<InitialViewType> = function({\r\n  title,\r\n  graph,\r\n  gml,\r\n  width,\r\n  height,\r\n  ...rest\r\n}) {\r\n  return (\r\n    <AlgorithmView\r\n      title={title}\r\n      graph={graph}\r\n      gml={gml}\r\n      width={width}\r\n      height={height}\r\n      {...rest}\r\n    />\r\n  );\r\n};\r\n\r\nexport default InitialView;\r\n","import React, { SVGProps, useRef, useEffect, useState } from 'react';\r\nimport { crop, Graph, Algorithm } from 'agora-graph';\r\nimport { AlgorithmView, AlgorithmViewType } from './AlgorithmView';\r\n\r\nexport type ResultType = {\r\n  algorithm: Algorithm<any>;\r\n  initial: Graph;\r\n} & Omit<AlgorithmViewType, 'title' | 'graph'>;\r\n\r\nexport const ResultView: React.FC<ResultType> = function({\r\n  algorithm: { name, algorithm },\r\n  initial,\r\n  width,\r\n  height,\r\n  ...rest\r\n}) {\r\n  const [graph, setGraph] = useState<Graph | null>(null);\r\n\r\n  // calling async set\r\n  useEffect(() => {\r\n    const copy = {\r\n      nodes: initial.nodes.map(n => ({ ...n })),\r\n      edges: initial.edges.map(e => ({ ...e }))\r\n    };\r\n    setGraph(crop(algorithm(copy).graph));\r\n  }, [algorithm, initial]);\r\n\r\n  return graph ? (\r\n    <AlgorithmView\r\n      title={name}\r\n      graph={graph}\r\n      height={height}\r\n      width={width}\r\n      {...rest}\r\n    />\r\n  ) : (\r\n    <p>Loading</p>\r\n  );\r\n};\r\n\r\nexport default ResultView;\r\n","import React from 'react';\r\nimport PFS from 'agora-pfs';\r\nimport PFSP from 'agora-pfsp';\r\nimport FTA from 'agora-fta';\r\nimport VPSC from 'agora-vpsc';\r\nimport { RWordleLAlgorithm as RWordleL } from 'agora-rworldle';\r\nimport Scaling from 'agora-scaling';\r\nimport ResultView from './ResultView';\r\nimport { Graph } from 'agora-graph';\r\n\r\nexport const AlgorithmListView: React.FC<{\r\n  initial: Graph;\r\n  over?: boolean;\r\n}> = function(props) {\r\n  return (\r\n    <>\r\n      <ResultView\r\n        algorithm={Scaling}\r\n        {...props}\r\n        className=\"w-25\"\r\n        height={300}\r\n      />\r\n      <ResultView algorithm={PFS} {...props} className=\"w-25\" height={300} />\r\n      <ResultView algorithm={PFSP} {...props} className=\"w-25\" height={300} />\r\n      <ResultView algorithm={FTA} {...props} className=\"w-25\" height={300} />\r\n      <ResultView\r\n        algorithm={RWordleL}\r\n        {...props}\r\n        className=\"w-25\"\r\n        height={300}\r\n      />\r\n      <ResultView algorithm={VPSC} {...props} className=\"w-25\" height={300} />\r\n    </>\r\n  );\r\n};\r\nexport default AlgorithmListView;\r\n","import React, { useState, useEffect, FormEvent } from 'react';\nimport './App.css';\n\nimport directaccess from './directaccess';\nimport InitialView from './components/InitialView';\nimport { parseGML, toGraph } from 'agora-gml';\nimport { crop } from 'agora-graph';\nimport { AlgorithmListView } from './components/AlgorithmListView';\n\nconst App: React.FC = () => {\n  const [file, setFile] = useState<File | undefined>();\n  const [graph, setGraph] = useState();\n  const [fileContent, setFileContent] = useState();\n  const [error, setError] = useState();\n\n  const onFileSet = (e: FormEvent<HTMLInputElement>) => {\n    setFile(e.currentTarget.files![0]);\n    // convert from gml to json\n  };\n\n  useEffect(() => {\n    // file effect\n    if (file !== undefined) {\n      (async () => {\n        try {\n          setError(null);\n          const text: string = await promisingFileReader(file);\n          const jsonGraph = parseGML(text);\n          console.log(jsonGraph);\n          setGraph(crop(toGraph(jsonGraph)));\n          setFileContent(text);\n        } catch (error) {\n          setError(error.message || error);\n          console.log(error);\n          setFile(undefined);\n        }\n      })();\n    }\n  }, [file]);\n\n  useEffect(() => {\n    // graph effect\n    console.log(graph);\n  }, [graph]);\n\n  return (\n    // <Provider store={store}>\n    <div className=\"App ma1\">\n      {error ? error : null}\n      {!file ? (\n        <input type=\"file\" name=\"file\" id=\"file\" onChange={onFileSet} />\n      ) : graph ? (\n        <div className=\"flex flex-wrap\">\n          <InitialView\n            title=\"Initial Graph\"\n            graph={graph}\n            gml={fileContent}\n            height={300}\n            over={true}\n            className=\"w-25\"\n          />\n          <AlgorithmListView initial={graph} over={true} />\n        </div>\n      ) : null}\n    </div>\n    // </Provider>\n  );\n};\n\n//eslint-disable-next-line\nfunction promisingFileReader(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const fr = new FileReader();\n    fr.onload = () => resolve(fr.result as string);\n    fr.onerror = reject;\n    fr.readAsText(file);\n  });\n}\n\nconst bypassApp: React.FC = function() {\n  const graph = crop(toGraph(parseGML(directaccess)));\n\n  return (\n    <div className=\"flex flex-wrap\">\n      <InitialView\n        title=\"Initial Graph\"\n        graph={graph}\n        gml={directaccess}\n        height={300}\n        over={true}\n        className=\"w-25\"\n      />\n      <AlgorithmListView initial={graph} over={true} />\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}