{"version":3,"sources":["../node_modules/webcola/dist/src/layout.js","../node_modules/webcola/dist/src/rectangle.js","../node_modules/webcola/dist/src/shortestpaths.js","../node_modules/webcola/dist/src/linklengths.js","../node_modules/webcola/dist/src/descent.js","../node_modules/webcola/dist/src/vpsc.js","../node_modules/webcola/dist/src/powergraph.js","../node_modules/webcola/dist/src/rbtree.js","../node_modules/webcola/dist/src/pqueue.js","../node_modules/webcola/dist/src/geom.js","../node_modules/webcola/dist/src/handledisconnected.js","../node_modules/webcola/dist/src/gridrouter.js","../node_modules/webcola/dist/index.js","../node_modules/webcola/dist/src/adaptor.js","../node_modules/webcola/dist/src/d3adaptor.js","../node_modules/webcola/dist/src/d3v3adaptor.js","../node_modules/webcola/dist/src/d3v4adaptor.js","../node_modules/webcola/dist/src/layout3d.js","../node_modules/webcola/dist/src/batch.js","../node_modules/agora-vpsc/dist/index.js"],"names":["Object","defineProperty","exports","value","EventType","powergraph","linklengths_1","descent_1","rectangle_1","shortestpaths_1","geom_1","handledisconnected_1","isGroup","g","leaves","groups","Layout","_this","this","_canvasSize","_linkDistance","_defaultNodeSize","_linkLengthCalculator","_linkType","_avoidOverlaps","_handleDisconnected","_running","_nodes","_groups","_rootGroup","_links","_constraints","_distanceMatrix","_descent","_directedLinkConstraints","_threshold","_visibilityGraph","_groupCompactness","event","linkAccessor","getSourceIndex","getTargetIndex","setLength","setLinkLength","getType","l","prototype","on","e","listener","trigger","type","kick","tick","_alpha","end","alpha","stress","_lastStress","o","i","n","length","locks","clear","fixed","px","py","x","y","p","add","s1","rungeKutta","updateNodePositions","nodes","v","forEach","Math","max","source","target","Array","padding","parent","gi","filter","powerGraphGroups","f","getGroups","avoidOverlaps","arguments","handleDisconnected","flowLayout","axis","minSeparation","getMinSeparation","links","constraints","c","distanceMatrix","d","size","defaultNodeSize","groupCompactness","linkDistance","linkType","convergenceThreshold","start","getLinkLength","link","getLinkType","symmetricDiffLinkLengths","idealLength","w","jaccardLinkLengths","initialUnconstrainedIterations","initialUserConstraintIterations","initialAllConstraintsIterations","gridSnapIterations","keepRunning","centerGraph","distances","N","h","G","ao","index","Calculator","DistanceMatrix","Descent","createSquareMatrix","u","weight","D","j","strength","idealDistance","addAttraction","curConstraints","concat","generateDirectedEdgeConstraints","threshold","initialLayout","project","Projection","projectFunctions","run","separateOverlappingComponents","snapStrength","snapGridSize","width","numGridSnapNodes","scaleSnapByMaxH","G0","resume","iterations","edges","map","vs","push","gg","height","x_1","y_1","graphs","separateGraphs","applyPacking","bounds","setXCentre","setYCentre","stop","prepareEdgeRouting","nodeMargin","TangentVisibilityGraph","inflate","vertices","routeEdge","edge","ah","draw","lineData","vg2","P","V","E","port1","port2","addPoint","addEdgeIfVisible","shortestPath","id","PathFromNodeToNode","route","makeEdgeBetween","innerBounds","sourceIntersection","arrowStart","q","rayIntersection","makeEdgeTo","linkId","dragStart","storeOffset","dragOrigin","stopNode","origin","_dragGroupOffsetX","_dragGroupOffsetY","cx","cy","drag","position","dragEnd","mouseOver","mouseOut","__extends","_extendStatics","b","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","create","vpsc_1","rbtree_1","computeGroupBounds","reduce","r","union","Rectangle","empty","X","Y","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","overlapX","ux","vx","overlapY","uy","vy","dx","dy","min","lineIntersections","x1","y1","x2","y2","sides","intersections","lineIntersection","ints","x3","y3","x4","y4","dx12","dx34","dy12","dy34","denominator","dx31","dy31","a","pad","si","ti","sqrt","al","targetIntersection","s","Node","pos","prev","makeRBTree","next","Event","isOpen","compareEvents","RBTree","xRect","getCentre","getOpen","getClose","getSize","makeRect","open","close","center","findNeighbours","scanline","forward","reverse","it","findIter","uovervX","insert","yRect","generateGroupConstraints","root","minSep","isContained","gn","ln","childConstraints","ccs","rs","minVar","desiredPosition","maxVar","variable","cs","generateConstraints","cOut","cIn","left","right","gapAdjustment","gap","vars","rect","console","assert","events","sort","remove","makeConstraint","sep","Constraint","visitNeighbours","mkcon","iterator","generateXConstraints","generateYConstraints","generateXGroupConstraints","generateYGroupConstraints","removeOverlaps","Variable","solver","Solver","solve","IndexedVariable","_super","call","rootGroup","variables","createConstraints","w2","h2","stiffness","createSeparation","equality","makeFeasible","dim","offsets","node","nextPos","createAlignment","xConstraints","yConstraints","slice","offset","isSep","setupVariablesAndBounds","x0","y0","desired","getDesired","fixedWeight","ix","iy","xProject","xmin","xmax","p2","yProject","ymin","ymax","updateNodeBounds","updateGroupBounds","starting","setStartingPositions","setDesiredPositions","pqueue_1","Neighbour","distance","neighbours","QueueEntry","es","getLength","dijkstraNeighbours","DistancesFromNode","PathFromNodeToNodeWithPrevCost","prevCost","PriorityQueue","qu","visitedFrom","pop","neighbour","viduid","cc","t","path","dest","MAX_VALUE","reduceKey","unionCount","keys","intersectionCount","computeLinkLengths","la","addNeighbours","getNeighbours","stronglyConnectedComponents","numVertices","stack","components","strongConnect","lowlink","onStack","_i","_a","out","component","edges_1","v_1","nodes_1","ui","vi","Locks","isEmpty","apply","random","PseudoRandom","k","H","Hd","ia","ib","xtmp","minD","M","offsetDir","getNextBetween","computeDerivatives","d2","Huu","maxH","maxDisplaces","sd2","rd","isFinite","D2","gs","l3","hs","log","numNodes","xiu","m","abs","dotProd","rightMultiply","computeStepSize","numerator","reduceStress","takeDescentStep","computeStress","copy","stepAndProject","stepSize","mApply","matrixApply","computeNextPosition","beta","converged","mid","disp","nMinus1","rl","zeroDistance","seed","range","getNext","PositionStats","scale","AB","AD","A2","addVariable","ai","bi","wi","getPosn","active","unsatisfiable","slack","dfdv","block","ps","posn","ff","Block","updateWeightedPosition","compute_lm","postAction","_dfdv","lm","populateSplitBlock","traverse","visit","acc","findMinLM","findMinLMBetween","lv","rv","findPath","to","endFound","isActiveDirectedPathBetween","split","createSplitBlock","startVar","splitBetween","vl","vr","bs","constraint","lb","rb","mergeAcross","dist","cost","sum","Blocks","list","blockInd","last","swapBlock","merge","updateBlockPositions","inactive","LAGRANGIAN_TOLERANCE","nb","mostViolated","minSlack","deletePoint","ZERO_UPPERBOUND","satisfy","lastcost","removeOverlapInOneDimension","spans","lowerBound","upperBound","desiredCenter","leftMost","rightMost","leftMostSize","rightMostSize","vLower","vUpper","newCenters","PowerEdge","Configuration","modules","roots","initModulesFromGroup","ModuleSet","Module","R","outgoing","incoming","group","moduleSet","module","child","definition","prop","LinkSets","inInt","intersection","outInt","children","update","forAll","ms","linktype","nls","count","rootMerges","merges","ctr","i_","nEdges","greedyMerge","getGroupHierarchy","retargetedEdges","toGroups","isLeaf","gid","isIsland","isPredefined","allEdges","getEdges","edgetype","table","other","result","contains","sets","forAllModules","lt","powerEdges","TreeBase","data","res","_root","iter","_comparator","_cursor","_ancestors","get_child","find","_bound","cmp","Iterator","each","cb","reach","cur","tree","_tree","_minNode","save","_maxNode","red","dir","set_child","val","comparator","ret","head","undefined","gp","ggp","is_red","dir2","single_rotate","double_rotate","found","sr","sibling","gpc","PairingHeap","elem","subheaps","toString","selector","str","needComma","subheap","isHeap","lessThan","every","obj","heap2","removeMin","mergePairs","firstPair","remaining","decreaseKey","newValue","setHeapNode","newHeap","pairingNode","top","args","arg","heapNode","newKey","Point","LineSegment","PolyPoint","isLeft","P0","P1","P2","above","vj","below","tangent_PointPolyC","Vclosed","rtan","Rtangent_PointPolyC","ltan","Ltangent_PointPolyC","dnC","floor","tangent_PolyPolyC","W","t1","t2","cmp1","cmp2","ix1","ix2","done","RLtangent_PolyPolyC","ConvexHull","S","minmax","maxmin","maxmax","bot","clockwiseRadialSweep","atan2","LRtangent_PolyPolyC","LLtangent_PolyPolyC","RRtangent_PolyPolyC","BiTangent","BiTangents","TVGPoint","VisibilityVertex","polyid","polyvertid","vv","VisibilityEdge","g0","pj","Pi","Pj","tangents","i1","i2","intersectsPolys","poly","intersects","int","bt","v1","v2","v3","w1","w3","v1v2w2","v2w1w2","v2w2w3","w1w2v2","w2v1v2","w2v2v3","ll","rr","lr","isAnyPInQ","isPointInsidePoly","polysOverlap","packingOptions","node_size","desired_ratio","svg_width","svg_height","real_width","real_height","min_width","global_bottom","line","step","max_width","put_rect","space_left","bottom","graph","min_x","min_y","max_x","max_y","array","calculate_single_bb","calculate_bb","curr_best_f","curr_best","get_entire_width","iterationCounter","f_x1","f_x2","flag","df","corner","put_nodes_to_right_positions","marks","ways","clusters","n1","n2","explore_node","is_new","adjacent","NodeWrapper","leaf","Vert","LongestCommonSubsequence","mf","findMatch","tr","mr","reversed","match","getSequence","GridRouter","originalnodes","accessor","groupPadding","getBounds","getChildren","cols","getGridLines","rows","ports","backToFront","getDepth","colMids","midPoints","rowMids","rowx","rowX","coly","colY","hlines","vlines","lines","verts","li","intersect","isHoriz","delta","avg","columns","ls","overlapping","toUpperCase","col","splice","indexOf","depth","mids","findLineage","lineage","findAncestorPathBetween","aa","ba","commonAncestor","lineages","siblingObstacles","lineageLookup","obstacles","getSegmentSets","routes","vsegments","ei","edgeid","sdx","vsegmentsets","segmentset","segments","nudgeSegs","leftOf","s2","e1","e2","lind","rind","nudgeSegments","ss","openCount","routeEdges","nudgeGap","routePaths","order","orderEdges","makeSegments","unreverseEdges","segment","angleBetween2Lines","line1","line2","angle1","angle2","diff","PI","getOrder","pairs","edgeOrder","lcs","copyPoint","isStraight","obstacleLookup","passableEdges","pathPoints","getRoutePath","cornerradius","arrowwidth","arrowheight","routepath","arrowpath","angle","arrowtip","arrowcorner1","arrowcorner2","__export","layout_1","LayoutAdaptor","options","dragstart","dragend","eventType","adaptor","d3v3","d3v4","d3adaptor","d3Context","version","isD3V3","D3StyleLayoutAdaptor","d3","dispatch","d3layout","behavior","d3event","timer","subject","Link3D","actualLength","Node3D","z","Layout3D","idealLinkLength","useJaccardLinkLengths","dims","linkLength","LinkAccessor","descent","gridrouter_1","gridify","pgLayout","margin","groupMargin","cola","routerNode","name","gridRouterNodes","powerGraph","powerGraphGridLayout","grouppadding","sourceInd","__importDefault","mod","__esModule","agora_graph_1","webcola_1","lodash_1","vpsc","createFunction","rects","default","VPSCAlgorithm","algorithm"],"mappings":"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","file":"static/js/5.0957bb97.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar powergraph = require(\"./powergraph\");\n\nvar linklengths_1 = require(\"./linklengths\");\n\nvar descent_1 = require(\"./descent\");\n\nvar rectangle_1 = require(\"./rectangle\");\n\nvar shortestpaths_1 = require(\"./shortestpaths\");\n\nvar geom_1 = require(\"./geom\");\n\nvar handledisconnected_1 = require(\"./handledisconnected\");\n\nvar EventType;\n\n(function (EventType) {\n  EventType[EventType[\"start\"] = 0] = \"start\";\n  EventType[EventType[\"tick\"] = 1] = \"tick\";\n  EventType[EventType[\"end\"] = 2] = \"end\";\n})(EventType = exports.EventType || (exports.EventType = {}));\n\n;\n\nfunction isGroup(g) {\n  return typeof g.leaves !== 'undefined' || typeof g.groups !== 'undefined';\n}\n\nvar Layout = function () {\n  function Layout() {\n    var _this = this;\n\n    this._canvasSize = [1, 1];\n    this._linkDistance = 20;\n    this._defaultNodeSize = 10;\n    this._linkLengthCalculator = null;\n    this._linkType = null;\n    this._avoidOverlaps = false;\n    this._handleDisconnected = true;\n    this._running = false;\n    this._nodes = [];\n    this._groups = [];\n    this._rootGroup = null;\n    this._links = [];\n    this._constraints = [];\n    this._distanceMatrix = null;\n    this._descent = null;\n    this._directedLinkConstraints = null;\n    this._threshold = 0.01;\n    this._visibilityGraph = null;\n    this._groupCompactness = 1e-6;\n    this.event = null;\n    this.linkAccessor = {\n      getSourceIndex: Layout.getSourceIndex,\n      getTargetIndex: Layout.getTargetIndex,\n      setLength: Layout.setLinkLength,\n      getType: function getType(l) {\n        return typeof _this._linkType === \"function\" ? _this._linkType(l) : 0;\n      }\n    };\n  }\n\n  Layout.prototype.on = function (e, listener) {\n    if (!this.event) this.event = {};\n\n    if (typeof e === 'string') {\n      this.event[EventType[e]] = listener;\n    } else {\n      this.event[e] = listener;\n    }\n\n    return this;\n  };\n\n  Layout.prototype.trigger = function (e) {\n    if (this.event && typeof this.event[e.type] !== 'undefined') {\n      this.event[e.type](e);\n    }\n  };\n\n  Layout.prototype.kick = function () {\n    while (!this.tick()) {\n      ;\n    }\n  };\n\n  Layout.prototype.tick = function () {\n    if (this._alpha < this._threshold) {\n      this._running = false;\n      this.trigger({\n        type: EventType.end,\n        alpha: this._alpha = 0,\n        stress: this._lastStress\n      });\n      return true;\n    }\n\n    var n = this._nodes.length,\n        m = this._links.length;\n    var o, i;\n\n    this._descent.locks.clear();\n\n    for (i = 0; i < n; ++i) {\n      o = this._nodes[i];\n\n      if (o.fixed) {\n        if (typeof o.px === 'undefined' || typeof o.py === 'undefined') {\n          o.px = o.x;\n          o.py = o.y;\n        }\n\n        var p = [o.px, o.py];\n\n        this._descent.locks.add(i, p);\n      }\n    }\n\n    var s1 = this._descent.rungeKutta();\n\n    if (s1 === 0) {\n      this._alpha = 0;\n    } else if (typeof this._lastStress !== 'undefined') {\n      this._alpha = s1;\n    }\n\n    this._lastStress = s1;\n    this.updateNodePositions();\n    this.trigger({\n      type: EventType.tick,\n      alpha: this._alpha,\n      stress: this._lastStress\n    });\n    return false;\n  };\n\n  Layout.prototype.updateNodePositions = function () {\n    var x = this._descent.x[0],\n        y = this._descent.x[1];\n    var o,\n        i = this._nodes.length;\n\n    while (i--) {\n      o = this._nodes[i];\n      o.x = x[i];\n      o.y = y[i];\n    }\n  };\n\n  Layout.prototype.nodes = function (v) {\n    if (!v) {\n      if (this._nodes.length === 0 && this._links.length > 0) {\n        var n = 0;\n\n        this._links.forEach(function (l) {\n          n = Math.max(n, l.source, l.target);\n        });\n\n        this._nodes = new Array(++n);\n\n        for (var i = 0; i < n; ++i) {\n          this._nodes[i] = {};\n        }\n      }\n\n      return this._nodes;\n    }\n\n    this._nodes = v;\n    return this;\n  };\n\n  Layout.prototype.groups = function (x) {\n    var _this = this;\n\n    if (!x) return this._groups;\n    this._groups = x;\n    this._rootGroup = {};\n\n    this._groups.forEach(function (g) {\n      if (typeof g.padding === \"undefined\") g.padding = 1;\n\n      if (typeof g.leaves !== \"undefined\") {\n        g.leaves.forEach(function (v, i) {\n          if (typeof v === 'number') (g.leaves[i] = _this._nodes[v]).parent = g;\n        });\n      }\n\n      if (typeof g.groups !== \"undefined\") {\n        g.groups.forEach(function (gi, i) {\n          if (typeof gi === 'number') (g.groups[i] = _this._groups[gi]).parent = g;\n        });\n      }\n    });\n\n    this._rootGroup.leaves = this._nodes.filter(function (v) {\n      return typeof v.parent === 'undefined';\n    });\n    this._rootGroup.groups = this._groups.filter(function (g) {\n      return typeof g.parent === 'undefined';\n    });\n    return this;\n  };\n\n  Layout.prototype.powerGraphGroups = function (f) {\n    var g = powergraph.getGroups(this._nodes, this._links, this.linkAccessor, this._rootGroup);\n    this.groups(g.groups);\n    f(g);\n    return this;\n  };\n\n  Layout.prototype.avoidOverlaps = function (v) {\n    if (!arguments.length) return this._avoidOverlaps;\n    this._avoidOverlaps = v;\n    return this;\n  };\n\n  Layout.prototype.handleDisconnected = function (v) {\n    if (!arguments.length) return this._handleDisconnected;\n    this._handleDisconnected = v;\n    return this;\n  };\n\n  Layout.prototype.flowLayout = function (axis, minSeparation) {\n    if (!arguments.length) axis = 'y';\n    this._directedLinkConstraints = {\n      axis: axis,\n      getMinSeparation: typeof minSeparation === 'number' ? function () {\n        return minSeparation;\n      } : minSeparation\n    };\n    return this;\n  };\n\n  Layout.prototype.links = function (x) {\n    if (!arguments.length) return this._links;\n    this._links = x;\n    return this;\n  };\n\n  Layout.prototype.constraints = function (c) {\n    if (!arguments.length) return this._constraints;\n    this._constraints = c;\n    return this;\n  };\n\n  Layout.prototype.distanceMatrix = function (d) {\n    if (!arguments.length) return this._distanceMatrix;\n    this._distanceMatrix = d;\n    return this;\n  };\n\n  Layout.prototype.size = function (x) {\n    if (!x) return this._canvasSize;\n    this._canvasSize = x;\n    return this;\n  };\n\n  Layout.prototype.defaultNodeSize = function (x) {\n    if (!x) return this._defaultNodeSize;\n    this._defaultNodeSize = x;\n    return this;\n  };\n\n  Layout.prototype.groupCompactness = function (x) {\n    if (!x) return this._groupCompactness;\n    this._groupCompactness = x;\n    return this;\n  };\n\n  Layout.prototype.linkDistance = function (x) {\n    if (!x) {\n      return this._linkDistance;\n    }\n\n    this._linkDistance = typeof x === \"function\" ? x : +x;\n    this._linkLengthCalculator = null;\n    return this;\n  };\n\n  Layout.prototype.linkType = function (f) {\n    this._linkType = f;\n    return this;\n  };\n\n  Layout.prototype.convergenceThreshold = function (x) {\n    if (!x) return this._threshold;\n    this._threshold = typeof x === \"function\" ? x : +x;\n    return this;\n  };\n\n  Layout.prototype.alpha = function (x) {\n    if (!arguments.length) return this._alpha;else {\n      x = +x;\n\n      if (this._alpha) {\n        if (x > 0) this._alpha = x;else this._alpha = 0;\n      } else if (x > 0) {\n        if (!this._running) {\n          this._running = true;\n          this.trigger({\n            type: EventType.start,\n            alpha: this._alpha = x\n          });\n          this.kick();\n        }\n      }\n\n      return this;\n    }\n  };\n\n  Layout.prototype.getLinkLength = function (link) {\n    return typeof this._linkDistance === \"function\" ? +this._linkDistance(link) : this._linkDistance;\n  };\n\n  Layout.setLinkLength = function (link, length) {\n    link.length = length;\n  };\n\n  Layout.prototype.getLinkType = function (link) {\n    return typeof this._linkType === \"function\" ? this._linkType(link) : 0;\n  };\n\n  Layout.prototype.symmetricDiffLinkLengths = function (idealLength, w) {\n    var _this = this;\n\n    if (w === void 0) {\n      w = 1;\n    }\n\n    this.linkDistance(function (l) {\n      return idealLength * l.length;\n    });\n\n    this._linkLengthCalculator = function () {\n      return linklengths_1.symmetricDiffLinkLengths(_this._links, _this.linkAccessor, w);\n    };\n\n    return this;\n  };\n\n  Layout.prototype.jaccardLinkLengths = function (idealLength, w) {\n    var _this = this;\n\n    if (w === void 0) {\n      w = 1;\n    }\n\n    this.linkDistance(function (l) {\n      return idealLength * l.length;\n    });\n\n    this._linkLengthCalculator = function () {\n      return linklengths_1.jaccardLinkLengths(_this._links, _this.linkAccessor, w);\n    };\n\n    return this;\n  };\n\n  Layout.prototype.start = function (initialUnconstrainedIterations, initialUserConstraintIterations, initialAllConstraintsIterations, gridSnapIterations, keepRunning, centerGraph) {\n    var _this = this;\n\n    if (initialUnconstrainedIterations === void 0) {\n      initialUnconstrainedIterations = 0;\n    }\n\n    if (initialUserConstraintIterations === void 0) {\n      initialUserConstraintIterations = 0;\n    }\n\n    if (initialAllConstraintsIterations === void 0) {\n      initialAllConstraintsIterations = 0;\n    }\n\n    if (gridSnapIterations === void 0) {\n      gridSnapIterations = 0;\n    }\n\n    if (keepRunning === void 0) {\n      keepRunning = true;\n    }\n\n    if (centerGraph === void 0) {\n      centerGraph = true;\n    }\n\n    var i,\n        j,\n        n = this.nodes().length,\n        N = n + 2 * this._groups.length,\n        m = this._links.length,\n        w = this._canvasSize[0],\n        h = this._canvasSize[1];\n    var x = new Array(N),\n        y = new Array(N);\n    var G = null;\n    var ao = this._avoidOverlaps;\n\n    this._nodes.forEach(function (v, i) {\n      v.index = i;\n\n      if (typeof v.x === 'undefined') {\n        v.x = w / 2, v.y = h / 2;\n      }\n\n      x[i] = v.x, y[i] = v.y;\n    });\n\n    if (this._linkLengthCalculator) this._linkLengthCalculator();\n    var distances;\n\n    if (this._distanceMatrix) {\n      distances = this._distanceMatrix;\n    } else {\n      distances = new shortestpaths_1.Calculator(N, this._links, Layout.getSourceIndex, Layout.getTargetIndex, function (l) {\n        return _this.getLinkLength(l);\n      }).DistanceMatrix();\n      G = descent_1.Descent.createSquareMatrix(N, function () {\n        return 2;\n      });\n\n      this._links.forEach(function (l) {\n        if (typeof l.source == \"number\") l.source = _this._nodes[l.source];\n        if (typeof l.target == \"number\") l.target = _this._nodes[l.target];\n      });\n\n      this._links.forEach(function (e) {\n        var u = Layout.getSourceIndex(e),\n            v = Layout.getTargetIndex(e);\n        G[u][v] = G[v][u] = e.weight || 1;\n      });\n    }\n\n    var D = descent_1.Descent.createSquareMatrix(N, function (i, j) {\n      return distances[i][j];\n    });\n\n    if (this._rootGroup && typeof this._rootGroup.groups !== 'undefined') {\n      var i = n;\n\n      var addAttraction = function addAttraction(i, j, strength, idealDistance) {\n        G[i][j] = G[j][i] = strength;\n        D[i][j] = D[j][i] = idealDistance;\n      };\n\n      this._groups.forEach(function (g) {\n        addAttraction(i, i + 1, _this._groupCompactness, 0.1);\n        x[i] = 0, y[i++] = 0;\n        x[i] = 0, y[i++] = 0;\n      });\n    } else this._rootGroup = {\n      leaves: this._nodes,\n      groups: []\n    };\n\n    var curConstraints = this._constraints || [];\n\n    if (this._directedLinkConstraints) {\n      this.linkAccessor.getMinSeparation = this._directedLinkConstraints.getMinSeparation;\n      curConstraints = curConstraints.concat(linklengths_1.generateDirectedEdgeConstraints(n, this._links, this._directedLinkConstraints.axis, this.linkAccessor));\n    }\n\n    this.avoidOverlaps(false);\n    this._descent = new descent_1.Descent([x, y], D);\n\n    this._descent.locks.clear();\n\n    for (var i = 0; i < n; ++i) {\n      var o = this._nodes[i];\n\n      if (o.fixed) {\n        o.px = o.x;\n        o.py = o.y;\n        var p = [o.x, o.y];\n\n        this._descent.locks.add(i, p);\n      }\n    }\n\n    this._descent.threshold = this._threshold;\n    this.initialLayout(initialUnconstrainedIterations, x, y);\n    if (curConstraints.length > 0) this._descent.project = new rectangle_1.Projection(this._nodes, this._groups, this._rootGroup, curConstraints).projectFunctions();\n\n    this._descent.run(initialUserConstraintIterations);\n\n    this.separateOverlappingComponents(w, h, centerGraph);\n    this.avoidOverlaps(ao);\n\n    if (ao) {\n      this._nodes.forEach(function (v, i) {\n        v.x = x[i], v.y = y[i];\n      });\n\n      this._descent.project = new rectangle_1.Projection(this._nodes, this._groups, this._rootGroup, curConstraints, true).projectFunctions();\n\n      this._nodes.forEach(function (v, i) {\n        x[i] = v.x, y[i] = v.y;\n      });\n    }\n\n    this._descent.G = G;\n\n    this._descent.run(initialAllConstraintsIterations);\n\n    if (gridSnapIterations) {\n      this._descent.snapStrength = 1000;\n      this._descent.snapGridSize = this._nodes[0].width;\n      this._descent.numGridSnapNodes = n;\n      this._descent.scaleSnapByMaxH = n != N;\n      var G0 = descent_1.Descent.createSquareMatrix(N, function (i, j) {\n        if (i >= n || j >= n) return G[i][j];\n        return 0;\n      });\n      this._descent.G = G0;\n\n      this._descent.run(gridSnapIterations);\n    }\n\n    this.updateNodePositions();\n    this.separateOverlappingComponents(w, h, centerGraph);\n    return keepRunning ? this.resume() : this;\n  };\n\n  Layout.prototype.initialLayout = function (iterations, x, y) {\n    if (this._groups.length > 0 && iterations > 0) {\n      var n = this._nodes.length;\n\n      var edges = this._links.map(function (e) {\n        return {\n          source: e.source.index,\n          target: e.target.index\n        };\n      });\n\n      var vs = this._nodes.map(function (v) {\n        return {\n          index: v.index\n        };\n      });\n\n      this._groups.forEach(function (g, i) {\n        vs.push({\n          index: g.index = n + i\n        });\n      });\n\n      this._groups.forEach(function (g, i) {\n        if (typeof g.leaves !== 'undefined') g.leaves.forEach(function (v) {\n          return edges.push({\n            source: g.index,\n            target: v.index\n          });\n        });\n        if (typeof g.groups !== 'undefined') g.groups.forEach(function (gg) {\n          return edges.push({\n            source: g.index,\n            target: gg.index\n          });\n        });\n      });\n\n      new Layout().size(this.size()).nodes(vs).links(edges).avoidOverlaps(false).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(iterations, 0, 0, 0, false);\n\n      this._nodes.forEach(function (v) {\n        x[v.index] = vs[v.index].x;\n        y[v.index] = vs[v.index].y;\n      });\n    } else {\n      this._descent.run(iterations);\n    }\n  };\n\n  Layout.prototype.separateOverlappingComponents = function (width, height, centerGraph) {\n    var _this = this;\n\n    if (centerGraph === void 0) {\n      centerGraph = true;\n    }\n\n    if (!this._distanceMatrix && this._handleDisconnected) {\n      var x_1 = this._descent.x[0],\n          y_1 = this._descent.x[1];\n\n      this._nodes.forEach(function (v, i) {\n        v.x = x_1[i], v.y = y_1[i];\n      });\n\n      var graphs = handledisconnected_1.separateGraphs(this._nodes, this._links);\n      handledisconnected_1.applyPacking(graphs, width, height, this._defaultNodeSize, 1, centerGraph);\n\n      this._nodes.forEach(function (v, i) {\n        _this._descent.x[0][i] = v.x, _this._descent.x[1][i] = v.y;\n\n        if (v.bounds) {\n          v.bounds.setXCentre(v.x);\n          v.bounds.setYCentre(v.y);\n        }\n      });\n    }\n  };\n\n  Layout.prototype.resume = function () {\n    return this.alpha(0.1);\n  };\n\n  Layout.prototype.stop = function () {\n    return this.alpha(0);\n  };\n\n  Layout.prototype.prepareEdgeRouting = function (nodeMargin) {\n    if (nodeMargin === void 0) {\n      nodeMargin = 0;\n    }\n\n    this._visibilityGraph = new geom_1.TangentVisibilityGraph(this._nodes.map(function (v) {\n      return v.bounds.inflate(-nodeMargin).vertices();\n    }));\n  };\n\n  Layout.prototype.routeEdge = function (edge, ah, draw) {\n    if (ah === void 0) {\n      ah = 5;\n    }\n\n    var lineData = [];\n    var vg2 = new geom_1.TangentVisibilityGraph(this._visibilityGraph.P, {\n      V: this._visibilityGraph.V,\n      E: this._visibilityGraph.E\n    }),\n        port1 = {\n      x: edge.source.x,\n      y: edge.source.y\n    },\n        port2 = {\n      x: edge.target.x,\n      y: edge.target.y\n    },\n        start = vg2.addPoint(port1, edge.source.index),\n        end = vg2.addPoint(port2, edge.target.index);\n    vg2.addEdgeIfVisible(port1, port2, edge.source.index, edge.target.index);\n\n    if (typeof draw !== 'undefined') {\n      draw(vg2);\n    }\n\n    var sourceInd = function sourceInd(e) {\n      return e.source.id;\n    },\n        targetInd = function targetInd(e) {\n      return e.target.id;\n    },\n        length = function length(e) {\n      return e.length();\n    },\n        spCalc = new shortestpaths_1.Calculator(vg2.V.length, vg2.E, sourceInd, targetInd, length),\n        shortestPath = spCalc.PathFromNodeToNode(start.id, end.id);\n\n    if (shortestPath.length === 1 || shortestPath.length === vg2.V.length) {\n      var route = rectangle_1.makeEdgeBetween(edge.source.innerBounds, edge.target.innerBounds, ah);\n      lineData = [route.sourceIntersection, route.arrowStart];\n    } else {\n      var n = shortestPath.length - 2,\n          p = vg2.V[shortestPath[n]].p,\n          q = vg2.V[shortestPath[0]].p,\n          lineData = [edge.source.innerBounds.rayIntersection(p.x, p.y)];\n\n      for (var i = n; i >= 0; --i) {\n        lineData.push(vg2.V[shortestPath[i]].p);\n      }\n\n      lineData.push(rectangle_1.makeEdgeTo(q, edge.target.innerBounds, ah));\n    }\n\n    return lineData;\n  };\n\n  Layout.getSourceIndex = function (e) {\n    return typeof e.source === 'number' ? e.source : e.source.index;\n  };\n\n  Layout.getTargetIndex = function (e) {\n    return typeof e.target === 'number' ? e.target : e.target.index;\n  };\n\n  Layout.linkId = function (e) {\n    return Layout.getSourceIndex(e) + \"-\" + Layout.getTargetIndex(e);\n  };\n\n  Layout.dragStart = function (d) {\n    if (isGroup(d)) {\n      Layout.storeOffset(d, Layout.dragOrigin(d));\n    } else {\n      Layout.stopNode(d);\n      d.fixed |= 2;\n    }\n  };\n\n  Layout.stopNode = function (v) {\n    v.px = v.x;\n    v.py = v.y;\n  };\n\n  Layout.storeOffset = function (d, origin) {\n    if (typeof d.leaves !== 'undefined') {\n      d.leaves.forEach(function (v) {\n        v.fixed |= 2;\n        Layout.stopNode(v);\n        v._dragGroupOffsetX = v.x - origin.x;\n        v._dragGroupOffsetY = v.y - origin.y;\n      });\n    }\n\n    if (typeof d.groups !== 'undefined') {\n      d.groups.forEach(function (g) {\n        return Layout.storeOffset(g, origin);\n      });\n    }\n  };\n\n  Layout.dragOrigin = function (d) {\n    if (isGroup(d)) {\n      return {\n        x: d.bounds.cx(),\n        y: d.bounds.cy()\n      };\n    } else {\n      return d;\n    }\n  };\n\n  Layout.drag = function (d, position) {\n    if (isGroup(d)) {\n      if (typeof d.leaves !== 'undefined') {\n        d.leaves.forEach(function (v) {\n          d.bounds.setXCentre(position.x);\n          d.bounds.setYCentre(position.y);\n          v.px = v._dragGroupOffsetX + position.x;\n          v.py = v._dragGroupOffsetY + position.y;\n        });\n      }\n\n      if (typeof d.groups !== 'undefined') {\n        d.groups.forEach(function (g) {\n          return Layout.drag(g, position);\n        });\n      }\n    } else {\n      d.px = position.x;\n      d.py = position.y;\n    }\n  };\n\n  Layout.dragEnd = function (d) {\n    if (isGroup(d)) {\n      if (typeof d.leaves !== 'undefined') {\n        d.leaves.forEach(function (v) {\n          Layout.dragEnd(v);\n          delete v._dragGroupOffsetX;\n          delete v._dragGroupOffsetY;\n        });\n      }\n\n      if (typeof d.groups !== 'undefined') {\n        d.groups.forEach(Layout.dragEnd);\n      }\n    } else {\n      d.fixed &= ~6;\n    }\n  };\n\n  Layout.mouseOver = function (d) {\n    d.fixed |= 4;\n    d.px = d.x, d.py = d.y;\n  };\n\n  Layout.mouseOut = function (d) {\n    d.fixed &= ~4;\n  };\n\n  return Layout;\n}();\n\nexports.Layout = Layout;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar vpsc_1 = require(\"./vpsc\");\n\nvar rbtree_1 = require(\"./rbtree\");\n\nfunction computeGroupBounds(g) {\n  g.bounds = typeof g.leaves !== \"undefined\" ? g.leaves.reduce(function (r, c) {\n    return c.bounds.union(r);\n  }, Rectangle.empty()) : Rectangle.empty();\n  if (typeof g.groups !== \"undefined\") g.bounds = g.groups.reduce(function (r, c) {\n    return computeGroupBounds(c).union(r);\n  }, g.bounds);\n  g.bounds = g.bounds.inflate(g.padding);\n  return g.bounds;\n}\n\nexports.computeGroupBounds = computeGroupBounds;\n\nvar Rectangle = function () {\n  function Rectangle(x, X, y, Y) {\n    this.x = x;\n    this.X = X;\n    this.y = y;\n    this.Y = Y;\n  }\n\n  Rectangle.empty = function () {\n    return new Rectangle(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY);\n  };\n\n  Rectangle.prototype.cx = function () {\n    return (this.x + this.X) / 2;\n  };\n\n  Rectangle.prototype.cy = function () {\n    return (this.y + this.Y) / 2;\n  };\n\n  Rectangle.prototype.overlapX = function (r) {\n    var ux = this.cx(),\n        vx = r.cx();\n    if (ux <= vx && r.x < this.X) return this.X - r.x;\n    if (vx <= ux && this.x < r.X) return r.X - this.x;\n    return 0;\n  };\n\n  Rectangle.prototype.overlapY = function (r) {\n    var uy = this.cy(),\n        vy = r.cy();\n    if (uy <= vy && r.y < this.Y) return this.Y - r.y;\n    if (vy <= uy && this.y < r.Y) return r.Y - this.y;\n    return 0;\n  };\n\n  Rectangle.prototype.setXCentre = function (cx) {\n    var dx = cx - this.cx();\n    this.x += dx;\n    this.X += dx;\n  };\n\n  Rectangle.prototype.setYCentre = function (cy) {\n    var dy = cy - this.cy();\n    this.y += dy;\n    this.Y += dy;\n  };\n\n  Rectangle.prototype.width = function () {\n    return this.X - this.x;\n  };\n\n  Rectangle.prototype.height = function () {\n    return this.Y - this.y;\n  };\n\n  Rectangle.prototype.union = function (r) {\n    return new Rectangle(Math.min(this.x, r.x), Math.max(this.X, r.X), Math.min(this.y, r.y), Math.max(this.Y, r.Y));\n  };\n\n  Rectangle.prototype.lineIntersections = function (x1, y1, x2, y2) {\n    var sides = [[this.x, this.y, this.X, this.y], [this.X, this.y, this.X, this.Y], [this.X, this.Y, this.x, this.Y], [this.x, this.Y, this.x, this.y]];\n    var intersections = [];\n\n    for (var i = 0; i < 4; ++i) {\n      var r = Rectangle.lineIntersection(x1, y1, x2, y2, sides[i][0], sides[i][1], sides[i][2], sides[i][3]);\n      if (r !== null) intersections.push({\n        x: r.x,\n        y: r.y\n      });\n    }\n\n    return intersections;\n  };\n\n  Rectangle.prototype.rayIntersection = function (x2, y2) {\n    var ints = this.lineIntersections(this.cx(), this.cy(), x2, y2);\n    return ints.length > 0 ? ints[0] : null;\n  };\n\n  Rectangle.prototype.vertices = function () {\n    return [{\n      x: this.x,\n      y: this.y\n    }, {\n      x: this.X,\n      y: this.y\n    }, {\n      x: this.X,\n      y: this.Y\n    }, {\n      x: this.x,\n      y: this.Y\n    }];\n  };\n\n  Rectangle.lineIntersection = function (x1, y1, x2, y2, x3, y3, x4, y4) {\n    var dx12 = x2 - x1,\n        dx34 = x4 - x3,\n        dy12 = y2 - y1,\n        dy34 = y4 - y3,\n        denominator = dy34 * dx12 - dx34 * dy12;\n    if (denominator == 0) return null;\n    var dx31 = x1 - x3,\n        dy31 = y1 - y3,\n        numa = dx34 * dy31 - dy34 * dx31,\n        a = numa / denominator,\n        numb = dx12 * dy31 - dy12 * dx31,\n        b = numb / denominator;\n\n    if (a >= 0 && a <= 1 && b >= 0 && b <= 1) {\n      return {\n        x: x1 + a * dx12,\n        y: y1 + a * dy12\n      };\n    }\n\n    return null;\n  };\n\n  Rectangle.prototype.inflate = function (pad) {\n    return new Rectangle(this.x - pad, this.X + pad, this.y - pad, this.Y + pad);\n  };\n\n  return Rectangle;\n}();\n\nexports.Rectangle = Rectangle;\n\nfunction makeEdgeBetween(source, target, ah) {\n  var si = source.rayIntersection(target.cx(), target.cy()) || {\n    x: source.cx(),\n    y: source.cy()\n  },\n      ti = target.rayIntersection(source.cx(), source.cy()) || {\n    x: target.cx(),\n    y: target.cy()\n  },\n      dx = ti.x - si.x,\n      dy = ti.y - si.y,\n      l = Math.sqrt(dx * dx + dy * dy),\n      al = l - ah;\n  return {\n    sourceIntersection: si,\n    targetIntersection: ti,\n    arrowStart: {\n      x: si.x + al * dx / l,\n      y: si.y + al * dy / l\n    }\n  };\n}\n\nexports.makeEdgeBetween = makeEdgeBetween;\n\nfunction makeEdgeTo(s, target, ah) {\n  var ti = target.rayIntersection(s.x, s.y);\n  if (!ti) ti = {\n    x: target.cx(),\n    y: target.cy()\n  };\n  var dx = ti.x - s.x,\n      dy = ti.y - s.y,\n      l = Math.sqrt(dx * dx + dy * dy);\n  return {\n    x: ti.x - ah * dx / l,\n    y: ti.y - ah * dy / l\n  };\n}\n\nexports.makeEdgeTo = makeEdgeTo;\n\nvar Node = function () {\n  function Node(v, r, pos) {\n    this.v = v;\n    this.r = r;\n    this.pos = pos;\n    this.prev = makeRBTree();\n    this.next = makeRBTree();\n  }\n\n  return Node;\n}();\n\nvar Event = function () {\n  function Event(isOpen, v, pos) {\n    this.isOpen = isOpen;\n    this.v = v;\n    this.pos = pos;\n  }\n\n  return Event;\n}();\n\nfunction compareEvents(a, b) {\n  if (a.pos > b.pos) {\n    return 1;\n  }\n\n  if (a.pos < b.pos) {\n    return -1;\n  }\n\n  if (a.isOpen) {\n    return -1;\n  }\n\n  if (b.isOpen) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction makeRBTree() {\n  return new rbtree_1.RBTree(function (a, b) {\n    return a.pos - b.pos;\n  });\n}\n\nvar xRect = {\n  getCentre: function getCentre(r) {\n    return r.cx();\n  },\n  getOpen: function getOpen(r) {\n    return r.y;\n  },\n  getClose: function getClose(r) {\n    return r.Y;\n  },\n  getSize: function getSize(r) {\n    return r.width();\n  },\n  makeRect: function makeRect(open, close, center, size) {\n    return new Rectangle(center - size / 2, center + size / 2, open, close);\n  },\n  findNeighbours: findXNeighbours\n};\nvar yRect = {\n  getCentre: function getCentre(r) {\n    return r.cy();\n  },\n  getOpen: function getOpen(r) {\n    return r.x;\n  },\n  getClose: function getClose(r) {\n    return r.X;\n  },\n  getSize: function getSize(r) {\n    return r.height();\n  },\n  makeRect: function makeRect(open, close, center, size) {\n    return new Rectangle(open, close, center - size / 2, center + size / 2);\n  },\n  findNeighbours: findYNeighbours\n};\n\nfunction generateGroupConstraints(root, f, minSep, isContained) {\n  if (isContained === void 0) {\n    isContained = false;\n  }\n\n  var padding = root.padding,\n      gn = typeof root.groups !== 'undefined' ? root.groups.length : 0,\n      ln = typeof root.leaves !== 'undefined' ? root.leaves.length : 0,\n      childConstraints = !gn ? [] : root.groups.reduce(function (ccs, g) {\n    return ccs.concat(generateGroupConstraints(g, f, minSep, true));\n  }, []),\n      n = (isContained ? 2 : 0) + ln + gn,\n      vs = new Array(n),\n      rs = new Array(n),\n      i = 0,\n      add = function add(r, v) {\n    rs[i] = r;\n    vs[i++] = v;\n  };\n\n  if (isContained) {\n    var b = root.bounds,\n        c = f.getCentre(b),\n        s = f.getSize(b) / 2,\n        open = f.getOpen(b),\n        close = f.getClose(b),\n        min = c - s + padding / 2,\n        max = c + s - padding / 2;\n    root.minVar.desiredPosition = min;\n    add(f.makeRect(open, close, min, padding), root.minVar);\n    root.maxVar.desiredPosition = max;\n    add(f.makeRect(open, close, max, padding), root.maxVar);\n  }\n\n  if (ln) root.leaves.forEach(function (l) {\n    return add(l.bounds, l.variable);\n  });\n  if (gn) root.groups.forEach(function (g) {\n    var b = g.bounds;\n    add(f.makeRect(f.getOpen(b), f.getClose(b), f.getCentre(b), f.getSize(b)), g.minVar);\n  });\n  var cs = generateConstraints(rs, vs, f, minSep);\n\n  if (gn) {\n    vs.forEach(function (v) {\n      v.cOut = [], v.cIn = [];\n    });\n    cs.forEach(function (c) {\n      c.left.cOut.push(c), c.right.cIn.push(c);\n    });\n    root.groups.forEach(function (g) {\n      var gapAdjustment = (g.padding - f.getSize(g.bounds)) / 2;\n      g.minVar.cIn.forEach(function (c) {\n        return c.gap += gapAdjustment;\n      });\n      g.minVar.cOut.forEach(function (c) {\n        c.left = g.maxVar;\n        c.gap += gapAdjustment;\n      });\n    });\n  }\n\n  return childConstraints.concat(cs);\n}\n\nfunction generateConstraints(rs, vars, rect, minSep) {\n  var i,\n      n = rs.length;\n  var N = 2 * n;\n  console.assert(vars.length >= n);\n  var events = new Array(N);\n\n  for (i = 0; i < n; ++i) {\n    var r = rs[i];\n    var v = new Node(vars[i], r, rect.getCentre(r));\n    events[i] = new Event(true, v, rect.getOpen(r));\n    events[i + n] = new Event(false, v, rect.getClose(r));\n  }\n\n  events.sort(compareEvents);\n  var cs = new Array();\n  var scanline = makeRBTree();\n\n  for (i = 0; i < N; ++i) {\n    var e = events[i];\n    var v = e.v;\n\n    if (e.isOpen) {\n      scanline.insert(v);\n      rect.findNeighbours(v, scanline);\n    } else {\n      scanline.remove(v);\n\n      var makeConstraint = function makeConstraint(l, r) {\n        var sep = (rect.getSize(l.r) + rect.getSize(r.r)) / 2 + minSep;\n        cs.push(new vpsc_1.Constraint(l.v, r.v, sep));\n      };\n\n      var visitNeighbours = function visitNeighbours(forward, reverse, mkcon) {\n        var u,\n            it = v[forward].iterator();\n\n        while ((u = it[forward]()) !== null) {\n          mkcon(u, v);\n          u[reverse].remove(v);\n        }\n      };\n\n      visitNeighbours(\"prev\", \"next\", function (u, v) {\n        return makeConstraint(u, v);\n      });\n      visitNeighbours(\"next\", \"prev\", function (u, v) {\n        return makeConstraint(v, u);\n      });\n    }\n  }\n\n  console.assert(scanline.size === 0);\n  return cs;\n}\n\nfunction findXNeighbours(v, scanline) {\n  var f = function f(forward, reverse) {\n    var it = scanline.findIter(v);\n    var u;\n\n    while ((u = it[forward]()) !== null) {\n      var uovervX = u.r.overlapX(v.r);\n\n      if (uovervX <= 0 || uovervX <= u.r.overlapY(v.r)) {\n        v[forward].insert(u);\n        u[reverse].insert(v);\n      }\n\n      if (uovervX <= 0) {\n        break;\n      }\n    }\n  };\n\n  f(\"next\", \"prev\");\n  f(\"prev\", \"next\");\n}\n\nfunction findYNeighbours(v, scanline) {\n  var f = function f(forward, reverse) {\n    var u = scanline.findIter(v)[forward]();\n\n    if (u !== null && u.r.overlapX(v.r) > 0) {\n      v[forward].insert(u);\n      u[reverse].insert(v);\n    }\n  };\n\n  f(\"next\", \"prev\");\n  f(\"prev\", \"next\");\n}\n\nfunction generateXConstraints(rs, vars) {\n  return generateConstraints(rs, vars, xRect, 1e-6);\n}\n\nexports.generateXConstraints = generateXConstraints;\n\nfunction generateYConstraints(rs, vars) {\n  return generateConstraints(rs, vars, yRect, 1e-6);\n}\n\nexports.generateYConstraints = generateYConstraints;\n\nfunction generateXGroupConstraints(root) {\n  return generateGroupConstraints(root, xRect, 1e-6);\n}\n\nexports.generateXGroupConstraints = generateXGroupConstraints;\n\nfunction generateYGroupConstraints(root) {\n  return generateGroupConstraints(root, yRect, 1e-6);\n}\n\nexports.generateYGroupConstraints = generateYGroupConstraints;\n\nfunction removeOverlaps(rs) {\n  var vs = rs.map(function (r) {\n    return new vpsc_1.Variable(r.cx());\n  });\n  var cs = generateXConstraints(rs, vs);\n  var solver = new vpsc_1.Solver(vs, cs);\n  solver.solve();\n  vs.forEach(function (v, i) {\n    return rs[i].setXCentre(v.position());\n  });\n  vs = rs.map(function (r) {\n    return new vpsc_1.Variable(r.cy());\n  });\n  cs = generateYConstraints(rs, vs);\n  solver = new vpsc_1.Solver(vs, cs);\n  solver.solve();\n  vs.forEach(function (v, i) {\n    return rs[i].setYCentre(v.position());\n  });\n}\n\nexports.removeOverlaps = removeOverlaps;\n\nvar IndexedVariable = function (_super) {\n  __extends(IndexedVariable, _super);\n\n  function IndexedVariable(index, w) {\n    var _this = _super.call(this, 0, w) || this;\n\n    _this.index = index;\n    return _this;\n  }\n\n  return IndexedVariable;\n}(vpsc_1.Variable);\n\nexports.IndexedVariable = IndexedVariable;\n\nvar Projection = function () {\n  function Projection(nodes, groups, rootGroup, constraints, avoidOverlaps) {\n    var _this = this;\n\n    if (rootGroup === void 0) {\n      rootGroup = null;\n    }\n\n    if (constraints === void 0) {\n      constraints = null;\n    }\n\n    if (avoidOverlaps === void 0) {\n      avoidOverlaps = false;\n    }\n\n    this.nodes = nodes;\n    this.groups = groups;\n    this.rootGroup = rootGroup;\n    this.avoidOverlaps = avoidOverlaps;\n    this.variables = nodes.map(function (v, i) {\n      return v.variable = new IndexedVariable(i, 1);\n    });\n    if (constraints) this.createConstraints(constraints);\n\n    if (avoidOverlaps && rootGroup && typeof rootGroup.groups !== 'undefined') {\n      nodes.forEach(function (v) {\n        if (!v.width || !v.height) {\n          v.bounds = new Rectangle(v.x, v.x, v.y, v.y);\n          return;\n        }\n\n        var w2 = v.width / 2,\n            h2 = v.height / 2;\n        v.bounds = new Rectangle(v.x - w2, v.x + w2, v.y - h2, v.y + h2);\n      });\n      computeGroupBounds(rootGroup);\n      var i = nodes.length;\n      groups.forEach(function (g) {\n        _this.variables[i] = g.minVar = new IndexedVariable(i++, typeof g.stiffness !== \"undefined\" ? g.stiffness : 0.01);\n        _this.variables[i] = g.maxVar = new IndexedVariable(i++, typeof g.stiffness !== \"undefined\" ? g.stiffness : 0.01);\n      });\n    }\n  }\n\n  Projection.prototype.createSeparation = function (c) {\n    return new vpsc_1.Constraint(this.nodes[c.left].variable, this.nodes[c.right].variable, c.gap, typeof c.equality !== \"undefined\" ? c.equality : false);\n  };\n\n  Projection.prototype.makeFeasible = function (c) {\n    var _this = this;\n\n    if (!this.avoidOverlaps) return;\n    var axis = 'x',\n        dim = 'width';\n    if (c.axis === 'x') axis = 'y', dim = 'height';\n    var vs = c.offsets.map(function (o) {\n      return _this.nodes[o.node];\n    }).sort(function (a, b) {\n      return a[axis] - b[axis];\n    });\n    var p = null;\n    vs.forEach(function (v) {\n      if (p) {\n        var nextPos = p[axis] + p[dim];\n\n        if (nextPos > v[axis]) {\n          v[axis] = nextPos;\n        }\n      }\n\n      p = v;\n    });\n  };\n\n  Projection.prototype.createAlignment = function (c) {\n    var _this = this;\n\n    var u = this.nodes[c.offsets[0].node].variable;\n    this.makeFeasible(c);\n    var cs = c.axis === 'x' ? this.xConstraints : this.yConstraints;\n    c.offsets.slice(1).forEach(function (o) {\n      var v = _this.nodes[o.node].variable;\n      cs.push(new vpsc_1.Constraint(u, v, o.offset, true));\n    });\n  };\n\n  Projection.prototype.createConstraints = function (constraints) {\n    var _this = this;\n\n    var isSep = function isSep(c) {\n      return typeof c.type === 'undefined' || c.type === 'separation';\n    };\n\n    this.xConstraints = constraints.filter(function (c) {\n      return c.axis === \"x\" && isSep(c);\n    }).map(function (c) {\n      return _this.createSeparation(c);\n    });\n    this.yConstraints = constraints.filter(function (c) {\n      return c.axis === \"y\" && isSep(c);\n    }).map(function (c) {\n      return _this.createSeparation(c);\n    });\n    constraints.filter(function (c) {\n      return c.type === 'alignment';\n    }).forEach(function (c) {\n      return _this.createAlignment(c);\n    });\n  };\n\n  Projection.prototype.setupVariablesAndBounds = function (x0, y0, desired, getDesired) {\n    this.nodes.forEach(function (v, i) {\n      if (v.fixed) {\n        v.variable.weight = v.fixedWeight ? v.fixedWeight : 1000;\n        desired[i] = getDesired(v);\n      } else {\n        v.variable.weight = 1;\n      }\n\n      var w = (v.width || 0) / 2,\n          h = (v.height || 0) / 2;\n      var ix = x0[i],\n          iy = y0[i];\n      v.bounds = new Rectangle(ix - w, ix + w, iy - h, iy + h);\n    });\n  };\n\n  Projection.prototype.xProject = function (x0, y0, x) {\n    if (!this.rootGroup && !(this.avoidOverlaps || this.xConstraints)) return;\n    this.project(x0, y0, x0, x, function (v) {\n      return v.px;\n    }, this.xConstraints, generateXGroupConstraints, function (v) {\n      return v.bounds.setXCentre(x[v.variable.index] = v.variable.position());\n    }, function (g) {\n      var xmin = x[g.minVar.index] = g.minVar.position();\n      var xmax = x[g.maxVar.index] = g.maxVar.position();\n      var p2 = g.padding / 2;\n      g.bounds.x = xmin - p2;\n      g.bounds.X = xmax + p2;\n    });\n  };\n\n  Projection.prototype.yProject = function (x0, y0, y) {\n    if (!this.rootGroup && !this.yConstraints) return;\n    this.project(x0, y0, y0, y, function (v) {\n      return v.py;\n    }, this.yConstraints, generateYGroupConstraints, function (v) {\n      return v.bounds.setYCentre(y[v.variable.index] = v.variable.position());\n    }, function (g) {\n      var ymin = y[g.minVar.index] = g.minVar.position();\n      var ymax = y[g.maxVar.index] = g.maxVar.position();\n      var p2 = g.padding / 2;\n      g.bounds.y = ymin - p2;\n      ;\n      g.bounds.Y = ymax + p2;\n    });\n  };\n\n  Projection.prototype.projectFunctions = function () {\n    var _this = this;\n\n    return [function (x0, y0, x) {\n      return _this.xProject(x0, y0, x);\n    }, function (x0, y0, y) {\n      return _this.yProject(x0, y0, y);\n    }];\n  };\n\n  Projection.prototype.project = function (x0, y0, start, desired, getDesired, cs, generateConstraints, updateNodeBounds, updateGroupBounds) {\n    this.setupVariablesAndBounds(x0, y0, desired, getDesired);\n\n    if (this.rootGroup && this.avoidOverlaps) {\n      computeGroupBounds(this.rootGroup);\n      cs = cs.concat(generateConstraints(this.rootGroup));\n    }\n\n    this.solve(this.variables, cs, start, desired);\n    this.nodes.forEach(updateNodeBounds);\n\n    if (this.rootGroup && this.avoidOverlaps) {\n      this.groups.forEach(updateGroupBounds);\n      computeGroupBounds(this.rootGroup);\n    }\n  };\n\n  Projection.prototype.solve = function (vs, cs, starting, desired) {\n    var solver = new vpsc_1.Solver(vs, cs);\n    solver.setStartingPositions(starting);\n    solver.setDesiredPositions(desired);\n    solver.solve();\n  };\n\n  return Projection;\n}();\n\nexports.Projection = Projection;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar pqueue_1 = require(\"./pqueue\");\n\nvar Neighbour = function () {\n  function Neighbour(id, distance) {\n    this.id = id;\n    this.distance = distance;\n  }\n\n  return Neighbour;\n}();\n\nvar Node = function () {\n  function Node(id) {\n    this.id = id;\n    this.neighbours = [];\n  }\n\n  return Node;\n}();\n\nvar QueueEntry = function () {\n  function QueueEntry(node, prev, d) {\n    this.node = node;\n    this.prev = prev;\n    this.d = d;\n  }\n\n  return QueueEntry;\n}();\n\nvar Calculator = function () {\n  function Calculator(n, es, getSourceIndex, getTargetIndex, getLength) {\n    this.n = n;\n    this.es = es;\n    this.neighbours = new Array(this.n);\n    var i = this.n;\n\n    while (i--) {\n      this.neighbours[i] = new Node(i);\n    }\n\n    i = this.es.length;\n\n    while (i--) {\n      var e = this.es[i];\n      var u = getSourceIndex(e),\n          v = getTargetIndex(e);\n      var d = getLength(e);\n      this.neighbours[u].neighbours.push(new Neighbour(v, d));\n      this.neighbours[v].neighbours.push(new Neighbour(u, d));\n    }\n  }\n\n  Calculator.prototype.DistanceMatrix = function () {\n    var D = new Array(this.n);\n\n    for (var i = 0; i < this.n; ++i) {\n      D[i] = this.dijkstraNeighbours(i);\n    }\n\n    return D;\n  };\n\n  Calculator.prototype.DistancesFromNode = function (start) {\n    return this.dijkstraNeighbours(start);\n  };\n\n  Calculator.prototype.PathFromNodeToNode = function (start, end) {\n    return this.dijkstraNeighbours(start, end);\n  };\n\n  Calculator.prototype.PathFromNodeToNodeWithPrevCost = function (start, end, prevCost) {\n    var q = new pqueue_1.PriorityQueue(function (a, b) {\n      return a.d <= b.d;\n    }),\n        u = this.neighbours[start],\n        qu = new QueueEntry(u, null, 0),\n        visitedFrom = {};\n    q.push(qu);\n\n    while (!q.empty()) {\n      qu = q.pop();\n      u = qu.node;\n\n      if (u.id === end) {\n        break;\n      }\n\n      var i = u.neighbours.length;\n\n      while (i--) {\n        var neighbour = u.neighbours[i],\n            v = this.neighbours[neighbour.id];\n        if (qu.prev && v.id === qu.prev.node.id) continue;\n        var viduid = v.id + ',' + u.id;\n        if (viduid in visitedFrom && visitedFrom[viduid] <= qu.d) continue;\n        var cc = qu.prev ? prevCost(qu.prev.node.id, u.id, v.id) : 0,\n            t = qu.d + neighbour.distance + cc;\n        visitedFrom[viduid] = t;\n        q.push(new QueueEntry(v, qu, t));\n      }\n    }\n\n    var path = [];\n\n    while (qu.prev) {\n      qu = qu.prev;\n      path.push(qu.node.id);\n    }\n\n    return path;\n  };\n\n  Calculator.prototype.dijkstraNeighbours = function (start, dest) {\n    if (dest === void 0) {\n      dest = -1;\n    }\n\n    var q = new pqueue_1.PriorityQueue(function (a, b) {\n      return a.d <= b.d;\n    }),\n        i = this.neighbours.length,\n        d = new Array(i);\n\n    while (i--) {\n      var node = this.neighbours[i];\n      node.d = i === start ? 0 : Number.POSITIVE_INFINITY;\n      node.q = q.push(node);\n    }\n\n    while (!q.empty()) {\n      var u = q.pop();\n      d[u.id] = u.d;\n\n      if (u.id === dest) {\n        var path = [];\n        var v = u;\n\n        while (typeof v.prev !== 'undefined') {\n          path.push(v.prev.id);\n          v = v.prev;\n        }\n\n        return path;\n      }\n\n      i = u.neighbours.length;\n\n      while (i--) {\n        var neighbour = u.neighbours[i];\n        var v = this.neighbours[neighbour.id];\n        var t = u.d + neighbour.distance;\n\n        if (u.d !== Number.MAX_VALUE && v.d > t) {\n          v.d = t;\n          v.prev = u;\n          q.reduceKey(v.q, v, function (e, q) {\n            return e.q = q;\n          });\n        }\n      }\n    }\n\n    return d;\n  };\n\n  return Calculator;\n}();\n\nexports.Calculator = Calculator;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction unionCount(a, b) {\n  var u = {};\n\n  for (var i in a) {\n    u[i] = {};\n  }\n\n  for (var i in b) {\n    u[i] = {};\n  }\n\n  return Object.keys(u).length;\n}\n\nfunction intersectionCount(a, b) {\n  var n = 0;\n\n  for (var i in a) {\n    if (typeof b[i] !== 'undefined') ++n;\n  }\n\n  return n;\n}\n\nfunction getNeighbours(links, la) {\n  var neighbours = {};\n\n  var addNeighbours = function addNeighbours(u, v) {\n    if (typeof neighbours[u] === 'undefined') neighbours[u] = {};\n    neighbours[u][v] = {};\n  };\n\n  links.forEach(function (e) {\n    var u = la.getSourceIndex(e),\n        v = la.getTargetIndex(e);\n    addNeighbours(u, v);\n    addNeighbours(v, u);\n  });\n  return neighbours;\n}\n\nfunction computeLinkLengths(links, w, f, la) {\n  var neighbours = getNeighbours(links, la);\n  links.forEach(function (l) {\n    var a = neighbours[la.getSourceIndex(l)];\n    var b = neighbours[la.getTargetIndex(l)];\n    la.setLength(l, 1 + w * f(a, b));\n  });\n}\n\nfunction symmetricDiffLinkLengths(links, la, w) {\n  if (w === void 0) {\n    w = 1;\n  }\n\n  computeLinkLengths(links, w, function (a, b) {\n    return Math.sqrt(unionCount(a, b) - intersectionCount(a, b));\n  }, la);\n}\n\nexports.symmetricDiffLinkLengths = symmetricDiffLinkLengths;\n\nfunction jaccardLinkLengths(links, la, w) {\n  if (w === void 0) {\n    w = 1;\n  }\n\n  computeLinkLengths(links, w, function (a, b) {\n    return Math.min(Object.keys(a).length, Object.keys(b).length) < 1.1 ? 0 : intersectionCount(a, b) / unionCount(a, b);\n  }, la);\n}\n\nexports.jaccardLinkLengths = jaccardLinkLengths;\n\nfunction generateDirectedEdgeConstraints(n, links, axis, la) {\n  var components = stronglyConnectedComponents(n, links, la);\n  var nodes = {};\n  components.forEach(function (c, i) {\n    return c.forEach(function (v) {\n      return nodes[v] = i;\n    });\n  });\n  var constraints = [];\n  links.forEach(function (l) {\n    var ui = la.getSourceIndex(l),\n        vi = la.getTargetIndex(l),\n        u = nodes[ui],\n        v = nodes[vi];\n\n    if (u !== v) {\n      constraints.push({\n        axis: axis,\n        left: ui,\n        right: vi,\n        gap: la.getMinSeparation(l)\n      });\n    }\n  });\n  return constraints;\n}\n\nexports.generateDirectedEdgeConstraints = generateDirectedEdgeConstraints;\n\nfunction stronglyConnectedComponents(numVertices, edges, la) {\n  var nodes = [];\n  var index = 0;\n  var stack = [];\n  var components = [];\n\n  function strongConnect(v) {\n    v.index = v.lowlink = index++;\n    stack.push(v);\n    v.onStack = true;\n\n    for (var _i = 0, _a = v.out; _i < _a.length; _i++) {\n      var w = _a[_i];\n\n      if (typeof w.index === 'undefined') {\n        strongConnect(w);\n        v.lowlink = Math.min(v.lowlink, w.lowlink);\n      } else if (w.onStack) {\n        v.lowlink = Math.min(v.lowlink, w.index);\n      }\n    }\n\n    if (v.lowlink === v.index) {\n      var component = [];\n\n      while (stack.length) {\n        w = stack.pop();\n        w.onStack = false;\n        component.push(w);\n        if (w === v) break;\n      }\n\n      components.push(component.map(function (v) {\n        return v.id;\n      }));\n    }\n  }\n\n  for (var i = 0; i < numVertices; i++) {\n    nodes.push({\n      id: i,\n      out: []\n    });\n  }\n\n  for (var _i = 0, edges_1 = edges; _i < edges_1.length; _i++) {\n    var e = edges_1[_i];\n    var v_1 = nodes[la.getSourceIndex(e)],\n        w = nodes[la.getTargetIndex(e)];\n    v_1.out.push(w);\n  }\n\n  for (var _a = 0, nodes_1 = nodes; _a < nodes_1.length; _a++) {\n    var v = nodes_1[_a];\n    if (typeof v.index === 'undefined') strongConnect(v);\n  }\n\n  return components;\n}\n\nexports.stronglyConnectedComponents = stronglyConnectedComponents;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Locks = function () {\n  function Locks() {\n    this.locks = {};\n  }\n\n  Locks.prototype.add = function (id, x) {\n    this.locks[id] = x;\n  };\n\n  Locks.prototype.clear = function () {\n    this.locks = {};\n  };\n\n  Locks.prototype.isEmpty = function () {\n    for (var l in this.locks) {\n      return false;\n    }\n\n    return true;\n  };\n\n  Locks.prototype.apply = function (f) {\n    for (var l in this.locks) {\n      f(Number(l), this.locks[l]);\n    }\n  };\n\n  return Locks;\n}();\n\nexports.Locks = Locks;\n\nvar Descent = function () {\n  function Descent(x, D, G) {\n    if (G === void 0) {\n      G = null;\n    }\n\n    this.D = D;\n    this.G = G;\n    this.threshold = 0.0001;\n    this.numGridSnapNodes = 0;\n    this.snapGridSize = 100;\n    this.snapStrength = 1000;\n    this.scaleSnapByMaxH = false;\n    this.random = new PseudoRandom();\n    this.project = null;\n    this.x = x;\n    this.k = x.length;\n    var n = this.n = x[0].length;\n    this.H = new Array(this.k);\n    this.g = new Array(this.k);\n    this.Hd = new Array(this.k);\n    this.a = new Array(this.k);\n    this.b = new Array(this.k);\n    this.c = new Array(this.k);\n    this.d = new Array(this.k);\n    this.e = new Array(this.k);\n    this.ia = new Array(this.k);\n    this.ib = new Array(this.k);\n    this.xtmp = new Array(this.k);\n    this.locks = new Locks();\n    this.minD = Number.MAX_VALUE;\n    var i = n,\n        j;\n\n    while (i--) {\n      j = n;\n\n      while (--j > i) {\n        var d = D[i][j];\n\n        if (d > 0 && d < this.minD) {\n          this.minD = d;\n        }\n      }\n    }\n\n    if (this.minD === Number.MAX_VALUE) this.minD = 1;\n    i = this.k;\n\n    while (i--) {\n      this.g[i] = new Array(n);\n      this.H[i] = new Array(n);\n      j = n;\n\n      while (j--) {\n        this.H[i][j] = new Array(n);\n      }\n\n      this.Hd[i] = new Array(n);\n      this.a[i] = new Array(n);\n      this.b[i] = new Array(n);\n      this.c[i] = new Array(n);\n      this.d[i] = new Array(n);\n      this.e[i] = new Array(n);\n      this.ia[i] = new Array(n);\n      this.ib[i] = new Array(n);\n      this.xtmp[i] = new Array(n);\n    }\n  }\n\n  Descent.createSquareMatrix = function (n, f) {\n    var M = new Array(n);\n\n    for (var i = 0; i < n; ++i) {\n      M[i] = new Array(n);\n\n      for (var j = 0; j < n; ++j) {\n        M[i][j] = f(i, j);\n      }\n    }\n\n    return M;\n  };\n\n  Descent.prototype.offsetDir = function () {\n    var _this = this;\n\n    var u = new Array(this.k);\n    var l = 0;\n\n    for (var i = 0; i < this.k; ++i) {\n      var x = u[i] = this.random.getNextBetween(0.01, 1) - 0.5;\n      l += x * x;\n    }\n\n    l = Math.sqrt(l);\n    return u.map(function (x) {\n      return x *= _this.minD / l;\n    });\n  };\n\n  Descent.prototype.computeDerivatives = function (x) {\n    var _this = this;\n\n    var n = this.n;\n    if (n < 1) return;\n    var i;\n    var d = new Array(this.k);\n    var d2 = new Array(this.k);\n    var Huu = new Array(this.k);\n    var maxH = 0;\n\n    for (var u = 0; u < n; ++u) {\n      for (i = 0; i < this.k; ++i) {\n        Huu[i] = this.g[i][u] = 0;\n      }\n\n      for (var v = 0; v < n; ++v) {\n        if (u === v) continue;\n        var maxDisplaces = n;\n\n        while (maxDisplaces--) {\n          var sd2 = 0;\n\n          for (i = 0; i < this.k; ++i) {\n            var dx = d[i] = x[i][u] - x[i][v];\n            sd2 += d2[i] = dx * dx;\n          }\n\n          if (sd2 > 1e-9) break;\n          var rd = this.offsetDir();\n\n          for (i = 0; i < this.k; ++i) {\n            x[i][v] += rd[i];\n          }\n        }\n\n        var l = Math.sqrt(sd2);\n        var D = this.D[u][v];\n        var weight = this.G != null ? this.G[u][v] : 1;\n\n        if (weight > 1 && l > D || !isFinite(D)) {\n          for (i = 0; i < this.k; ++i) {\n            this.H[i][u][v] = 0;\n          }\n\n          continue;\n        }\n\n        if (weight > 1) {\n          weight = 1;\n        }\n\n        var D2 = D * D;\n        var gs = 2 * weight * (l - D) / (D2 * l);\n        var l3 = l * l * l;\n        var hs = 2 * -weight / (D2 * l3);\n        if (!isFinite(gs)) console.log(gs);\n\n        for (i = 0; i < this.k; ++i) {\n          this.g[i][u] += d[i] * gs;\n          Huu[i] -= this.H[i][u][v] = hs * (l3 + D * (d2[i] - sd2) + l * sd2);\n        }\n      }\n\n      for (i = 0; i < this.k; ++i) {\n        maxH = Math.max(maxH, this.H[i][u][u] = Huu[i]);\n      }\n    }\n\n    var r = this.snapGridSize / 2;\n    var g = this.snapGridSize;\n    var w = this.snapStrength;\n    var k = w / (r * r);\n    var numNodes = this.numGridSnapNodes;\n\n    for (var u = 0; u < numNodes; ++u) {\n      for (i = 0; i < this.k; ++i) {\n        var xiu = this.x[i][u];\n        var m = xiu / g;\n        var f = m % 1;\n        var q = m - f;\n        var a = Math.abs(f);\n        var dx = a <= 0.5 ? xiu - q * g : xiu > 0 ? xiu - (q + 1) * g : xiu - (q - 1) * g;\n\n        if (-r < dx && dx <= r) {\n          if (this.scaleSnapByMaxH) {\n            this.g[i][u] += maxH * k * dx;\n            this.H[i][u][u] += maxH * k;\n          } else {\n            this.g[i][u] += k * dx;\n            this.H[i][u][u] += k;\n          }\n        }\n      }\n    }\n\n    if (!this.locks.isEmpty()) {\n      this.locks.apply(function (u, p) {\n        for (i = 0; i < _this.k; ++i) {\n          _this.H[i][u][u] += maxH;\n          _this.g[i][u] -= maxH * (p[i] - x[i][u]);\n        }\n      });\n    }\n  };\n\n  Descent.dotProd = function (a, b) {\n    var x = 0,\n        i = a.length;\n\n    while (i--) {\n      x += a[i] * b[i];\n    }\n\n    return x;\n  };\n\n  Descent.rightMultiply = function (m, v, r) {\n    var i = m.length;\n\n    while (i--) {\n      r[i] = Descent.dotProd(m[i], v);\n    }\n  };\n\n  Descent.prototype.computeStepSize = function (d) {\n    var numerator = 0,\n        denominator = 0;\n\n    for (var i = 0; i < this.k; ++i) {\n      numerator += Descent.dotProd(this.g[i], d[i]);\n      Descent.rightMultiply(this.H[i], d[i], this.Hd[i]);\n      denominator += Descent.dotProd(d[i], this.Hd[i]);\n    }\n\n    if (denominator === 0 || !isFinite(denominator)) return 0;\n    return 1 * numerator / denominator;\n  };\n\n  Descent.prototype.reduceStress = function () {\n    this.computeDerivatives(this.x);\n    var alpha = this.computeStepSize(this.g);\n\n    for (var i = 0; i < this.k; ++i) {\n      this.takeDescentStep(this.x[i], this.g[i], alpha);\n    }\n\n    return this.computeStress();\n  };\n\n  Descent.copy = function (a, b) {\n    var m = a.length,\n        n = b[0].length;\n\n    for (var i = 0; i < m; ++i) {\n      for (var j = 0; j < n; ++j) {\n        b[i][j] = a[i][j];\n      }\n    }\n  };\n\n  Descent.prototype.stepAndProject = function (x0, r, d, stepSize) {\n    Descent.copy(x0, r);\n    this.takeDescentStep(r[0], d[0], stepSize);\n    if (this.project) this.project[0](x0[0], x0[1], r[0]);\n    this.takeDescentStep(r[1], d[1], stepSize);\n    if (this.project) this.project[1](r[0], x0[1], r[1]);\n\n    for (var i = 2; i < this.k; i++) {\n      this.takeDescentStep(r[i], d[i], stepSize);\n    }\n  };\n\n  Descent.mApply = function (m, n, f) {\n    var i = m;\n\n    while (i-- > 0) {\n      var j = n;\n\n      while (j-- > 0) {\n        f(i, j);\n      }\n    }\n  };\n\n  Descent.prototype.matrixApply = function (f) {\n    Descent.mApply(this.k, this.n, f);\n  };\n\n  Descent.prototype.computeNextPosition = function (x0, r) {\n    var _this = this;\n\n    this.computeDerivatives(x0);\n    var alpha = this.computeStepSize(this.g);\n    this.stepAndProject(x0, r, this.g, alpha);\n\n    if (this.project) {\n      this.matrixApply(function (i, j) {\n        return _this.e[i][j] = x0[i][j] - r[i][j];\n      });\n      var beta = this.computeStepSize(this.e);\n      beta = Math.max(0.2, Math.min(beta, 1));\n      this.stepAndProject(x0, r, this.e, beta);\n    }\n  };\n\n  Descent.prototype.run = function (iterations) {\n    var stress = Number.MAX_VALUE,\n        converged = false;\n\n    while (!converged && iterations-- > 0) {\n      var s = this.rungeKutta();\n      converged = Math.abs(stress / s - 1) < this.threshold;\n      stress = s;\n    }\n\n    return stress;\n  };\n\n  Descent.prototype.rungeKutta = function () {\n    var _this = this;\n\n    this.computeNextPosition(this.x, this.a);\n    Descent.mid(this.x, this.a, this.ia);\n    this.computeNextPosition(this.ia, this.b);\n    Descent.mid(this.x, this.b, this.ib);\n    this.computeNextPosition(this.ib, this.c);\n    this.computeNextPosition(this.c, this.d);\n    var disp = 0;\n    this.matrixApply(function (i, j) {\n      var x = (_this.a[i][j] + 2.0 * _this.b[i][j] + 2.0 * _this.c[i][j] + _this.d[i][j]) / 6.0,\n          d = _this.x[i][j] - x;\n      disp += d * d;\n      _this.x[i][j] = x;\n    });\n    return disp;\n  };\n\n  Descent.mid = function (a, b, m) {\n    Descent.mApply(a.length, a[0].length, function (i, j) {\n      return m[i][j] = a[i][j] + (b[i][j] - a[i][j]) / 2.0;\n    });\n  };\n\n  Descent.prototype.takeDescentStep = function (x, d, stepSize) {\n    for (var i = 0; i < this.n; ++i) {\n      x[i] = x[i] - stepSize * d[i];\n    }\n  };\n\n  Descent.prototype.computeStress = function () {\n    var stress = 0;\n\n    for (var u = 0, nMinus1 = this.n - 1; u < nMinus1; ++u) {\n      for (var v = u + 1, n = this.n; v < n; ++v) {\n        var l = 0;\n\n        for (var i = 0; i < this.k; ++i) {\n          var dx = this.x[i][u] - this.x[i][v];\n          l += dx * dx;\n        }\n\n        l = Math.sqrt(l);\n        var d = this.D[u][v];\n        if (!isFinite(d)) continue;\n        var rl = d - l;\n        var d2 = d * d;\n        stress += rl * rl / d2;\n      }\n    }\n\n    return stress;\n  };\n\n  Descent.zeroDistance = 1e-10;\n  return Descent;\n}();\n\nexports.Descent = Descent;\n\nvar PseudoRandom = function () {\n  function PseudoRandom(seed) {\n    if (seed === void 0) {\n      seed = 1;\n    }\n\n    this.seed = seed;\n    this.a = 214013;\n    this.c = 2531011;\n    this.m = 2147483648;\n    this.range = 32767;\n  }\n\n  PseudoRandom.prototype.getNext = function () {\n    this.seed = (this.seed * this.a + this.c) % this.m;\n    return (this.seed >> 16) / this.range;\n  };\n\n  PseudoRandom.prototype.getNextBetween = function (min, max) {\n    return min + this.getNext() * (max - min);\n  };\n\n  return PseudoRandom;\n}();\n\nexports.PseudoRandom = PseudoRandom;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PositionStats = function () {\n  function PositionStats(scale) {\n    this.scale = scale;\n    this.AB = 0;\n    this.AD = 0;\n    this.A2 = 0;\n  }\n\n  PositionStats.prototype.addVariable = function (v) {\n    var ai = this.scale / v.scale;\n    var bi = v.offset / v.scale;\n    var wi = v.weight;\n    this.AB += wi * ai * bi;\n    this.AD += wi * ai * v.desiredPosition;\n    this.A2 += wi * ai * ai;\n  };\n\n  PositionStats.prototype.getPosn = function () {\n    return (this.AD - this.AB) / this.A2;\n  };\n\n  return PositionStats;\n}();\n\nexports.PositionStats = PositionStats;\n\nvar Constraint = function () {\n  function Constraint(left, right, gap, equality) {\n    if (equality === void 0) {\n      equality = false;\n    }\n\n    this.left = left;\n    this.right = right;\n    this.gap = gap;\n    this.equality = equality;\n    this.active = false;\n    this.unsatisfiable = false;\n    this.left = left;\n    this.right = right;\n    this.gap = gap;\n    this.equality = equality;\n  }\n\n  Constraint.prototype.slack = function () {\n    return this.unsatisfiable ? Number.MAX_VALUE : this.right.scale * this.right.position() - this.gap - this.left.scale * this.left.position();\n  };\n\n  return Constraint;\n}();\n\nexports.Constraint = Constraint;\n\nvar Variable = function () {\n  function Variable(desiredPosition, weight, scale) {\n    if (weight === void 0) {\n      weight = 1;\n    }\n\n    if (scale === void 0) {\n      scale = 1;\n    }\n\n    this.desiredPosition = desiredPosition;\n    this.weight = weight;\n    this.scale = scale;\n    this.offset = 0;\n  }\n\n  Variable.prototype.dfdv = function () {\n    return 2.0 * this.weight * (this.position() - this.desiredPosition);\n  };\n\n  Variable.prototype.position = function () {\n    return (this.block.ps.scale * this.block.posn + this.offset) / this.scale;\n  };\n\n  Variable.prototype.visitNeighbours = function (prev, f) {\n    var ff = function ff(c, next) {\n      return c.active && prev !== next && f(c, next);\n    };\n\n    this.cOut.forEach(function (c) {\n      return ff(c, c.right);\n    });\n    this.cIn.forEach(function (c) {\n      return ff(c, c.left);\n    });\n  };\n\n  return Variable;\n}();\n\nexports.Variable = Variable;\n\nvar Block = function () {\n  function Block(v) {\n    this.vars = [];\n    v.offset = 0;\n    this.ps = new PositionStats(v.scale);\n    this.addVariable(v);\n  }\n\n  Block.prototype.addVariable = function (v) {\n    v.block = this;\n    this.vars.push(v);\n    this.ps.addVariable(v);\n    this.posn = this.ps.getPosn();\n  };\n\n  Block.prototype.updateWeightedPosition = function () {\n    this.ps.AB = this.ps.AD = this.ps.A2 = 0;\n\n    for (var i = 0, n = this.vars.length; i < n; ++i) {\n      this.ps.addVariable(this.vars[i]);\n    }\n\n    this.posn = this.ps.getPosn();\n  };\n\n  Block.prototype.compute_lm = function (v, u, postAction) {\n    var _this = this;\n\n    var dfdv = v.dfdv();\n    v.visitNeighbours(u, function (c, next) {\n      var _dfdv = _this.compute_lm(next, v, postAction);\n\n      if (next === c.right) {\n        dfdv += _dfdv * c.left.scale;\n        c.lm = _dfdv;\n      } else {\n        dfdv += _dfdv * c.right.scale;\n        c.lm = -_dfdv;\n      }\n\n      postAction(c);\n    });\n    return dfdv / v.scale;\n  };\n\n  Block.prototype.populateSplitBlock = function (v, prev) {\n    var _this = this;\n\n    v.visitNeighbours(prev, function (c, next) {\n      next.offset = v.offset + (next === c.right ? c.gap : -c.gap);\n\n      _this.addVariable(next);\n\n      _this.populateSplitBlock(next, v);\n    });\n  };\n\n  Block.prototype.traverse = function (visit, acc, v, prev) {\n    var _this = this;\n\n    if (v === void 0) {\n      v = this.vars[0];\n    }\n\n    if (prev === void 0) {\n      prev = null;\n    }\n\n    v.visitNeighbours(prev, function (c, next) {\n      acc.push(visit(c));\n\n      _this.traverse(visit, acc, next, v);\n    });\n  };\n\n  Block.prototype.findMinLM = function () {\n    var m = null;\n    this.compute_lm(this.vars[0], null, function (c) {\n      if (!c.equality && (m === null || c.lm < m.lm)) m = c;\n    });\n    return m;\n  };\n\n  Block.prototype.findMinLMBetween = function (lv, rv) {\n    this.compute_lm(lv, null, function () {});\n    var m = null;\n    this.findPath(lv, null, rv, function (c, next) {\n      if (!c.equality && c.right === next && (m === null || c.lm < m.lm)) m = c;\n    });\n    return m;\n  };\n\n  Block.prototype.findPath = function (v, prev, to, visit) {\n    var _this = this;\n\n    var endFound = false;\n    v.visitNeighbours(prev, function (c, next) {\n      if (!endFound && (next === to || _this.findPath(next, v, to, visit))) {\n        endFound = true;\n        visit(c, next);\n      }\n    });\n    return endFound;\n  };\n\n  Block.prototype.isActiveDirectedPathBetween = function (u, v) {\n    if (u === v) return true;\n    var i = u.cOut.length;\n\n    while (i--) {\n      var c = u.cOut[i];\n      if (c.active && this.isActiveDirectedPathBetween(c.right, v)) return true;\n    }\n\n    return false;\n  };\n\n  Block.split = function (c) {\n    c.active = false;\n    return [Block.createSplitBlock(c.left), Block.createSplitBlock(c.right)];\n  };\n\n  Block.createSplitBlock = function (startVar) {\n    var b = new Block(startVar);\n    b.populateSplitBlock(startVar, null);\n    return b;\n  };\n\n  Block.prototype.splitBetween = function (vl, vr) {\n    var c = this.findMinLMBetween(vl, vr);\n\n    if (c !== null) {\n      var bs = Block.split(c);\n      return {\n        constraint: c,\n        lb: bs[0],\n        rb: bs[1]\n      };\n    }\n\n    return null;\n  };\n\n  Block.prototype.mergeAcross = function (b, c, dist) {\n    c.active = true;\n\n    for (var i = 0, n = b.vars.length; i < n; ++i) {\n      var v = b.vars[i];\n      v.offset += dist;\n      this.addVariable(v);\n    }\n\n    this.posn = this.ps.getPosn();\n  };\n\n  Block.prototype.cost = function () {\n    var sum = 0,\n        i = this.vars.length;\n\n    while (i--) {\n      var v = this.vars[i],\n          d = v.position() - v.desiredPosition;\n      sum += d * d * v.weight;\n    }\n\n    return sum;\n  };\n\n  return Block;\n}();\n\nexports.Block = Block;\n\nvar Blocks = function () {\n  function Blocks(vs) {\n    this.vs = vs;\n    var n = vs.length;\n    this.list = new Array(n);\n\n    while (n--) {\n      var b = new Block(vs[n]);\n      this.list[n] = b;\n      b.blockInd = n;\n    }\n  }\n\n  Blocks.prototype.cost = function () {\n    var sum = 0,\n        i = this.list.length;\n\n    while (i--) {\n      sum += this.list[i].cost();\n    }\n\n    return sum;\n  };\n\n  Blocks.prototype.insert = function (b) {\n    b.blockInd = this.list.length;\n    this.list.push(b);\n  };\n\n  Blocks.prototype.remove = function (b) {\n    var last = this.list.length - 1;\n    var swapBlock = this.list[last];\n    this.list.length = last;\n\n    if (b !== swapBlock) {\n      this.list[b.blockInd] = swapBlock;\n      swapBlock.blockInd = b.blockInd;\n    }\n  };\n\n  Blocks.prototype.merge = function (c) {\n    var l = c.left.block,\n        r = c.right.block;\n    var dist = c.right.offset - c.left.offset - c.gap;\n\n    if (l.vars.length < r.vars.length) {\n      r.mergeAcross(l, c, dist);\n      this.remove(l);\n    } else {\n      l.mergeAcross(r, c, -dist);\n      this.remove(r);\n    }\n  };\n\n  Blocks.prototype.forEach = function (f) {\n    this.list.forEach(f);\n  };\n\n  Blocks.prototype.updateBlockPositions = function () {\n    this.list.forEach(function (b) {\n      return b.updateWeightedPosition();\n    });\n  };\n\n  Blocks.prototype.split = function (inactive) {\n    var _this = this;\n\n    this.updateBlockPositions();\n    this.list.forEach(function (b) {\n      var v = b.findMinLM();\n\n      if (v !== null && v.lm < Solver.LAGRANGIAN_TOLERANCE) {\n        b = v.left.block;\n        Block.split(v).forEach(function (nb) {\n          return _this.insert(nb);\n        });\n\n        _this.remove(b);\n\n        inactive.push(v);\n      }\n    });\n  };\n\n  return Blocks;\n}();\n\nexports.Blocks = Blocks;\n\nvar Solver = function () {\n  function Solver(vs, cs) {\n    this.vs = vs;\n    this.cs = cs;\n    this.vs = vs;\n    vs.forEach(function (v) {\n      v.cIn = [], v.cOut = [];\n    });\n    this.cs = cs;\n    cs.forEach(function (c) {\n      c.left.cOut.push(c);\n      c.right.cIn.push(c);\n    });\n    this.inactive = cs.map(function (c) {\n      c.active = false;\n      return c;\n    });\n    this.bs = null;\n  }\n\n  Solver.prototype.cost = function () {\n    return this.bs.cost();\n  };\n\n  Solver.prototype.setStartingPositions = function (ps) {\n    this.inactive = this.cs.map(function (c) {\n      c.active = false;\n      return c;\n    });\n    this.bs = new Blocks(this.vs);\n    this.bs.forEach(function (b, i) {\n      return b.posn = ps[i];\n    });\n  };\n\n  Solver.prototype.setDesiredPositions = function (ps) {\n    this.vs.forEach(function (v, i) {\n      return v.desiredPosition = ps[i];\n    });\n  };\n\n  Solver.prototype.mostViolated = function () {\n    var minSlack = Number.MAX_VALUE,\n        v = null,\n        l = this.inactive,\n        n = l.length,\n        deletePoint = n;\n\n    for (var i = 0; i < n; ++i) {\n      var c = l[i];\n      if (c.unsatisfiable) continue;\n      var slack = c.slack();\n\n      if (c.equality || slack < minSlack) {\n        minSlack = slack;\n        v = c;\n        deletePoint = i;\n        if (c.equality) break;\n      }\n    }\n\n    if (deletePoint !== n && (minSlack < Solver.ZERO_UPPERBOUND && !v.active || v.equality)) {\n      l[deletePoint] = l[n - 1];\n      l.length = n - 1;\n    }\n\n    return v;\n  };\n\n  Solver.prototype.satisfy = function () {\n    if (this.bs == null) {\n      this.bs = new Blocks(this.vs);\n    }\n\n    this.bs.split(this.inactive);\n    var v = null;\n\n    while ((v = this.mostViolated()) && (v.equality || v.slack() < Solver.ZERO_UPPERBOUND && !v.active)) {\n      var lb = v.left.block,\n          rb = v.right.block;\n\n      if (lb !== rb) {\n        this.bs.merge(v);\n      } else {\n        if (lb.isActiveDirectedPathBetween(v.right, v.left)) {\n          v.unsatisfiable = true;\n          continue;\n        }\n\n        var split = lb.splitBetween(v.left, v.right);\n\n        if (split !== null) {\n          this.bs.insert(split.lb);\n          this.bs.insert(split.rb);\n          this.bs.remove(lb);\n          this.inactive.push(split.constraint);\n        } else {\n          v.unsatisfiable = true;\n          continue;\n        }\n\n        if (v.slack() >= 0) {\n          this.inactive.push(v);\n        } else {\n          this.bs.merge(v);\n        }\n      }\n    }\n  };\n\n  Solver.prototype.solve = function () {\n    this.satisfy();\n    var lastcost = Number.MAX_VALUE,\n        cost = this.bs.cost();\n\n    while (Math.abs(lastcost - cost) > 0.0001) {\n      this.satisfy();\n      lastcost = cost;\n      cost = this.bs.cost();\n    }\n\n    return cost;\n  };\n\n  Solver.LAGRANGIAN_TOLERANCE = -1e-4;\n  Solver.ZERO_UPPERBOUND = -1e-10;\n  return Solver;\n}();\n\nexports.Solver = Solver;\n\nfunction removeOverlapInOneDimension(spans, lowerBound, upperBound) {\n  var vs = spans.map(function (s) {\n    return new Variable(s.desiredCenter);\n  });\n  var cs = [];\n  var n = spans.length;\n\n  for (var i = 0; i < n - 1; i++) {\n    var left = spans[i],\n        right = spans[i + 1];\n    cs.push(new Constraint(vs[i], vs[i + 1], (left.size + right.size) / 2));\n  }\n\n  var leftMost = vs[0],\n      rightMost = vs[n - 1],\n      leftMostSize = spans[0].size / 2,\n      rightMostSize = spans[n - 1].size / 2;\n  var vLower = null,\n      vUpper = null;\n\n  if (lowerBound) {\n    vLower = new Variable(lowerBound, leftMost.weight * 1000);\n    vs.push(vLower);\n    cs.push(new Constraint(vLower, leftMost, leftMostSize));\n  }\n\n  if (upperBound) {\n    vUpper = new Variable(upperBound, rightMost.weight * 1000);\n    vs.push(vUpper);\n    cs.push(new Constraint(rightMost, vUpper, rightMostSize));\n  }\n\n  var solver = new Solver(vs, cs);\n  solver.solve();\n  return {\n    newCenters: vs.slice(0, spans.length).map(function (v) {\n      return v.position();\n    }),\n    lowerBound: vLower ? vLower.position() : leftMost.position() - leftMostSize,\n    upperBound: vUpper ? vUpper.position() : rightMost.position() + rightMostSize\n  };\n}\n\nexports.removeOverlapInOneDimension = removeOverlapInOneDimension;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PowerEdge = function () {\n  function PowerEdge(source, target, type) {\n    this.source = source;\n    this.target = target;\n    this.type = type;\n  }\n\n  return PowerEdge;\n}();\n\nexports.PowerEdge = PowerEdge;\n\nvar Configuration = function () {\n  function Configuration(n, edges, linkAccessor, rootGroup) {\n    var _this = this;\n\n    this.linkAccessor = linkAccessor;\n    this.modules = new Array(n);\n    this.roots = [];\n\n    if (rootGroup) {\n      this.initModulesFromGroup(rootGroup);\n    } else {\n      this.roots.push(new ModuleSet());\n\n      for (var i = 0; i < n; ++i) {\n        this.roots[0].add(this.modules[i] = new Module(i));\n      }\n    }\n\n    this.R = edges.length;\n    edges.forEach(function (e) {\n      var s = _this.modules[linkAccessor.getSourceIndex(e)],\n          t = _this.modules[linkAccessor.getTargetIndex(e)],\n          type = linkAccessor.getType(e);\n\n      s.outgoing.add(type, t);\n      t.incoming.add(type, s);\n    });\n  }\n\n  Configuration.prototype.initModulesFromGroup = function (group) {\n    var moduleSet = new ModuleSet();\n    this.roots.push(moduleSet);\n\n    for (var i = 0; i < group.leaves.length; ++i) {\n      var node = group.leaves[i];\n      var module = new Module(node.id);\n      this.modules[node.id] = module;\n      moduleSet.add(module);\n    }\n\n    if (group.groups) {\n      for (var j = 0; j < group.groups.length; ++j) {\n        var child = group.groups[j];\n        var definition = {};\n\n        for (var prop in child) {\n          if (prop !== \"leaves\" && prop !== \"groups\" && child.hasOwnProperty(prop)) definition[prop] = child[prop];\n        }\n\n        moduleSet.add(new Module(-1 - j, new LinkSets(), new LinkSets(), this.initModulesFromGroup(child), definition));\n      }\n    }\n\n    return moduleSet;\n  };\n\n  Configuration.prototype.merge = function (a, b, k) {\n    if (k === void 0) {\n      k = 0;\n    }\n\n    var inInt = a.incoming.intersection(b.incoming),\n        outInt = a.outgoing.intersection(b.outgoing);\n    var children = new ModuleSet();\n    children.add(a);\n    children.add(b);\n    var m = new Module(this.modules.length, outInt, inInt, children);\n    this.modules.push(m);\n\n    var update = function update(s, i, o) {\n      s.forAll(function (ms, linktype) {\n        ms.forAll(function (n) {\n          var nls = n[i];\n          nls.add(linktype, m);\n          nls.remove(linktype, a);\n          nls.remove(linktype, b);\n          a[o].remove(linktype, n);\n          b[o].remove(linktype, n);\n        });\n      });\n    };\n\n    update(outInt, \"incoming\", \"outgoing\");\n    update(inInt, \"outgoing\", \"incoming\");\n    this.R -= inInt.count() + outInt.count();\n    this.roots[k].remove(a);\n    this.roots[k].remove(b);\n    this.roots[k].add(m);\n    return m;\n  };\n\n  Configuration.prototype.rootMerges = function (k) {\n    if (k === void 0) {\n      k = 0;\n    }\n\n    var rs = this.roots[k].modules();\n    var n = rs.length;\n    var merges = new Array(n * (n - 1));\n    var ctr = 0;\n\n    for (var i = 0, i_ = n - 1; i < i_; ++i) {\n      for (var j = i + 1; j < n; ++j) {\n        var a = rs[i],\n            b = rs[j];\n        merges[ctr] = {\n          id: ctr,\n          nEdges: this.nEdges(a, b),\n          a: a,\n          b: b\n        };\n        ctr++;\n      }\n    }\n\n    return merges;\n  };\n\n  Configuration.prototype.greedyMerge = function () {\n    for (var i = 0; i < this.roots.length; ++i) {\n      if (this.roots[i].modules().length < 2) continue;\n      var ms = this.rootMerges(i).sort(function (a, b) {\n        return a.nEdges == b.nEdges ? a.id - b.id : a.nEdges - b.nEdges;\n      });\n      var m = ms[0];\n      if (m.nEdges >= this.R) continue;\n      this.merge(m.a, m.b, i);\n      return true;\n    }\n  };\n\n  Configuration.prototype.nEdges = function (a, b) {\n    var inInt = a.incoming.intersection(b.incoming),\n        outInt = a.outgoing.intersection(b.outgoing);\n    return this.R - inInt.count() - outInt.count();\n  };\n\n  Configuration.prototype.getGroupHierarchy = function (retargetedEdges) {\n    var _this = this;\n\n    var groups = [];\n    var root = {};\n    toGroups(this.roots[0], root, groups);\n    var es = this.allEdges();\n    es.forEach(function (e) {\n      var a = _this.modules[e.source];\n      var b = _this.modules[e.target];\n      retargetedEdges.push(new PowerEdge(typeof a.gid === \"undefined\" ? e.source : groups[a.gid], typeof b.gid === \"undefined\" ? e.target : groups[b.gid], e.type));\n    });\n    return groups;\n  };\n\n  Configuration.prototype.allEdges = function () {\n    var es = [];\n    Configuration.getEdges(this.roots[0], es);\n    return es;\n  };\n\n  Configuration.getEdges = function (modules, es) {\n    modules.forAll(function (m) {\n      m.getEdges(es);\n      Configuration.getEdges(m.children, es);\n    });\n  };\n\n  return Configuration;\n}();\n\nexports.Configuration = Configuration;\n\nfunction toGroups(modules, group, groups) {\n  modules.forAll(function (m) {\n    if (m.isLeaf()) {\n      if (!group.leaves) group.leaves = [];\n      group.leaves.push(m.id);\n    } else {\n      var g = group;\n      m.gid = groups.length;\n\n      if (!m.isIsland() || m.isPredefined()) {\n        g = {\n          id: m.gid\n        };\n        if (m.isPredefined()) for (var prop in m.definition) {\n          g[prop] = m.definition[prop];\n        }\n        if (!group.groups) group.groups = [];\n        group.groups.push(m.gid);\n        groups.push(g);\n      }\n\n      toGroups(m.children, g, groups);\n    }\n  });\n}\n\nvar Module = function () {\n  function Module(id, outgoing, incoming, children, definition) {\n    if (outgoing === void 0) {\n      outgoing = new LinkSets();\n    }\n\n    if (incoming === void 0) {\n      incoming = new LinkSets();\n    }\n\n    if (children === void 0) {\n      children = new ModuleSet();\n    }\n\n    this.id = id;\n    this.outgoing = outgoing;\n    this.incoming = incoming;\n    this.children = children;\n    this.definition = definition;\n  }\n\n  Module.prototype.getEdges = function (es) {\n    var _this = this;\n\n    this.outgoing.forAll(function (ms, edgetype) {\n      ms.forAll(function (target) {\n        es.push(new PowerEdge(_this.id, target.id, edgetype));\n      });\n    });\n  };\n\n  Module.prototype.isLeaf = function () {\n    return this.children.count() === 0;\n  };\n\n  Module.prototype.isIsland = function () {\n    return this.outgoing.count() === 0 && this.incoming.count() === 0;\n  };\n\n  Module.prototype.isPredefined = function () {\n    return typeof this.definition !== \"undefined\";\n  };\n\n  return Module;\n}();\n\nexports.Module = Module;\n\nfunction intersection(m, n) {\n  var i = {};\n\n  for (var v in m) {\n    if (v in n) i[v] = m[v];\n  }\n\n  return i;\n}\n\nvar ModuleSet = function () {\n  function ModuleSet() {\n    this.table = {};\n  }\n\n  ModuleSet.prototype.count = function () {\n    return Object.keys(this.table).length;\n  };\n\n  ModuleSet.prototype.intersection = function (other) {\n    var result = new ModuleSet();\n    result.table = intersection(this.table, other.table);\n    return result;\n  };\n\n  ModuleSet.prototype.intersectionCount = function (other) {\n    return this.intersection(other).count();\n  };\n\n  ModuleSet.prototype.contains = function (id) {\n    return id in this.table;\n  };\n\n  ModuleSet.prototype.add = function (m) {\n    this.table[m.id] = m;\n  };\n\n  ModuleSet.prototype.remove = function (m) {\n    delete this.table[m.id];\n  };\n\n  ModuleSet.prototype.forAll = function (f) {\n    for (var mid in this.table) {\n      f(this.table[mid]);\n    }\n  };\n\n  ModuleSet.prototype.modules = function () {\n    var vs = [];\n    this.forAll(function (m) {\n      if (!m.isPredefined()) vs.push(m);\n    });\n    return vs;\n  };\n\n  return ModuleSet;\n}();\n\nexports.ModuleSet = ModuleSet;\n\nvar LinkSets = function () {\n  function LinkSets() {\n    this.sets = {};\n    this.n = 0;\n  }\n\n  LinkSets.prototype.count = function () {\n    return this.n;\n  };\n\n  LinkSets.prototype.contains = function (id) {\n    var result = false;\n    this.forAllModules(function (m) {\n      if (!result && m.id == id) {\n        result = true;\n      }\n    });\n    return result;\n  };\n\n  LinkSets.prototype.add = function (linktype, m) {\n    var s = linktype in this.sets ? this.sets[linktype] : this.sets[linktype] = new ModuleSet();\n    s.add(m);\n    ++this.n;\n  };\n\n  LinkSets.prototype.remove = function (linktype, m) {\n    var ms = this.sets[linktype];\n    ms.remove(m);\n\n    if (ms.count() === 0) {\n      delete this.sets[linktype];\n    }\n\n    --this.n;\n  };\n\n  LinkSets.prototype.forAll = function (f) {\n    for (var linktype in this.sets) {\n      f(this.sets[linktype], Number(linktype));\n    }\n  };\n\n  LinkSets.prototype.forAllModules = function (f) {\n    this.forAll(function (ms, lt) {\n      return ms.forAll(f);\n    });\n  };\n\n  LinkSets.prototype.intersection = function (other) {\n    var result = new LinkSets();\n    this.forAll(function (ms, lt) {\n      if (lt in other.sets) {\n        var i = ms.intersection(other.sets[lt]),\n            n = i.count();\n\n        if (n > 0) {\n          result.sets[lt] = i;\n          result.n += n;\n        }\n      }\n    });\n    return result;\n  };\n\n  return LinkSets;\n}();\n\nexports.LinkSets = LinkSets;\n\nfunction intersectionCount(m, n) {\n  return Object.keys(intersection(m, n)).length;\n}\n\nfunction getGroups(nodes, links, la, rootGroup) {\n  var n = nodes.length,\n      c = new Configuration(n, links, la, rootGroup);\n\n  while (c.greedyMerge()) {\n    ;\n  }\n\n  var powerEdges = [];\n  var g = c.getGroupHierarchy(powerEdges);\n  powerEdges.forEach(function (e) {\n    var f = function f(end) {\n      var g = e[end];\n      if (typeof g == \"number\") e[end] = nodes[g];\n    };\n\n    f(\"source\");\n    f(\"target\");\n  });\n  return {\n    groups: g,\n    powerEdges: powerEdges\n  };\n}\n\nexports.getGroups = getGroups;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar TreeBase = function () {\n  function TreeBase() {\n    this.findIter = function (data) {\n      var res = this._root;\n      var iter = this.iterator();\n\n      while (res !== null) {\n        var c = this._comparator(data, res.data);\n\n        if (c === 0) {\n          iter._cursor = res;\n          return iter;\n        } else {\n          iter._ancestors.push(res);\n\n          res = res.get_child(c > 0);\n        }\n      }\n\n      return null;\n    };\n  }\n\n  TreeBase.prototype.clear = function () {\n    this._root = null;\n    this.size = 0;\n  };\n\n  ;\n\n  TreeBase.prototype.find = function (data) {\n    var res = this._root;\n\n    while (res !== null) {\n      var c = this._comparator(data, res.data);\n\n      if (c === 0) {\n        return res.data;\n      } else {\n        res = res.get_child(c > 0);\n      }\n    }\n\n    return null;\n  };\n\n  ;\n\n  TreeBase.prototype.lowerBound = function (data) {\n    return this._bound(data, this._comparator);\n  };\n\n  ;\n\n  TreeBase.prototype.upperBound = function (data) {\n    var cmp = this._comparator;\n\n    function reverse_cmp(a, b) {\n      return cmp(b, a);\n    }\n\n    return this._bound(data, reverse_cmp);\n  };\n\n  ;\n\n  TreeBase.prototype.min = function () {\n    var res = this._root;\n\n    if (res === null) {\n      return null;\n    }\n\n    while (res.left !== null) {\n      res = res.left;\n    }\n\n    return res.data;\n  };\n\n  ;\n\n  TreeBase.prototype.max = function () {\n    var res = this._root;\n\n    if (res === null) {\n      return null;\n    }\n\n    while (res.right !== null) {\n      res = res.right;\n    }\n\n    return res.data;\n  };\n\n  ;\n\n  TreeBase.prototype.iterator = function () {\n    return new Iterator(this);\n  };\n\n  ;\n\n  TreeBase.prototype.each = function (cb) {\n    var it = this.iterator(),\n        data;\n\n    while ((data = it.next()) !== null) {\n      cb(data);\n    }\n  };\n\n  ;\n\n  TreeBase.prototype.reach = function (cb) {\n    var it = this.iterator(),\n        data;\n\n    while ((data = it.prev()) !== null) {\n      cb(data);\n    }\n  };\n\n  ;\n\n  TreeBase.prototype._bound = function (data, cmp) {\n    var cur = this._root;\n    var iter = this.iterator();\n\n    while (cur !== null) {\n      var c = this._comparator(data, cur.data);\n\n      if (c === 0) {\n        iter._cursor = cur;\n        return iter;\n      }\n\n      iter._ancestors.push(cur);\n\n      cur = cur.get_child(c > 0);\n    }\n\n    for (var i = iter._ancestors.length - 1; i >= 0; --i) {\n      cur = iter._ancestors[i];\n\n      if (cmp(data, cur.data) > 0) {\n        iter._cursor = cur;\n        iter._ancestors.length = i;\n        return iter;\n      }\n    }\n\n    iter._ancestors.length = 0;\n    return iter;\n  };\n\n  ;\n  return TreeBase;\n}();\n\nexports.TreeBase = TreeBase;\n\nvar Iterator = function () {\n  function Iterator(tree) {\n    this._tree = tree;\n    this._ancestors = [];\n    this._cursor = null;\n  }\n\n  Iterator.prototype.data = function () {\n    return this._cursor !== null ? this._cursor.data : null;\n  };\n\n  ;\n\n  Iterator.prototype.next = function () {\n    if (this._cursor === null) {\n      var root = this._tree._root;\n\n      if (root !== null) {\n        this._minNode(root);\n      }\n    } else {\n      if (this._cursor.right === null) {\n        var save;\n\n        do {\n          save = this._cursor;\n\n          if (this._ancestors.length) {\n            this._cursor = this._ancestors.pop();\n          } else {\n            this._cursor = null;\n            break;\n          }\n        } while (this._cursor.right === save);\n      } else {\n        this._ancestors.push(this._cursor);\n\n        this._minNode(this._cursor.right);\n      }\n    }\n\n    return this._cursor !== null ? this._cursor.data : null;\n  };\n\n  ;\n\n  Iterator.prototype.prev = function () {\n    if (this._cursor === null) {\n      var root = this._tree._root;\n\n      if (root !== null) {\n        this._maxNode(root);\n      }\n    } else {\n      if (this._cursor.left === null) {\n        var save;\n\n        do {\n          save = this._cursor;\n\n          if (this._ancestors.length) {\n            this._cursor = this._ancestors.pop();\n          } else {\n            this._cursor = null;\n            break;\n          }\n        } while (this._cursor.left === save);\n      } else {\n        this._ancestors.push(this._cursor);\n\n        this._maxNode(this._cursor.left);\n      }\n    }\n\n    return this._cursor !== null ? this._cursor.data : null;\n  };\n\n  ;\n\n  Iterator.prototype._minNode = function (start) {\n    while (start.left !== null) {\n      this._ancestors.push(start);\n\n      start = start.left;\n    }\n\n    this._cursor = start;\n  };\n\n  ;\n\n  Iterator.prototype._maxNode = function (start) {\n    while (start.right !== null) {\n      this._ancestors.push(start);\n\n      start = start.right;\n    }\n\n    this._cursor = start;\n  };\n\n  ;\n  return Iterator;\n}();\n\nexports.Iterator = Iterator;\n\nvar Node = function () {\n  function Node(data) {\n    this.data = data;\n    this.left = null;\n    this.right = null;\n    this.red = true;\n  }\n\n  Node.prototype.get_child = function (dir) {\n    return dir ? this.right : this.left;\n  };\n\n  ;\n\n  Node.prototype.set_child = function (dir, val) {\n    if (dir) {\n      this.right = val;\n    } else {\n      this.left = val;\n    }\n  };\n\n  ;\n  return Node;\n}();\n\nvar RBTree = function (_super) {\n  __extends(RBTree, _super);\n\n  function RBTree(comparator) {\n    var _this = _super.call(this) || this;\n\n    _this._root = null;\n    _this._comparator = comparator;\n    _this.size = 0;\n    return _this;\n  }\n\n  RBTree.prototype.insert = function (data) {\n    var ret = false;\n\n    if (this._root === null) {\n      this._root = new Node(data);\n      ret = true;\n      this.size++;\n    } else {\n      var head = new Node(undefined);\n      var dir = false;\n      var last = false;\n      var gp = null;\n      var ggp = head;\n      var p = null;\n      var node = this._root;\n      ggp.right = this._root;\n\n      while (true) {\n        if (node === null) {\n          node = new Node(data);\n          p.set_child(dir, node);\n          ret = true;\n          this.size++;\n        } else if (RBTree.is_red(node.left) && RBTree.is_red(node.right)) {\n          node.red = true;\n          node.left.red = false;\n          node.right.red = false;\n        }\n\n        if (RBTree.is_red(node) && RBTree.is_red(p)) {\n          var dir2 = ggp.right === gp;\n\n          if (node === p.get_child(last)) {\n            ggp.set_child(dir2, RBTree.single_rotate(gp, !last));\n          } else {\n            ggp.set_child(dir2, RBTree.double_rotate(gp, !last));\n          }\n        }\n\n        var cmp = this._comparator(node.data, data);\n\n        if (cmp === 0) {\n          break;\n        }\n\n        last = dir;\n        dir = cmp < 0;\n\n        if (gp !== null) {\n          ggp = gp;\n        }\n\n        gp = p;\n        p = node;\n        node = node.get_child(dir);\n      }\n\n      this._root = head.right;\n    }\n\n    this._root.red = false;\n    return ret;\n  };\n\n  ;\n\n  RBTree.prototype.remove = function (data) {\n    if (this._root === null) {\n      return false;\n    }\n\n    var head = new Node(undefined);\n    var node = head;\n    node.right = this._root;\n    var p = null;\n    var gp = null;\n    var found = null;\n    var dir = true;\n\n    while (node.get_child(dir) !== null) {\n      var last = dir;\n      gp = p;\n      p = node;\n      node = node.get_child(dir);\n\n      var cmp = this._comparator(data, node.data);\n\n      dir = cmp > 0;\n\n      if (cmp === 0) {\n        found = node;\n      }\n\n      if (!RBTree.is_red(node) && !RBTree.is_red(node.get_child(dir))) {\n        if (RBTree.is_red(node.get_child(!dir))) {\n          var sr = RBTree.single_rotate(node, dir);\n          p.set_child(last, sr);\n          p = sr;\n        } else if (!RBTree.is_red(node.get_child(!dir))) {\n          var sibling = p.get_child(!last);\n\n          if (sibling !== null) {\n            if (!RBTree.is_red(sibling.get_child(!last)) && !RBTree.is_red(sibling.get_child(last))) {\n              p.red = false;\n              sibling.red = true;\n              node.red = true;\n            } else {\n              var dir2 = gp.right === p;\n\n              if (RBTree.is_red(sibling.get_child(last))) {\n                gp.set_child(dir2, RBTree.double_rotate(p, last));\n              } else if (RBTree.is_red(sibling.get_child(!last))) {\n                gp.set_child(dir2, RBTree.single_rotate(p, last));\n              }\n\n              var gpc = gp.get_child(dir2);\n              gpc.red = true;\n              node.red = true;\n              gpc.left.red = false;\n              gpc.right.red = false;\n            }\n          }\n        }\n      }\n    }\n\n    if (found !== null) {\n      found.data = node.data;\n      p.set_child(p.right === node, node.get_child(node.left === null));\n      this.size--;\n    }\n\n    this._root = head.right;\n\n    if (this._root !== null) {\n      this._root.red = false;\n    }\n\n    return found !== null;\n  };\n\n  ;\n\n  RBTree.is_red = function (node) {\n    return node !== null && node.red;\n  };\n\n  RBTree.single_rotate = function (root, dir) {\n    var save = root.get_child(!dir);\n    root.set_child(!dir, save.get_child(dir));\n    save.set_child(dir, root);\n    root.red = true;\n    save.red = false;\n    return save;\n  };\n\n  RBTree.double_rotate = function (root, dir) {\n    root.set_child(!dir, RBTree.single_rotate(root.get_child(!dir), !dir));\n    return RBTree.single_rotate(root, dir);\n  };\n\n  return RBTree;\n}(TreeBase);\n\nexports.RBTree = RBTree;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PairingHeap = function () {\n  function PairingHeap(elem) {\n    this.elem = elem;\n    this.subheaps = [];\n  }\n\n  PairingHeap.prototype.toString = function (selector) {\n    var str = \"\",\n        needComma = false;\n\n    for (var i = 0; i < this.subheaps.length; ++i) {\n      var subheap = this.subheaps[i];\n\n      if (!subheap.elem) {\n        needComma = false;\n        continue;\n      }\n\n      if (needComma) {\n        str = str + \",\";\n      }\n\n      str = str + subheap.toString(selector);\n      needComma = true;\n    }\n\n    if (str !== \"\") {\n      str = \"(\" + str + \")\";\n    }\n\n    return (this.elem ? selector(this.elem) : \"\") + str;\n  };\n\n  PairingHeap.prototype.forEach = function (f) {\n    if (!this.empty()) {\n      f(this.elem, this);\n      this.subheaps.forEach(function (s) {\n        return s.forEach(f);\n      });\n    }\n  };\n\n  PairingHeap.prototype.count = function () {\n    return this.empty() ? 0 : 1 + this.subheaps.reduce(function (n, h) {\n      return n + h.count();\n    }, 0);\n  };\n\n  PairingHeap.prototype.min = function () {\n    return this.elem;\n  };\n\n  PairingHeap.prototype.empty = function () {\n    return this.elem == null;\n  };\n\n  PairingHeap.prototype.contains = function (h) {\n    if (this === h) return true;\n\n    for (var i = 0; i < this.subheaps.length; i++) {\n      if (this.subheaps[i].contains(h)) return true;\n    }\n\n    return false;\n  };\n\n  PairingHeap.prototype.isHeap = function (lessThan) {\n    var _this = this;\n\n    return this.subheaps.every(function (h) {\n      return lessThan(_this.elem, h.elem) && h.isHeap(lessThan);\n    });\n  };\n\n  PairingHeap.prototype.insert = function (obj, lessThan) {\n    return this.merge(new PairingHeap(obj), lessThan);\n  };\n\n  PairingHeap.prototype.merge = function (heap2, lessThan) {\n    if (this.empty()) return heap2;else if (heap2.empty()) return this;else if (lessThan(this.elem, heap2.elem)) {\n      this.subheaps.push(heap2);\n      return this;\n    } else {\n      heap2.subheaps.push(this);\n      return heap2;\n    }\n  };\n\n  PairingHeap.prototype.removeMin = function (lessThan) {\n    if (this.empty()) return null;else return this.mergePairs(lessThan);\n  };\n\n  PairingHeap.prototype.mergePairs = function (lessThan) {\n    if (this.subheaps.length == 0) return new PairingHeap(null);else if (this.subheaps.length == 1) {\n      return this.subheaps[0];\n    } else {\n      var firstPair = this.subheaps.pop().merge(this.subheaps.pop(), lessThan);\n      var remaining = this.mergePairs(lessThan);\n      return firstPair.merge(remaining, lessThan);\n    }\n  };\n\n  PairingHeap.prototype.decreaseKey = function (subheap, newValue, setHeapNode, lessThan) {\n    var newHeap = subheap.removeMin(lessThan);\n    subheap.elem = newHeap.elem;\n    subheap.subheaps = newHeap.subheaps;\n\n    if (setHeapNode !== null && newHeap.elem !== null) {\n      setHeapNode(subheap.elem, subheap);\n    }\n\n    var pairingNode = new PairingHeap(newValue);\n\n    if (setHeapNode !== null) {\n      setHeapNode(newValue, pairingNode);\n    }\n\n    return this.merge(pairingNode, lessThan);\n  };\n\n  return PairingHeap;\n}();\n\nexports.PairingHeap = PairingHeap;\n\nvar PriorityQueue = function () {\n  function PriorityQueue(lessThan) {\n    this.lessThan = lessThan;\n  }\n\n  PriorityQueue.prototype.top = function () {\n    if (this.empty()) {\n      return null;\n    }\n\n    return this.root.elem;\n  };\n\n  PriorityQueue.prototype.push = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    var pairingNode;\n\n    for (var i = 0, arg; arg = args[i]; ++i) {\n      pairingNode = new PairingHeap(arg);\n      this.root = this.empty() ? pairingNode : this.root.merge(pairingNode, this.lessThan);\n    }\n\n    return pairingNode;\n  };\n\n  PriorityQueue.prototype.empty = function () {\n    return !this.root || !this.root.elem;\n  };\n\n  PriorityQueue.prototype.isHeap = function () {\n    return this.root.isHeap(this.lessThan);\n  };\n\n  PriorityQueue.prototype.forEach = function (f) {\n    this.root.forEach(f);\n  };\n\n  PriorityQueue.prototype.pop = function () {\n    if (this.empty()) {\n      return null;\n    }\n\n    var obj = this.root.min();\n    this.root = this.root.removeMin(this.lessThan);\n    return obj;\n  };\n\n  PriorityQueue.prototype.reduceKey = function (heapNode, newKey, setHeapNode) {\n    if (setHeapNode === void 0) {\n      setHeapNode = null;\n    }\n\n    this.root = this.root.decreaseKey(heapNode, newKey, setHeapNode, this.lessThan);\n  };\n\n  PriorityQueue.prototype.toString = function (selector) {\n    return this.root.toString(selector);\n  };\n\n  PriorityQueue.prototype.count = function () {\n    return this.root.count();\n  };\n\n  return PriorityQueue;\n}();\n\nexports.PriorityQueue = PriorityQueue;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar rectangle_1 = require(\"./rectangle\");\n\nvar Point = function () {\n  function Point() {}\n\n  return Point;\n}();\n\nexports.Point = Point;\n\nvar LineSegment = function () {\n  function LineSegment(x1, y1, x2, y2) {\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n\n  return LineSegment;\n}();\n\nexports.LineSegment = LineSegment;\n\nvar PolyPoint = function (_super) {\n  __extends(PolyPoint, _super);\n\n  function PolyPoint() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return PolyPoint;\n}(Point);\n\nexports.PolyPoint = PolyPoint;\n\nfunction isLeft(P0, P1, P2) {\n  return (P1.x - P0.x) * (P2.y - P0.y) - (P2.x - P0.x) * (P1.y - P0.y);\n}\n\nexports.isLeft = isLeft;\n\nfunction above(p, vi, vj) {\n  return isLeft(p, vi, vj) > 0;\n}\n\nfunction below(p, vi, vj) {\n  return isLeft(p, vi, vj) < 0;\n}\n\nfunction ConvexHull(S) {\n  var P = S.slice(0).sort(function (a, b) {\n    return a.x !== b.x ? b.x - a.x : b.y - a.y;\n  });\n  var n = S.length,\n      i;\n  var minmin = 0;\n  var xmin = P[0].x;\n\n  for (i = 1; i < n; ++i) {\n    if (P[i].x !== xmin) break;\n  }\n\n  var minmax = i - 1;\n  var H = [];\n  H.push(P[minmin]);\n\n  if (minmax === n - 1) {\n    if (P[minmax].y !== P[minmin].y) H.push(P[minmax]);\n  } else {\n    var maxmin,\n        maxmax = n - 1;\n    var xmax = P[n - 1].x;\n\n    for (i = n - 2; i >= 0; i--) {\n      if (P[i].x !== xmax) break;\n    }\n\n    maxmin = i + 1;\n    i = minmax;\n\n    while (++i <= maxmin) {\n      if (isLeft(P[minmin], P[maxmin], P[i]) >= 0 && i < maxmin) continue;\n\n      while (H.length > 1) {\n        if (isLeft(H[H.length - 2], H[H.length - 1], P[i]) > 0) break;else H.length -= 1;\n      }\n\n      if (i != minmin) H.push(P[i]);\n    }\n\n    if (maxmax != maxmin) H.push(P[maxmax]);\n    var bot = H.length;\n    i = maxmin;\n\n    while (--i >= minmax) {\n      if (isLeft(P[maxmax], P[minmax], P[i]) >= 0 && i > minmax) continue;\n\n      while (H.length > bot) {\n        if (isLeft(H[H.length - 2], H[H.length - 1], P[i]) > 0) break;else H.length -= 1;\n      }\n\n      if (i != minmin) H.push(P[i]);\n    }\n  }\n\n  return H;\n}\n\nexports.ConvexHull = ConvexHull;\n\nfunction clockwiseRadialSweep(p, P, f) {\n  P.slice(0).sort(function (a, b) {\n    return Math.atan2(a.y - p.y, a.x - p.x) - Math.atan2(b.y - p.y, b.x - p.x);\n  }).forEach(f);\n}\n\nexports.clockwiseRadialSweep = clockwiseRadialSweep;\n\nfunction nextPolyPoint(p, ps) {\n  if (p.polyIndex === ps.length - 1) return ps[0];\n  return ps[p.polyIndex + 1];\n}\n\nfunction prevPolyPoint(p, ps) {\n  if (p.polyIndex === 0) return ps[ps.length - 1];\n  return ps[p.polyIndex - 1];\n}\n\nfunction tangent_PointPolyC(P, V) {\n  var Vclosed = V.slice(0);\n  Vclosed.push(V[0]);\n  return {\n    rtan: Rtangent_PointPolyC(P, Vclosed),\n    ltan: Ltangent_PointPolyC(P, Vclosed)\n  };\n}\n\nfunction Rtangent_PointPolyC(P, V) {\n  var n = V.length - 1;\n  var a, b, c;\n  var upA, dnC;\n  if (below(P, V[1], V[0]) && !above(P, V[n - 1], V[0])) return 0;\n\n  for (a = 0, b = n;;) {\n    if (b - a === 1) if (above(P, V[a], V[b])) return a;else return b;\n    c = Math.floor((a + b) / 2);\n    dnC = below(P, V[c + 1], V[c]);\n    if (dnC && !above(P, V[c - 1], V[c])) return c;\n    upA = above(P, V[a + 1], V[a]);\n\n    if (upA) {\n      if (dnC) b = c;else {\n        if (above(P, V[a], V[c])) b = c;else a = c;\n      }\n    } else {\n      if (!dnC) a = c;else {\n        if (below(P, V[a], V[c])) b = c;else a = c;\n      }\n    }\n  }\n}\n\nfunction Ltangent_PointPolyC(P, V) {\n  var n = V.length - 1;\n  var a, b, c;\n  var dnA, dnC;\n  if (above(P, V[n - 1], V[0]) && !below(P, V[1], V[0])) return 0;\n\n  for (a = 0, b = n;;) {\n    if (b - a === 1) if (below(P, V[a], V[b])) return a;else return b;\n    c = Math.floor((a + b) / 2);\n    dnC = below(P, V[c + 1], V[c]);\n    if (above(P, V[c - 1], V[c]) && !dnC) return c;\n    dnA = below(P, V[a + 1], V[a]);\n\n    if (dnA) {\n      if (!dnC) b = c;else {\n        if (below(P, V[a], V[c])) b = c;else a = c;\n      }\n    } else {\n      if (dnC) a = c;else {\n        if (above(P, V[a], V[c])) b = c;else a = c;\n      }\n    }\n  }\n}\n\nfunction tangent_PolyPolyC(V, W, t1, t2, cmp1, cmp2) {\n  var ix1, ix2;\n  ix1 = t1(W[0], V);\n  ix2 = t2(V[ix1], W);\n  var done = false;\n\n  while (!done) {\n    done = true;\n\n    while (true) {\n      if (ix1 === V.length - 1) ix1 = 0;\n      if (cmp1(W[ix2], V[ix1], V[ix1 + 1])) break;\n      ++ix1;\n    }\n\n    while (true) {\n      if (ix2 === 0) ix2 = W.length - 1;\n      if (cmp2(V[ix1], W[ix2], W[ix2 - 1])) break;\n      --ix2;\n      done = false;\n    }\n  }\n\n  return {\n    t1: ix1,\n    t2: ix2\n  };\n}\n\nexports.tangent_PolyPolyC = tangent_PolyPolyC;\n\nfunction LRtangent_PolyPolyC(V, W) {\n  var rl = RLtangent_PolyPolyC(W, V);\n  return {\n    t1: rl.t2,\n    t2: rl.t1\n  };\n}\n\nexports.LRtangent_PolyPolyC = LRtangent_PolyPolyC;\n\nfunction RLtangent_PolyPolyC(V, W) {\n  return tangent_PolyPolyC(V, W, Rtangent_PointPolyC, Ltangent_PointPolyC, above, below);\n}\n\nexports.RLtangent_PolyPolyC = RLtangent_PolyPolyC;\n\nfunction LLtangent_PolyPolyC(V, W) {\n  return tangent_PolyPolyC(V, W, Ltangent_PointPolyC, Ltangent_PointPolyC, below, below);\n}\n\nexports.LLtangent_PolyPolyC = LLtangent_PolyPolyC;\n\nfunction RRtangent_PolyPolyC(V, W) {\n  return tangent_PolyPolyC(V, W, Rtangent_PointPolyC, Rtangent_PointPolyC, above, above);\n}\n\nexports.RRtangent_PolyPolyC = RRtangent_PolyPolyC;\n\nvar BiTangent = function () {\n  function BiTangent(t1, t2) {\n    this.t1 = t1;\n    this.t2 = t2;\n  }\n\n  return BiTangent;\n}();\n\nexports.BiTangent = BiTangent;\n\nvar BiTangents = function () {\n  function BiTangents() {}\n\n  return BiTangents;\n}();\n\nexports.BiTangents = BiTangents;\n\nvar TVGPoint = function (_super) {\n  __extends(TVGPoint, _super);\n\n  function TVGPoint() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return TVGPoint;\n}(Point);\n\nexports.TVGPoint = TVGPoint;\n\nvar VisibilityVertex = function () {\n  function VisibilityVertex(id, polyid, polyvertid, p) {\n    this.id = id;\n    this.polyid = polyid;\n    this.polyvertid = polyvertid;\n    this.p = p;\n    p.vv = this;\n  }\n\n  return VisibilityVertex;\n}();\n\nexports.VisibilityVertex = VisibilityVertex;\n\nvar VisibilityEdge = function () {\n  function VisibilityEdge(source, target) {\n    this.source = source;\n    this.target = target;\n  }\n\n  VisibilityEdge.prototype.length = function () {\n    var dx = this.source.p.x - this.target.p.x;\n    var dy = this.source.p.y - this.target.p.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  return VisibilityEdge;\n}();\n\nexports.VisibilityEdge = VisibilityEdge;\n\nvar TangentVisibilityGraph = function () {\n  function TangentVisibilityGraph(P, g0) {\n    this.P = P;\n    this.V = [];\n    this.E = [];\n\n    if (!g0) {\n      var n = P.length;\n\n      for (var i = 0; i < n; i++) {\n        var p = P[i];\n\n        for (var j = 0; j < p.length; ++j) {\n          var pj = p[j],\n              vv = new VisibilityVertex(this.V.length, i, j, pj);\n          this.V.push(vv);\n          if (j > 0) this.E.push(new VisibilityEdge(p[j - 1].vv, vv));\n        }\n\n        if (p.length > 1) this.E.push(new VisibilityEdge(p[0].vv, p[p.length - 1].vv));\n      }\n\n      for (var i = 0; i < n - 1; i++) {\n        var Pi = P[i];\n\n        for (var j = i + 1; j < n; j++) {\n          var Pj = P[j],\n              t = tangents(Pi, Pj);\n\n          for (var q in t) {\n            var c = t[q],\n                source = Pi[c.t1],\n                target = Pj[c.t2];\n            this.addEdgeIfVisible(source, target, i, j);\n          }\n        }\n      }\n    } else {\n      this.V = g0.V.slice(0);\n      this.E = g0.E.slice(0);\n    }\n  }\n\n  TangentVisibilityGraph.prototype.addEdgeIfVisible = function (u, v, i1, i2) {\n    if (!this.intersectsPolys(new LineSegment(u.x, u.y, v.x, v.y), i1, i2)) {\n      this.E.push(new VisibilityEdge(u.vv, v.vv));\n    }\n  };\n\n  TangentVisibilityGraph.prototype.addPoint = function (p, i1) {\n    var n = this.P.length;\n    this.V.push(new VisibilityVertex(this.V.length, n, 0, p));\n\n    for (var i = 0; i < n; ++i) {\n      if (i === i1) continue;\n      var poly = this.P[i],\n          t = tangent_PointPolyC(p, poly);\n      this.addEdgeIfVisible(p, poly[t.ltan], i1, i);\n      this.addEdgeIfVisible(p, poly[t.rtan], i1, i);\n    }\n\n    return p.vv;\n  };\n\n  TangentVisibilityGraph.prototype.intersectsPolys = function (l, i1, i2) {\n    for (var i = 0, n = this.P.length; i < n; ++i) {\n      if (i != i1 && i != i2 && intersects(l, this.P[i]).length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  return TangentVisibilityGraph;\n}();\n\nexports.TangentVisibilityGraph = TangentVisibilityGraph;\n\nfunction intersects(l, P) {\n  var ints = [];\n\n  for (var i = 1, n = P.length; i < n; ++i) {\n    var int = rectangle_1.Rectangle.lineIntersection(l.x1, l.y1, l.x2, l.y2, P[i - 1].x, P[i - 1].y, P[i].x, P[i].y);\n    if (int) ints.push(int);\n  }\n\n  return ints;\n}\n\nfunction tangents(V, W) {\n  var m = V.length - 1,\n      n = W.length - 1;\n  var bt = new BiTangents();\n\n  for (var i = 0; i < m; ++i) {\n    for (var j = 0; j < n; ++j) {\n      var v1 = V[i == 0 ? m - 1 : i - 1];\n      var v2 = V[i];\n      var v3 = V[i + 1];\n      var w1 = W[j == 0 ? n - 1 : j - 1];\n      var w2 = W[j];\n      var w3 = W[j + 1];\n      var v1v2w2 = isLeft(v1, v2, w2);\n      var v2w1w2 = isLeft(v2, w1, w2);\n      var v2w2w3 = isLeft(v2, w2, w3);\n      var w1w2v2 = isLeft(w1, w2, v2);\n      var w2v1v2 = isLeft(w2, v1, v2);\n      var w2v2v3 = isLeft(w2, v2, v3);\n\n      if (v1v2w2 >= 0 && v2w1w2 >= 0 && v2w2w3 < 0 && w1w2v2 >= 0 && w2v1v2 >= 0 && w2v2v3 < 0) {\n        bt.ll = new BiTangent(i, j);\n      } else if (v1v2w2 <= 0 && v2w1w2 <= 0 && v2w2w3 > 0 && w1w2v2 <= 0 && w2v1v2 <= 0 && w2v2v3 > 0) {\n        bt.rr = new BiTangent(i, j);\n      } else if (v1v2w2 <= 0 && v2w1w2 > 0 && v2w2w3 <= 0 && w1w2v2 >= 0 && w2v1v2 < 0 && w2v2v3 >= 0) {\n        bt.rl = new BiTangent(i, j);\n      } else if (v1v2w2 >= 0 && v2w1w2 < 0 && v2w2w3 >= 0 && w1w2v2 <= 0 && w2v1v2 > 0 && w2v2v3 <= 0) {\n        bt.lr = new BiTangent(i, j);\n      }\n    }\n  }\n\n  return bt;\n}\n\nexports.tangents = tangents;\n\nfunction isPointInsidePoly(p, poly) {\n  for (var i = 1, n = poly.length; i < n; ++i) {\n    if (below(poly[i - 1], poly[i], p)) return false;\n  }\n\n  return true;\n}\n\nfunction isAnyPInQ(p, q) {\n  return !p.every(function (v) {\n    return !isPointInsidePoly(v, q);\n  });\n}\n\nfunction polysOverlap(p, q) {\n  if (isAnyPInQ(p, q)) return true;\n  if (isAnyPInQ(q, p)) return true;\n\n  for (var i = 1, n = p.length; i < n; ++i) {\n    var v = p[i],\n        u = p[i - 1];\n    if (intersects(new LineSegment(u.x, u.y, v.x, v.y), q).length > 0) return true;\n  }\n\n  return false;\n}\n\nexports.polysOverlap = polysOverlap;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar packingOptions = {\n  PADDING: 10,\n  GOLDEN_SECTION: (1 + Math.sqrt(5)) / 2,\n  FLOAT_EPSILON: 0.0001,\n  MAX_INERATIONS: 100\n};\n\nfunction applyPacking(graphs, w, h, node_size, desired_ratio, centerGraph) {\n  if (desired_ratio === void 0) {\n    desired_ratio = 1;\n  }\n\n  if (centerGraph === void 0) {\n    centerGraph = true;\n  }\n\n  var init_x = 0,\n      init_y = 0,\n      svg_width = w,\n      svg_height = h,\n      desired_ratio = typeof desired_ratio !== 'undefined' ? desired_ratio : 1,\n      node_size = typeof node_size !== 'undefined' ? node_size : 0,\n      real_width = 0,\n      real_height = 0,\n      min_width = 0,\n      global_bottom = 0,\n      line = [];\n  if (graphs.length == 0) return;\n  calculate_bb(graphs);\n  apply(graphs, desired_ratio);\n\n  if (centerGraph) {\n    put_nodes_to_right_positions(graphs);\n  }\n\n  function calculate_bb(graphs) {\n    graphs.forEach(function (g) {\n      calculate_single_bb(g);\n    });\n\n    function calculate_single_bb(graph) {\n      var min_x = Number.MAX_VALUE,\n          min_y = Number.MAX_VALUE,\n          max_x = 0,\n          max_y = 0;\n      graph.array.forEach(function (v) {\n        var w = typeof v.width !== 'undefined' ? v.width : node_size;\n        var h = typeof v.height !== 'undefined' ? v.height : node_size;\n        w /= 2;\n        h /= 2;\n        max_x = Math.max(v.x + w, max_x);\n        min_x = Math.min(v.x - w, min_x);\n        max_y = Math.max(v.y + h, max_y);\n        min_y = Math.min(v.y - h, min_y);\n      });\n      graph.width = max_x - min_x;\n      graph.height = max_y - min_y;\n    }\n  }\n\n  function put_nodes_to_right_positions(graphs) {\n    graphs.forEach(function (g) {\n      var center = {\n        x: 0,\n        y: 0\n      };\n      g.array.forEach(function (node) {\n        center.x += node.x;\n        center.y += node.y;\n      });\n      center.x /= g.array.length;\n      center.y /= g.array.length;\n      var corner = {\n        x: center.x - g.width / 2,\n        y: center.y - g.height / 2\n      };\n      var offset = {\n        x: g.x - corner.x + svg_width / 2 - real_width / 2,\n        y: g.y - corner.y + svg_height / 2 - real_height / 2\n      };\n      g.array.forEach(function (node) {\n        node.x += offset.x;\n        node.y += offset.y;\n      });\n    });\n  }\n\n  function apply(data, desired_ratio) {\n    var curr_best_f = Number.POSITIVE_INFINITY;\n    var curr_best = 0;\n    data.sort(function (a, b) {\n      return b.height - a.height;\n    });\n    min_width = data.reduce(function (a, b) {\n      return a.width < b.width ? a.width : b.width;\n    });\n    var left = x1 = min_width;\n    var right = x2 = get_entire_width(data);\n    var iterationCounter = 0;\n    var f_x1 = Number.MAX_VALUE;\n    var f_x2 = Number.MAX_VALUE;\n    var flag = -1;\n    var dx = Number.MAX_VALUE;\n    var df = Number.MAX_VALUE;\n\n    while (dx > min_width || df > packingOptions.FLOAT_EPSILON) {\n      if (flag != 1) {\n        var x1 = right - (right - left) / packingOptions.GOLDEN_SECTION;\n        var f_x1 = step(data, x1);\n      }\n\n      if (flag != 0) {\n        var x2 = left + (right - left) / packingOptions.GOLDEN_SECTION;\n        var f_x2 = step(data, x2);\n      }\n\n      dx = Math.abs(x1 - x2);\n      df = Math.abs(f_x1 - f_x2);\n\n      if (f_x1 < curr_best_f) {\n        curr_best_f = f_x1;\n        curr_best = x1;\n      }\n\n      if (f_x2 < curr_best_f) {\n        curr_best_f = f_x2;\n        curr_best = x2;\n      }\n\n      if (f_x1 > f_x2) {\n        left = x1;\n        x1 = x2;\n        f_x1 = f_x2;\n        flag = 1;\n      } else {\n        right = x2;\n        x2 = x1;\n        f_x2 = f_x1;\n        flag = 0;\n      }\n\n      if (iterationCounter++ > 100) {\n        break;\n      }\n    }\n\n    step(data, curr_best);\n  }\n\n  function step(data, max_width) {\n    line = [];\n    real_width = 0;\n    real_height = 0;\n    global_bottom = init_y;\n\n    for (var i = 0; i < data.length; i++) {\n      var o = data[i];\n      put_rect(o, max_width);\n    }\n\n    return Math.abs(get_real_ratio() - desired_ratio);\n  }\n\n  function put_rect(rect, max_width) {\n    var parent = undefined;\n\n    for (var i = 0; i < line.length; i++) {\n      if (line[i].space_left >= rect.height && line[i].x + line[i].width + rect.width + packingOptions.PADDING - max_width <= packingOptions.FLOAT_EPSILON) {\n        parent = line[i];\n        break;\n      }\n    }\n\n    line.push(rect);\n\n    if (parent !== undefined) {\n      rect.x = parent.x + parent.width + packingOptions.PADDING;\n      rect.y = parent.bottom;\n      rect.space_left = rect.height;\n      rect.bottom = rect.y;\n      parent.space_left -= rect.height + packingOptions.PADDING;\n      parent.bottom += rect.height + packingOptions.PADDING;\n    } else {\n      rect.y = global_bottom;\n      global_bottom += rect.height + packingOptions.PADDING;\n      rect.x = init_x;\n      rect.bottom = rect.y;\n      rect.space_left = rect.height;\n    }\n\n    if (rect.y + rect.height - real_height > -packingOptions.FLOAT_EPSILON) real_height = rect.y + rect.height - init_y;\n    if (rect.x + rect.width - real_width > -packingOptions.FLOAT_EPSILON) real_width = rect.x + rect.width - init_x;\n  }\n\n  ;\n\n  function get_entire_width(data) {\n    var width = 0;\n    data.forEach(function (d) {\n      return width += d.width + packingOptions.PADDING;\n    });\n    return width;\n  }\n\n  function get_real_ratio() {\n    return real_width / real_height;\n  }\n}\n\nexports.applyPacking = applyPacking;\n\nfunction separateGraphs(nodes, links) {\n  var marks = {};\n  var ways = {};\n  var graphs = [];\n  var clusters = 0;\n\n  for (var i = 0; i < links.length; i++) {\n    var link = links[i];\n    var n1 = link.source;\n    var n2 = link.target;\n    if (ways[n1.index]) ways[n1.index].push(n2);else ways[n1.index] = [n2];\n    if (ways[n2.index]) ways[n2.index].push(n1);else ways[n2.index] = [n1];\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    var node = nodes[i];\n    if (marks[node.index]) continue;\n    explore_node(node, true);\n  }\n\n  function explore_node(n, is_new) {\n    if (marks[n.index] !== undefined) return;\n\n    if (is_new) {\n      clusters++;\n      graphs.push({\n        array: []\n      });\n    }\n\n    marks[n.index] = clusters;\n    graphs[clusters - 1].array.push(n);\n    var adjacent = ways[n.index];\n    if (!adjacent) return;\n\n    for (var j = 0; j < adjacent.length; j++) {\n      explore_node(adjacent[j], false);\n    }\n  }\n\n  return graphs;\n}\n\nexports.separateGraphs = separateGraphs;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar rectangle_1 = require(\"./rectangle\");\n\nvar vpsc_1 = require(\"./vpsc\");\n\nvar shortestpaths_1 = require(\"./shortestpaths\");\n\nvar NodeWrapper = function () {\n  function NodeWrapper(id, rect, children) {\n    this.id = id;\n    this.rect = rect;\n    this.children = children;\n    this.leaf = typeof children === 'undefined' || children.length === 0;\n  }\n\n  return NodeWrapper;\n}();\n\nexports.NodeWrapper = NodeWrapper;\n\nvar Vert = function () {\n  function Vert(id, x, y, node, line) {\n    if (node === void 0) {\n      node = null;\n    }\n\n    if (line === void 0) {\n      line = null;\n    }\n\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.node = node;\n    this.line = line;\n  }\n\n  return Vert;\n}();\n\nexports.Vert = Vert;\n\nvar LongestCommonSubsequence = function () {\n  function LongestCommonSubsequence(s, t) {\n    this.s = s;\n    this.t = t;\n    var mf = LongestCommonSubsequence.findMatch(s, t);\n    var tr = t.slice(0).reverse();\n    var mr = LongestCommonSubsequence.findMatch(s, tr);\n\n    if (mf.length >= mr.length) {\n      this.length = mf.length;\n      this.si = mf.si;\n      this.ti = mf.ti;\n      this.reversed = false;\n    } else {\n      this.length = mr.length;\n      this.si = mr.si;\n      this.ti = t.length - mr.ti - mr.length;\n      this.reversed = true;\n    }\n  }\n\n  LongestCommonSubsequence.findMatch = function (s, t) {\n    var m = s.length;\n    var n = t.length;\n    var match = {\n      length: 0,\n      si: -1,\n      ti: -1\n    };\n    var l = new Array(m);\n\n    for (var i = 0; i < m; i++) {\n      l[i] = new Array(n);\n\n      for (var j = 0; j < n; j++) {\n        if (s[i] === t[j]) {\n          var v = l[i][j] = i === 0 || j === 0 ? 1 : l[i - 1][j - 1] + 1;\n\n          if (v > match.length) {\n            match.length = v;\n            match.si = i - v + 1;\n            match.ti = j - v + 1;\n          }\n\n          ;\n        } else l[i][j] = 0;\n      }\n    }\n\n    return match;\n  };\n\n  LongestCommonSubsequence.prototype.getSequence = function () {\n    return this.length >= 0 ? this.s.slice(this.si, this.si + this.length) : [];\n  };\n\n  return LongestCommonSubsequence;\n}();\n\nexports.LongestCommonSubsequence = LongestCommonSubsequence;\n\nvar GridRouter = function () {\n  function GridRouter(originalnodes, accessor, groupPadding) {\n    var _this = this;\n\n    if (groupPadding === void 0) {\n      groupPadding = 12;\n    }\n\n    this.originalnodes = originalnodes;\n    this.groupPadding = groupPadding;\n    this.leaves = null;\n    this.nodes = originalnodes.map(function (v, i) {\n      return new NodeWrapper(i, accessor.getBounds(v), accessor.getChildren(v));\n    });\n    this.leaves = this.nodes.filter(function (v) {\n      return v.leaf;\n    });\n    this.groups = this.nodes.filter(function (g) {\n      return !g.leaf;\n    });\n    this.cols = this.getGridLines('x');\n    this.rows = this.getGridLines('y');\n    this.groups.forEach(function (v) {\n      return v.children.forEach(function (c) {\n        return _this.nodes[c].parent = v;\n      });\n    });\n    this.root = {\n      children: []\n    };\n    this.nodes.forEach(function (v) {\n      if (typeof v.parent === 'undefined') {\n        v.parent = _this.root;\n\n        _this.root.children.push(v.id);\n      }\n\n      v.ports = [];\n    });\n    this.backToFront = this.nodes.slice(0);\n    this.backToFront.sort(function (x, y) {\n      return _this.getDepth(x) - _this.getDepth(y);\n    });\n    var frontToBackGroups = this.backToFront.slice(0).reverse().filter(function (g) {\n      return !g.leaf;\n    });\n    frontToBackGroups.forEach(function (v) {\n      var r = rectangle_1.Rectangle.empty();\n      v.children.forEach(function (c) {\n        return r = r.union(_this.nodes[c].rect);\n      });\n      v.rect = r.inflate(_this.groupPadding);\n    });\n    var colMids = this.midPoints(this.cols.map(function (r) {\n      return r.pos;\n    }));\n    var rowMids = this.midPoints(this.rows.map(function (r) {\n      return r.pos;\n    }));\n    var rowx = colMids[0],\n        rowX = colMids[colMids.length - 1];\n    var coly = rowMids[0],\n        colY = rowMids[rowMids.length - 1];\n    var hlines = this.rows.map(function (r) {\n      return {\n        x1: rowx,\n        x2: rowX,\n        y1: r.pos,\n        y2: r.pos\n      };\n    }).concat(rowMids.map(function (m) {\n      return {\n        x1: rowx,\n        x2: rowX,\n        y1: m,\n        y2: m\n      };\n    }));\n    var vlines = this.cols.map(function (c) {\n      return {\n        x1: c.pos,\n        x2: c.pos,\n        y1: coly,\n        y2: colY\n      };\n    }).concat(colMids.map(function (m) {\n      return {\n        x1: m,\n        x2: m,\n        y1: coly,\n        y2: colY\n      };\n    }));\n    var lines = hlines.concat(vlines);\n    lines.forEach(function (l) {\n      return l.verts = [];\n    });\n    this.verts = [];\n    this.edges = [];\n    hlines.forEach(function (h) {\n      return vlines.forEach(function (v) {\n        var p = new Vert(_this.verts.length, v.x1, h.y1);\n        h.verts.push(p);\n        v.verts.push(p);\n\n        _this.verts.push(p);\n\n        var i = _this.backToFront.length;\n\n        while (i-- > 0) {\n          var node = _this.backToFront[i],\n              r = node.rect;\n          var dx = Math.abs(p.x - r.cx()),\n              dy = Math.abs(p.y - r.cy());\n\n          if (dx < r.width() / 2 && dy < r.height() / 2) {\n            p.node = node;\n            break;\n          }\n        }\n      });\n    });\n    lines.forEach(function (l, li) {\n      _this.nodes.forEach(function (v, i) {\n        v.rect.lineIntersections(l.x1, l.y1, l.x2, l.y2).forEach(function (intersect, j) {\n          var p = new Vert(_this.verts.length, intersect.x, intersect.y, v, l);\n\n          _this.verts.push(p);\n\n          l.verts.push(p);\n          v.ports.push(p);\n        });\n      });\n\n      var isHoriz = Math.abs(l.y1 - l.y2) < 0.1;\n\n      var delta = function delta(a, b) {\n        return isHoriz ? b.x - a.x : b.y - a.y;\n      };\n\n      l.verts.sort(delta);\n\n      for (var i = 1; i < l.verts.length; i++) {\n        var u = l.verts[i - 1],\n            v = l.verts[i];\n        if (u.node && u.node === v.node && u.node.leaf) continue;\n\n        _this.edges.push({\n          source: u.id,\n          target: v.id,\n          length: Math.abs(delta(u, v))\n        });\n      }\n    });\n  }\n\n  GridRouter.prototype.avg = function (a) {\n    return a.reduce(function (x, y) {\n      return x + y;\n    }) / a.length;\n  };\n\n  GridRouter.prototype.getGridLines = function (axis) {\n    var columns = [];\n    var ls = this.leaves.slice(0, this.leaves.length);\n\n    while (ls.length > 0) {\n      var overlapping = ls.filter(function (v) {\n        return v.rect['overlap' + axis.toUpperCase()](ls[0].rect);\n      });\n      var col = {\n        nodes: overlapping,\n        pos: this.avg(overlapping.map(function (v) {\n          return v.rect['c' + axis]();\n        }))\n      };\n      columns.push(col);\n      col.nodes.forEach(function (v) {\n        return ls.splice(ls.indexOf(v), 1);\n      });\n    }\n\n    columns.sort(function (a, b) {\n      return a.pos - b.pos;\n    });\n    return columns;\n  };\n\n  GridRouter.prototype.getDepth = function (v) {\n    var depth = 0;\n\n    while (v.parent !== this.root) {\n      depth++;\n      v = v.parent;\n    }\n\n    return depth;\n  };\n\n  GridRouter.prototype.midPoints = function (a) {\n    var gap = a[1] - a[0];\n    var mids = [a[0] - gap / 2];\n\n    for (var i = 1; i < a.length; i++) {\n      mids.push((a[i] + a[i - 1]) / 2);\n    }\n\n    mids.push(a[a.length - 1] + gap / 2);\n    return mids;\n  };\n\n  GridRouter.prototype.findLineage = function (v) {\n    var lineage = [v];\n\n    do {\n      v = v.parent;\n      lineage.push(v);\n    } while (v !== this.root);\n\n    return lineage.reverse();\n  };\n\n  GridRouter.prototype.findAncestorPathBetween = function (a, b) {\n    var aa = this.findLineage(a),\n        ba = this.findLineage(b),\n        i = 0;\n\n    while (aa[i] === ba[i]) {\n      i++;\n    }\n\n    return {\n      commonAncestor: aa[i - 1],\n      lineages: aa.slice(i).concat(ba.slice(i))\n    };\n  };\n\n  GridRouter.prototype.siblingObstacles = function (a, b) {\n    var _this = this;\n\n    var path = this.findAncestorPathBetween(a, b);\n    var lineageLookup = {};\n    path.lineages.forEach(function (v) {\n      return lineageLookup[v.id] = {};\n    });\n    var obstacles = path.commonAncestor.children.filter(function (v) {\n      return !(v in lineageLookup);\n    });\n    path.lineages.filter(function (v) {\n      return v.parent !== path.commonAncestor;\n    }).forEach(function (v) {\n      return obstacles = obstacles.concat(v.parent.children.filter(function (c) {\n        return c !== v.id;\n      }));\n    });\n    return obstacles.map(function (v) {\n      return _this.nodes[v];\n    });\n  };\n\n  GridRouter.getSegmentSets = function (routes, x, y) {\n    var vsegments = [];\n\n    for (var ei = 0; ei < routes.length; ei++) {\n      var route = routes[ei];\n\n      for (var si = 0; si < route.length; si++) {\n        var s = route[si];\n        s.edgeid = ei;\n        s.i = si;\n        var sdx = s[1][x] - s[0][x];\n\n        if (Math.abs(sdx) < 0.1) {\n          vsegments.push(s);\n        }\n      }\n    }\n\n    vsegments.sort(function (a, b) {\n      return a[0][x] - b[0][x];\n    });\n    var vsegmentsets = [];\n    var segmentset = null;\n\n    for (var i = 0; i < vsegments.length; i++) {\n      var s = vsegments[i];\n\n      if (!segmentset || Math.abs(s[0][x] - segmentset.pos) > 0.1) {\n        segmentset = {\n          pos: s[0][x],\n          segments: []\n        };\n        vsegmentsets.push(segmentset);\n      }\n\n      segmentset.segments.push(s);\n    }\n\n    return vsegmentsets;\n  };\n\n  GridRouter.nudgeSegs = function (x, y, routes, segments, leftOf, gap) {\n    var n = segments.length;\n    if (n <= 1) return;\n    var vs = segments.map(function (s) {\n      return new vpsc_1.Variable(s[0][x]);\n    });\n    var cs = [];\n\n    for (var i = 0; i < n; i++) {\n      for (var j = 0; j < n; j++) {\n        if (i === j) continue;\n        var s1 = segments[i],\n            s2 = segments[j],\n            e1 = s1.edgeid,\n            e2 = s2.edgeid,\n            lind = -1,\n            rind = -1;\n\n        if (x == 'x') {\n          if (leftOf(e1, e2)) {\n            if (s1[0][y] < s1[1][y]) {\n              lind = j, rind = i;\n            } else {\n              lind = i, rind = j;\n            }\n          }\n        } else {\n          if (leftOf(e1, e2)) {\n            if (s1[0][y] < s1[1][y]) {\n              lind = i, rind = j;\n            } else {\n              lind = j, rind = i;\n            }\n          }\n        }\n\n        if (lind >= 0) {\n          cs.push(new vpsc_1.Constraint(vs[lind], vs[rind], gap));\n        }\n      }\n    }\n\n    var solver = new vpsc_1.Solver(vs, cs);\n    solver.solve();\n    vs.forEach(function (v, i) {\n      var s = segments[i];\n      var pos = v.position();\n      s[0][x] = s[1][x] = pos;\n      var route = routes[s.edgeid];\n      if (s.i > 0) route[s.i - 1][1][x] = pos;\n      if (s.i < route.length - 1) route[s.i + 1][0][x] = pos;\n    });\n  };\n\n  GridRouter.nudgeSegments = function (routes, x, y, leftOf, gap) {\n    var vsegmentsets = GridRouter.getSegmentSets(routes, x, y);\n\n    for (var i = 0; i < vsegmentsets.length; i++) {\n      var ss = vsegmentsets[i];\n      var events = [];\n\n      for (var j = 0; j < ss.segments.length; j++) {\n        var s = ss.segments[j];\n        events.push({\n          type: 0,\n          s: s,\n          pos: Math.min(s[0][y], s[1][y])\n        });\n        events.push({\n          type: 1,\n          s: s,\n          pos: Math.max(s[0][y], s[1][y])\n        });\n      }\n\n      events.sort(function (a, b) {\n        return a.pos - b.pos + a.type - b.type;\n      });\n      var open = [];\n      var openCount = 0;\n      events.forEach(function (e) {\n        if (e.type === 0) {\n          open.push(e.s);\n          openCount++;\n        } else {\n          openCount--;\n        }\n\n        if (openCount == 0) {\n          GridRouter.nudgeSegs(x, y, routes, open, leftOf, gap);\n          open = [];\n        }\n      });\n    }\n  };\n\n  GridRouter.prototype.routeEdges = function (edges, nudgeGap, source, target) {\n    var _this = this;\n\n    var routePaths = edges.map(function (e) {\n      return _this.route(source(e), target(e));\n    });\n    var order = GridRouter.orderEdges(routePaths);\n    var routes = routePaths.map(function (e) {\n      return GridRouter.makeSegments(e);\n    });\n    GridRouter.nudgeSegments(routes, 'x', 'y', order, nudgeGap);\n    GridRouter.nudgeSegments(routes, 'y', 'x', order, nudgeGap);\n    GridRouter.unreverseEdges(routes, routePaths);\n    return routes;\n  };\n\n  GridRouter.unreverseEdges = function (routes, routePaths) {\n    routes.forEach(function (segments, i) {\n      var path = routePaths[i];\n\n      if (path.reversed) {\n        segments.reverse();\n        segments.forEach(function (segment) {\n          segment.reverse();\n        });\n      }\n    });\n  };\n\n  GridRouter.angleBetween2Lines = function (line1, line2) {\n    var angle1 = Math.atan2(line1[0].y - line1[1].y, line1[0].x - line1[1].x);\n    var angle2 = Math.atan2(line2[0].y - line2[1].y, line2[0].x - line2[1].x);\n    var diff = angle1 - angle2;\n\n    if (diff > Math.PI || diff < -Math.PI) {\n      diff = angle2 - angle1;\n    }\n\n    return diff;\n  };\n\n  GridRouter.isLeft = function (a, b, c) {\n    return (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x) <= 0;\n  };\n\n  GridRouter.getOrder = function (pairs) {\n    var outgoing = {};\n\n    for (var i = 0; i < pairs.length; i++) {\n      var p = pairs[i];\n      if (typeof outgoing[p.l] === 'undefined') outgoing[p.l] = {};\n      outgoing[p.l][p.r] = true;\n    }\n\n    return function (l, r) {\n      return typeof outgoing[l] !== 'undefined' && outgoing[l][r];\n    };\n  };\n\n  GridRouter.orderEdges = function (edges) {\n    var edgeOrder = [];\n\n    for (var i = 0; i < edges.length - 1; i++) {\n      for (var j = i + 1; j < edges.length; j++) {\n        var e = edges[i],\n            f = edges[j],\n            lcs = new LongestCommonSubsequence(e, f);\n        var u, vi, vj;\n        if (lcs.length === 0) continue;\n\n        if (lcs.reversed) {\n          f.reverse();\n          f.reversed = true;\n          lcs = new LongestCommonSubsequence(e, f);\n        }\n\n        if ((lcs.si <= 0 || lcs.ti <= 0) && (lcs.si + lcs.length >= e.length || lcs.ti + lcs.length >= f.length)) {\n          edgeOrder.push({\n            l: i,\n            r: j\n          });\n          continue;\n        }\n\n        if (lcs.si + lcs.length >= e.length || lcs.ti + lcs.length >= f.length) {\n          u = e[lcs.si + 1];\n          vj = e[lcs.si - 1];\n          vi = f[lcs.ti - 1];\n        } else {\n          u = e[lcs.si + lcs.length - 2];\n          vi = e[lcs.si + lcs.length];\n          vj = f[lcs.ti + lcs.length];\n        }\n\n        if (GridRouter.isLeft(u, vi, vj)) {\n          edgeOrder.push({\n            l: j,\n            r: i\n          });\n        } else {\n          edgeOrder.push({\n            l: i,\n            r: j\n          });\n        }\n      }\n    }\n\n    return GridRouter.getOrder(edgeOrder);\n  };\n\n  GridRouter.makeSegments = function (path) {\n    function copyPoint(p) {\n      return {\n        x: p.x,\n        y: p.y\n      };\n    }\n\n    var isStraight = function isStraight(a, b, c) {\n      return Math.abs((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)) < 0.001;\n    };\n\n    var segments = [];\n    var a = copyPoint(path[0]);\n\n    for (var i = 1; i < path.length; i++) {\n      var b = copyPoint(path[i]),\n          c = i < path.length - 1 ? path[i + 1] : null;\n\n      if (!c || !isStraight(a, b, c)) {\n        segments.push([a, b]);\n        a = b;\n      }\n    }\n\n    return segments;\n  };\n\n  GridRouter.prototype.route = function (s, t) {\n    var _this = this;\n\n    var source = this.nodes[s],\n        target = this.nodes[t];\n    this.obstacles = this.siblingObstacles(source, target);\n    var obstacleLookup = {};\n    this.obstacles.forEach(function (o) {\n      return obstacleLookup[o.id] = o;\n    });\n    this.passableEdges = this.edges.filter(function (e) {\n      var u = _this.verts[e.source],\n          v = _this.verts[e.target];\n      return !(u.node && u.node.id in obstacleLookup || v.node && v.node.id in obstacleLookup);\n    });\n\n    for (var i = 1; i < source.ports.length; i++) {\n      var u = source.ports[0].id;\n      var v = source.ports[i].id;\n      this.passableEdges.push({\n        source: u,\n        target: v,\n        length: 0\n      });\n    }\n\n    for (var i = 1; i < target.ports.length; i++) {\n      var u = target.ports[0].id;\n      var v = target.ports[i].id;\n      this.passableEdges.push({\n        source: u,\n        target: v,\n        length: 0\n      });\n    }\n\n    var getSource = function getSource(e) {\n      return e.source;\n    },\n        getTarget = function getTarget(e) {\n      return e.target;\n    },\n        getLength = function getLength(e) {\n      return e.length;\n    };\n\n    var shortestPathCalculator = new shortestpaths_1.Calculator(this.verts.length, this.passableEdges, getSource, getTarget, getLength);\n\n    var bendPenalty = function bendPenalty(u, v, w) {\n      var a = _this.verts[u],\n          b = _this.verts[v],\n          c = _this.verts[w];\n      var dx = Math.abs(c.x - a.x),\n          dy = Math.abs(c.y - a.y);\n      if (a.node === source && a.node === b.node || b.node === target && b.node === c.node) return 0;\n      return dx > 1 && dy > 1 ? 1000 : 0;\n    };\n\n    var shortestPath = shortestPathCalculator.PathFromNodeToNodeWithPrevCost(source.ports[0].id, target.ports[0].id, bendPenalty);\n    var pathPoints = shortestPath.reverse().map(function (vi) {\n      return _this.verts[vi];\n    });\n    pathPoints.push(this.nodes[target.id].ports[0]);\n    return pathPoints.filter(function (v, i) {\n      return !(i < pathPoints.length - 1 && pathPoints[i + 1].node === source && v.node === source || i > 0 && v.node === target && pathPoints[i - 1].node === target);\n    });\n  };\n\n  GridRouter.getRoutePath = function (route, cornerradius, arrowwidth, arrowheight) {\n    var result = {\n      routepath: 'M ' + route[0][0].x + ' ' + route[0][0].y + ' ',\n      arrowpath: ''\n    };\n\n    if (route.length > 1) {\n      for (var i = 0; i < route.length; i++) {\n        var li = route[i];\n        var x = li[1].x,\n            y = li[1].y;\n        var dx = x - li[0].x;\n        var dy = y - li[0].y;\n\n        if (i < route.length - 1) {\n          if (Math.abs(dx) > 0) {\n            x -= dx / Math.abs(dx) * cornerradius;\n          } else {\n            y -= dy / Math.abs(dy) * cornerradius;\n          }\n\n          result.routepath += 'L ' + x + ' ' + y + ' ';\n          var l = route[i + 1];\n          var x0 = l[0].x,\n              y0 = l[0].y;\n          var x1 = l[1].x;\n          var y1 = l[1].y;\n          dx = x1 - x0;\n          dy = y1 - y0;\n          var angle = GridRouter.angleBetween2Lines(li, l) < 0 ? 1 : 0;\n          var x2, y2;\n\n          if (Math.abs(dx) > 0) {\n            x2 = x0 + dx / Math.abs(dx) * cornerradius;\n            y2 = y0;\n          } else {\n            x2 = x0;\n            y2 = y0 + dy / Math.abs(dy) * cornerradius;\n          }\n\n          var cx = Math.abs(x2 - x);\n          var cy = Math.abs(y2 - y);\n          result.routepath += 'A ' + cx + ' ' + cy + ' 0 0 ' + angle + ' ' + x2 + ' ' + y2 + ' ';\n        } else {\n          var arrowtip = [x, y];\n          var arrowcorner1, arrowcorner2;\n\n          if (Math.abs(dx) > 0) {\n            x -= dx / Math.abs(dx) * arrowheight;\n            arrowcorner1 = [x, y + arrowwidth];\n            arrowcorner2 = [x, y - arrowwidth];\n          } else {\n            y -= dy / Math.abs(dy) * arrowheight;\n            arrowcorner1 = [x + arrowwidth, y];\n            arrowcorner2 = [x - arrowwidth, y];\n          }\n\n          result.routepath += 'L ' + x + ' ' + y + ' ';\n\n          if (arrowheight > 0) {\n            result.arrowpath = 'M ' + arrowtip[0] + ' ' + arrowtip[1] + ' L ' + arrowcorner1[0] + ' ' + arrowcorner1[1] + ' L ' + arrowcorner2[0] + ' ' + arrowcorner2[1];\n          }\n        }\n      }\n    } else {\n      var li = route[0];\n      var x = li[1].x,\n          y = li[1].y;\n      var dx = x - li[0].x;\n      var dy = y - li[0].y;\n      var arrowtip = [x, y];\n      var arrowcorner1, arrowcorner2;\n\n      if (Math.abs(dx) > 0) {\n        x -= dx / Math.abs(dx) * arrowheight;\n        arrowcorner1 = [x, y + arrowwidth];\n        arrowcorner2 = [x, y - arrowwidth];\n      } else {\n        y -= dy / Math.abs(dy) * arrowheight;\n        arrowcorner1 = [x + arrowwidth, y];\n        arrowcorner2 = [x - arrowwidth, y];\n      }\n\n      result.routepath += 'L ' + x + ' ' + y + ' ';\n\n      if (arrowheight > 0) {\n        result.arrowpath = 'M ' + arrowtip[0] + ' ' + arrowtip[1] + ' L ' + arrowcorner1[0] + ' ' + arrowcorner1[1] + ' L ' + arrowcorner2[0] + ' ' + arrowcorner2[1];\n      }\n    }\n\n    return result;\n  };\n\n  return GridRouter;\n}();\n\nexports.GridRouter = GridRouter;","\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./src/adaptor\"));\n\n__export(require(\"./src/d3adaptor\"));\n\n__export(require(\"./src/descent\"));\n\n__export(require(\"./src/geom\"));\n\n__export(require(\"./src/gridrouter\"));\n\n__export(require(\"./src/handledisconnected\"));\n\n__export(require(\"./src/layout\"));\n\n__export(require(\"./src/layout3d\"));\n\n__export(require(\"./src/linklengths\"));\n\n__export(require(\"./src/powergraph\"));\n\n__export(require(\"./src/pqueue\"));\n\n__export(require(\"./src/rbtree\"));\n\n__export(require(\"./src/rectangle\"));\n\n__export(require(\"./src/shortestpaths\"));\n\n__export(require(\"./src/vpsc\"));\n\n__export(require(\"./src/batch\"));","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar LayoutAdaptor = function (_super) {\n  __extends(LayoutAdaptor, _super);\n\n  function LayoutAdaptor(options) {\n    var _this = _super.call(this) || this;\n\n    var self = _this;\n    var o = options;\n\n    if (o.trigger) {\n      _this.trigger = o.trigger;\n    }\n\n    if (o.kick) {\n      _this.kick = o.kick;\n    }\n\n    if (o.drag) {\n      _this.drag = o.drag;\n    }\n\n    if (o.on) {\n      _this.on = o.on;\n    }\n\n    _this.dragstart = _this.dragStart = layout_1.Layout.dragStart;\n    _this.dragend = _this.dragEnd = layout_1.Layout.dragEnd;\n    return _this;\n  }\n\n  LayoutAdaptor.prototype.trigger = function (e) {};\n\n  ;\n\n  LayoutAdaptor.prototype.kick = function () {};\n\n  ;\n\n  LayoutAdaptor.prototype.drag = function () {};\n\n  ;\n\n  LayoutAdaptor.prototype.on = function (eventType, listener) {\n    return this;\n  };\n\n  ;\n  return LayoutAdaptor;\n}(layout_1.Layout);\n\nexports.LayoutAdaptor = LayoutAdaptor;\n\nfunction adaptor(options) {\n  return new LayoutAdaptor(options);\n}\n\nexports.adaptor = adaptor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar d3v3 = require(\"./d3v3adaptor\");\n\nvar d3v4 = require(\"./d3v4adaptor\");\n\n;\n\nfunction d3adaptor(d3Context) {\n  if (!d3Context || isD3V3(d3Context)) {\n    return new d3v3.D3StyleLayoutAdaptor();\n  }\n\n  return new d3v4.D3StyleLayoutAdaptor(d3Context);\n}\n\nexports.d3adaptor = d3adaptor;\n\nfunction isD3V3(d3Context) {\n  var v3exp = /^3\\./;\n  return d3Context.version && d3Context.version.match(v3exp) !== null;\n}","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar D3StyleLayoutAdaptor = function (_super) {\n  __extends(D3StyleLayoutAdaptor, _super);\n\n  function D3StyleLayoutAdaptor() {\n    var _this = _super.call(this) || this;\n\n    _this.event = d3.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\n    var d3layout = _this;\n    var drag;\n\n    _this.drag = function () {\n      if (!drag) {\n        var drag = d3.behavior.drag().origin(layout_1.Layout.dragOrigin).on(\"dragstart.d3adaptor\", layout_1.Layout.dragStart).on(\"drag.d3adaptor\", function (d) {\n          layout_1.Layout.drag(d, d3.event);\n          d3layout.resume();\n        }).on(\"dragend.d3adaptor\", layout_1.Layout.dragEnd);\n      }\n\n      if (!arguments.length) return drag;\n      this.call(drag);\n    };\n\n    return _this;\n  }\n\n  D3StyleLayoutAdaptor.prototype.trigger = function (e) {\n    var d3event = {\n      type: layout_1.EventType[e.type],\n      alpha: e.alpha,\n      stress: e.stress\n    };\n    this.event[d3event.type](d3event);\n  };\n\n  D3StyleLayoutAdaptor.prototype.kick = function () {\n    var _this = this;\n\n    d3.timer(function () {\n      return _super.prototype.tick.call(_this);\n    });\n  };\n\n  D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\n    if (typeof eventType === 'string') {\n      this.event.on(eventType, listener);\n    } else {\n      this.event.on(layout_1.EventType[eventType], listener);\n    }\n\n    return this;\n  };\n\n  return D3StyleLayoutAdaptor;\n}(layout_1.Layout);\n\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;\n\nfunction d3adaptor() {\n  return new D3StyleLayoutAdaptor();\n}\n\nexports.d3adaptor = d3adaptor;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar D3StyleLayoutAdaptor = function (_super) {\n  __extends(D3StyleLayoutAdaptor, _super);\n\n  function D3StyleLayoutAdaptor(d3Context) {\n    var _this = _super.call(this) || this;\n\n    _this.d3Context = d3Context;\n    _this.event = d3Context.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\n    var d3layout = _this;\n    var drag;\n\n    _this.drag = function () {\n      if (!drag) {\n        var drag = d3Context.drag().subject(layout_1.Layout.dragOrigin).on(\"start.d3adaptor\", layout_1.Layout.dragStart).on(\"drag.d3adaptor\", function (d) {\n          layout_1.Layout.drag(d, d3Context.event);\n          d3layout.resume();\n        }).on(\"end.d3adaptor\", layout_1.Layout.dragEnd);\n      }\n\n      if (!arguments.length) return drag;\n      arguments[0].call(drag);\n    };\n\n    return _this;\n  }\n\n  D3StyleLayoutAdaptor.prototype.trigger = function (e) {\n    var d3event = {\n      type: layout_1.EventType[e.type],\n      alpha: e.alpha,\n      stress: e.stress\n    };\n    this.event.call(d3event.type, d3event);\n  };\n\n  D3StyleLayoutAdaptor.prototype.kick = function () {\n    var _this = this;\n\n    var t = this.d3Context.timer(function () {\n      return _super.prototype.tick.call(_this) && t.stop();\n    });\n  };\n\n  D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\n    if (typeof eventType === 'string') {\n      this.event.on(eventType, listener);\n    } else {\n      this.event.on(layout_1.EventType[eventType], listener);\n    }\n\n    return this;\n  };\n\n  return D3StyleLayoutAdaptor;\n}(layout_1.Layout);\n\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar shortestpaths_1 = require(\"./shortestpaths\");\n\nvar descent_1 = require(\"./descent\");\n\nvar rectangle_1 = require(\"./rectangle\");\n\nvar linklengths_1 = require(\"./linklengths\");\n\nvar Link3D = function () {\n  function Link3D(source, target) {\n    this.source = source;\n    this.target = target;\n  }\n\n  Link3D.prototype.actualLength = function (x) {\n    var _this = this;\n\n    return Math.sqrt(x.reduce(function (c, v) {\n      var dx = v[_this.target] - v[_this.source];\n      return c + dx * dx;\n    }, 0));\n  };\n\n  return Link3D;\n}();\n\nexports.Link3D = Link3D;\n\nvar Node3D = function () {\n  function Node3D(x, y, z) {\n    if (x === void 0) {\n      x = 0;\n    }\n\n    if (y === void 0) {\n      y = 0;\n    }\n\n    if (z === void 0) {\n      z = 0;\n    }\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n\n  return Node3D;\n}();\n\nexports.Node3D = Node3D;\n\nvar Layout3D = function () {\n  function Layout3D(nodes, links, idealLinkLength) {\n    var _this = this;\n\n    if (idealLinkLength === void 0) {\n      idealLinkLength = 1;\n    }\n\n    this.nodes = nodes;\n    this.links = links;\n    this.idealLinkLength = idealLinkLength;\n    this.constraints = null;\n    this.useJaccardLinkLengths = true;\n    this.result = new Array(Layout3D.k);\n\n    for (var i = 0; i < Layout3D.k; ++i) {\n      this.result[i] = new Array(nodes.length);\n    }\n\n    nodes.forEach(function (v, i) {\n      for (var _i = 0, _a = Layout3D.dims; _i < _a.length; _i++) {\n        var dim = _a[_i];\n        if (typeof v[dim] == 'undefined') v[dim] = Math.random();\n      }\n\n      _this.result[0][i] = v.x;\n      _this.result[1][i] = v.y;\n      _this.result[2][i] = v.z;\n    });\n  }\n\n  ;\n\n  Layout3D.prototype.linkLength = function (l) {\n    return l.actualLength(this.result);\n  };\n\n  Layout3D.prototype.start = function (iterations) {\n    var _this = this;\n\n    if (iterations === void 0) {\n      iterations = 100;\n    }\n\n    var n = this.nodes.length;\n    var linkAccessor = new LinkAccessor();\n    if (this.useJaccardLinkLengths) linklengths_1.jaccardLinkLengths(this.links, linkAccessor, 1.5);\n    this.links.forEach(function (e) {\n      return e.length *= _this.idealLinkLength;\n    });\n    var distanceMatrix = new shortestpaths_1.Calculator(n, this.links, function (e) {\n      return e.source;\n    }, function (e) {\n      return e.target;\n    }, function (e) {\n      return e.length;\n    }).DistanceMatrix();\n    var D = descent_1.Descent.createSquareMatrix(n, function (i, j) {\n      return distanceMatrix[i][j];\n    });\n    var G = descent_1.Descent.createSquareMatrix(n, function () {\n      return 2;\n    });\n    this.links.forEach(function (_a) {\n      var source = _a.source,\n          target = _a.target;\n      return G[source][target] = G[target][source] = 1;\n    });\n    this.descent = new descent_1.Descent(this.result, D);\n    this.descent.threshold = 1e-3;\n    this.descent.G = G;\n    if (this.constraints) this.descent.project = new rectangle_1.Projection(this.nodes, null, null, this.constraints).projectFunctions();\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      var v = this.nodes[i];\n\n      if (v.fixed) {\n        this.descent.locks.add(i, [v.x, v.y, v.z]);\n      }\n    }\n\n    this.descent.run(iterations);\n    return this;\n  };\n\n  Layout3D.prototype.tick = function () {\n    this.descent.locks.clear();\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      var v = this.nodes[i];\n\n      if (v.fixed) {\n        this.descent.locks.add(i, [v.x, v.y, v.z]);\n      }\n    }\n\n    return this.descent.rungeKutta();\n  };\n\n  Layout3D.dims = ['x', 'y', 'z'];\n  Layout3D.k = Layout3D.dims.length;\n  return Layout3D;\n}();\n\nexports.Layout3D = Layout3D;\n\nvar LinkAccessor = function () {\n  function LinkAccessor() {}\n\n  LinkAccessor.prototype.getSourceIndex = function (e) {\n    return e.source;\n  };\n\n  LinkAccessor.prototype.getTargetIndex = function (e) {\n    return e.target;\n  };\n\n  LinkAccessor.prototype.getLength = function (e) {\n    return e.length;\n  };\n\n  LinkAccessor.prototype.setLength = function (e, l) {\n    e.length = l;\n  };\n\n  return LinkAccessor;\n}();","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar gridrouter_1 = require(\"./gridrouter\");\n\nfunction gridify(pgLayout, nudgeGap, margin, groupMargin) {\n  pgLayout.cola.start(0, 0, 0, 10, false);\n  var gridrouter = route(pgLayout.cola.nodes(), pgLayout.cola.groups(), margin, groupMargin);\n  return gridrouter.routeEdges(pgLayout.powerGraph.powerEdges, nudgeGap, function (e) {\n    return e.source.routerNode.id;\n  }, function (e) {\n    return e.target.routerNode.id;\n  });\n}\n\nexports.gridify = gridify;\n\nfunction route(nodes, groups, margin, groupMargin) {\n  nodes.forEach(function (d) {\n    d.routerNode = {\n      name: d.name,\n      bounds: d.bounds.inflate(-margin)\n    };\n  });\n  groups.forEach(function (d) {\n    d.routerNode = {\n      bounds: d.bounds.inflate(-groupMargin),\n      children: (typeof d.groups !== 'undefined' ? d.groups.map(function (c) {\n        return nodes.length + c.id;\n      }) : []).concat(typeof d.leaves !== 'undefined' ? d.leaves.map(function (c) {\n        return c.index;\n      }) : [])\n    };\n  });\n  var gridRouterNodes = nodes.concat(groups).map(function (d, i) {\n    d.routerNode.id = i;\n    return d.routerNode;\n  });\n  return new gridrouter_1.GridRouter(gridRouterNodes, {\n    getChildren: function getChildren(v) {\n      return v.children;\n    },\n    getBounds: function getBounds(v) {\n      return v.bounds;\n    }\n  }, margin - groupMargin);\n}\n\nfunction powerGraphGridLayout(graph, size, grouppadding) {\n  var powerGraph;\n  graph.nodes.forEach(function (v, i) {\n    return v.index = i;\n  });\n  new layout_1.Layout().avoidOverlaps(false).nodes(graph.nodes).links(graph.links).powerGraphGroups(function (d) {\n    powerGraph = d;\n    powerGraph.groups.forEach(function (v) {\n      return v.padding = grouppadding;\n    });\n  });\n  var n = graph.nodes.length;\n  var edges = [];\n  var vs = graph.nodes.slice(0);\n  vs.forEach(function (v, i) {\n    return v.index = i;\n  });\n  powerGraph.groups.forEach(function (g) {\n    var sourceInd = g.index = g.id + n;\n    vs.push(g);\n    if (typeof g.leaves !== 'undefined') g.leaves.forEach(function (v) {\n      return edges.push({\n        source: sourceInd,\n        target: v.index\n      });\n    });\n    if (typeof g.groups !== 'undefined') g.groups.forEach(function (gg) {\n      return edges.push({\n        source: sourceInd,\n        target: gg.id + n\n      });\n    });\n  });\n  powerGraph.powerEdges.forEach(function (e) {\n    edges.push({\n      source: e.source.index,\n      target: e.target.index\n    });\n  });\n  new layout_1.Layout().size(size).nodes(vs).links(edges).avoidOverlaps(false).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100, 0, 0, 0, false);\n  return {\n    cola: new layout_1.Layout().convergenceThreshold(1e-3).size(size).avoidOverlaps(true).nodes(graph.nodes).links(graph.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function (d) {\n      powerGraph = d;\n      powerGraph.groups.forEach(function (v) {\n        v.padding = grouppadding;\n      });\n    }).start(50, 0, 100, 0, false),\n    powerGraph: powerGraph\n  };\n}\n\nexports.powerGraphGridLayout = powerGraphGridLayout;","\"use strict\";\n/**\r\n * Implementation of the Fast Node Overlap Removal (VPSC) algorithm\r\n *\r\n * Tim Dwyer, Kim Marriott, Peter J.Stuckey\r\n * A new algorithm for removing node overlapping in graph visualization,\r\n * Graph Drawing 2005\r\n * Pages 153-164,\r\n * Lecture Notes in Computer Science, vol 3843.\r\n * 2006,\r\n * Springer, Berlin, Heidelberg\r\n * ISBN 978-3-540-31667-1,\r\n * Online ISBN 978-3-540-31667-1,\r\n * https://doi.org/10.1007/11618058_15.\r\n * (https://link.springer.com/chapter/10.1007%2F11618058_15)\r\n *\r\n * courtesy to the webcola framework\r\n */\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar agora_graph_1 = require(\"agora-graph\");\n\nvar webcola_1 = require(\"webcola\");\n\nvar lodash_1 = __importDefault(require(\"lodash\"));\n\nexports.vpsc = agora_graph_1.createFunction(function (graph, options) {\n  if (options === void 0) {\n    options = {\n      padding: 0\n    };\n  }\n\n  var rects = lodash_1.default.map(graph.nodes, function (node) {\n    return new webcola_1.Rectangle(agora_graph_1.left(node), agora_graph_1.right(node), agora_graph_1.top(node), agora_graph_1.bottom(node));\n  });\n  webcola_1.removeOverlaps(rects);\n  lodash_1.default.forEach(graph.nodes, function (node) {\n    node.x = rects[node.index].cx();\n    node.y = rects[node.index].cy();\n  });\n  return {\n    graph: graph\n  };\n});\nexports.VPSCAlgorithm = {\n  name: 'VPSC',\n  algorithm: exports.vpsc\n};\nexports.default = exports.VPSCAlgorithm;"],"sourceRoot":""}