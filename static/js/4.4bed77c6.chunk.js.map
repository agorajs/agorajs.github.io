{"version":3,"sources":["../node_modules/webcola/dist/src/layout.js","../node_modules/webcola/dist/src/rectangle.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/point.js","../node_modules/webcola/dist/src/shortestpaths.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/box.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/vector.js","../node_modules/webcola/dist/src/linklengths.js","../node_modules/webcola/dist/src/descent.js","../node_modules/webcola/dist/src/vpsc.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/overlap.js","../node_modules/webcola/dist/src/powergraph.js","../node_modules/webcola/dist/src/rbtree.js","../node_modules/webcola/dist/src/pqueue.js","../node_modules/webcola/dist/src/geom.js","../node_modules/webcola/dist/src/handledisconnected.js","../node_modules/webcola/dist/src/gridrouter.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/index.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/algorithm.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/conversion.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/cropped.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/delaunay-edges.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/distance.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/node-map.js","../node_modules/agora-vpsc/node_modules/agora-graph/dist/scale.js","../node_modules/webcola/dist/index.js","../node_modules/webcola/dist/src/adaptor.js","../node_modules/webcola/dist/src/d3adaptor.js","../node_modules/webcola/dist/src/d3v3adaptor.js","../node_modules/webcola/dist/src/d3v4adaptor.js","../node_modules/webcola/dist/src/layout3d.js","../node_modules/webcola/dist/src/batch.js","../node_modules/agora-vpsc/dist/index.js"],"names":["Object","defineProperty","exports","value","EventType","powergraph","linklengths_1","descent_1","rectangle_1","shortestpaths_1","geom_1","handledisconnected_1","isGroup","g","leaves","groups","Layout","_this","this","_canvasSize","_linkDistance","_defaultNodeSize","_linkLengthCalculator","_linkType","_avoidOverlaps","_handleDisconnected","_running","_nodes","_groups","_rootGroup","_links","_constraints","_distanceMatrix","_descent","_directedLinkConstraints","_threshold","_visibilityGraph","_groupCompactness","event","linkAccessor","getSourceIndex","getTargetIndex","setLength","setLinkLength","getType","l","prototype","on","e","listener","trigger","type","kick","tick","_alpha","end","alpha","stress","_lastStress","o","i","n","length","locks","clear","fixed","px","py","x","y","p","add","s1","rungeKutta","updateNodePositions","nodes","v","forEach","Math","max","source","target","Array","padding","parent","gi","filter","powerGraphGroups","f","getGroups","avoidOverlaps","arguments","handleDisconnected","flowLayout","axis","minSeparation","getMinSeparation","links","constraints","c","distanceMatrix","d","size","defaultNodeSize","groupCompactness","linkDistance","linkType","convergenceThreshold","start","getLinkLength","link","getLinkType","symmetricDiffLinkLengths","idealLength","w","jaccardLinkLengths","initialUnconstrainedIterations","initialUserConstraintIterations","initialAllConstraintsIterations","gridSnapIterations","keepRunning","centerGraph","distances","N","h","G","ao","index","Calculator","DistanceMatrix","Descent","createSquareMatrix","u","weight","D","j","strength","idealDistance","addAttraction","curConstraints","concat","generateDirectedEdgeConstraints","threshold","initialLayout","project","Projection","projectFunctions","run","separateOverlappingComponents","snapStrength","snapGridSize","width","numGridSnapNodes","scaleSnapByMaxH","G0","resume","iterations","edges","map","vs","push","gg","height","x_1","y_1","graphs","separateGraphs","applyPacking","bounds","setXCentre","setYCentre","stop","prepareEdgeRouting","nodeMargin","TangentVisibilityGraph","inflate","vertices","routeEdge","edge","ah","draw","lineData","vg2","P","V","E","port1","port2","addPoint","addEdgeIfVisible","shortestPath","id","PathFromNodeToNode","route","makeEdgeBetween","innerBounds","sourceIntersection","arrowStart","q","rayIntersection","makeEdgeTo","linkId","dragStart","storeOffset","dragOrigin","stopNode","origin","_dragGroupOffsetX","_dragGroupOffsetY","cx","cy","drag","position","dragEnd","mouseOver","mouseOut","__extends","_extendStatics","b","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","create","vpsc_1","rbtree_1","computeGroupBounds","reduce","r","union","Rectangle","empty","X","Y","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","overlapX","ux","vx","overlapY","uy","vy","dx","dy","min","lineIntersections","x1","y1","x2","y2","sides","intersections","lineIntersection","ints","x3","y3","x4","y4","dx12","dx34","dy12","dy34","denominator","dx31","dy31","a","pad","si","ti","sqrt","al","targetIntersection","s","Node","pos","prev","makeRBTree","next","Event","isOpen","compareEvents","RBTree","xRect","getCentre","getOpen","getClose","getSize","makeRect","open","close","center","findNeighbours","scanline","forward","reverse","it","findIter","uovervX","insert","yRect","generateGroupConstraints","root","minSep","isContained","gn","ln","childConstraints","ccs","rs","minVar","desiredPosition","maxVar","variable","cs","generateConstraints","cOut","cIn","left","right","gapAdjustment","gap","vars","rect","console","assert","events","sort","remove","makeConstraint","sep","Constraint","visitNeighbours","mkcon","iterator","generateXConstraints","generateYConstraints","generateXGroupConstraints","generateYGroupConstraints","removeOverlaps","Variable","solver","Solver","solve","IndexedVariable","_super","call","rootGroup","variables","createConstraints","w2","h2","stiffness","createSeparation","equality","makeFeasible","dim","offsets","node","nextPos","createAlignment","xConstraints","yConstraints","slice","offset","isSep","setupVariablesAndBounds","x0","y0","desired","getDesired","fixedWeight","ix","iy","xProject","xmin","xmax","p2","yProject","ymin","ymax","updateNodeBounds","updateGroupBounds","starting","setStartingPositions","setDesiredPositions","delta","p1","deltaX","deltaY","Δ","Δx","Δy","normX","abs","normY","norm","hypot","pqueue_1","Neighbour","distance","neighbours","QueueEntry","es","getLength","dijkstraNeighbours","DistancesFromNode","PathFromNodeToNodeWithPrevCost","prevCost","PriorityQueue","qu","visitedFrom","pop","neighbour","viduid","cc","t","path","dest","MAX_VALUE","reduceKey","__importDefault","mod","__esModule","lodash_1","minX","default","minBy","maxX","maxBy","minY","maxY","setHeight","yMin","yMax","setWidth","xMin","xMax","setMinY","setMaxY","setMinX","setMaxX","diagonal","box","top","bottom","setTop","setBottom","setLeft","setRight","point_1","magnitude","vector","sum","v1","v2","diff","mult","k","unionCount","keys","intersectionCount","computeLinkLengths","la","addNeighbours","getNeighbours","stronglyConnectedComponents","numVertices","stack","components","strongConnect","lowlink","onStack","_i","_a","out","component","edges_1","v_1","nodes_1","ui","vi","Locks","isEmpty","apply","random","PseudoRandom","H","Hd","ia","ib","xtmp","minD","M","offsetDir","getNextBetween","computeDerivatives","d2","Huu","maxH","maxDisplaces","sd2","rd","isFinite","D2","gs","l3","hs","log","numNodes","xiu","m","dotProd","rightMultiply","computeStepSize","numerator","reduceStress","takeDescentStep","computeStress","copy","stepAndProject","stepSize","mApply","matrixApply","computeNextPosition","beta","converged","mid","disp","nMinus1","rl","zeroDistance","seed","range","getNext","PositionStats","scale","AB","AD","A2","addVariable","ai","bi","wi","getPosn","active","unsatisfiable","slack","dfdv","block","ps","posn","ff","Block","updateWeightedPosition","compute_lm","postAction","_dfdv","lm","populateSplitBlock","traverse","visit","acc","findMinLM","findMinLMBetween","lv","rv","findPath","to","endFound","isActiveDirectedPathBetween","split","createSplitBlock","startVar","splitBetween","vl","vr","bs","constraint","lb","rb","mergeAcross","dist","cost","Blocks","list","blockInd","last","swapBlock","merge","updateBlockPositions","inactive","LAGRANGIAN_TOLERANCE","nb","mostViolated","minSlack","deletePoint","ZERO_UPPERBOUND","satisfy","lastcost","removeOverlapInOneDimension","spans","lowerBound","upperBound","desiredCenter","leftMost","rightMost","leftMostSize","rightMostSize","vLower","vUpper","newCenters","box_1","overlap","n1","n2","hasOverlap","lap","sorted","sortBy","edgeOverlap","present","getAllOverlaps","overlaps","PowerEdge","Configuration","modules","roots","initModulesFromGroup","ModuleSet","Module","R","outgoing","incoming","group","moduleSet","module","child","definition","prop","LinkSets","inInt","intersection","outInt","children","update","forAll","ms","linktype","nls","count","rootMerges","merges","ctr","i_","nEdges","greedyMerge","getGroupHierarchy","retargetedEdges","toGroups","isLeaf","gid","isIsland","isPredefined","allEdges","getEdges","edgetype","table","other","result","contains","sets","forAllModules","lt","powerEdges","TreeBase","data","res","_root","iter","_comparator","_cursor","_ancestors","get_child","find","_bound","cmp","Iterator","each","cb","reach","cur","tree","_tree","_minNode","save","_maxNode","red","dir","set_child","val","comparator","ret","head","undefined","gp","ggp","is_red","dir2","single_rotate","double_rotate","found","sr","sibling","gpc","PairingHeap","elem","subheaps","toString","selector","str","needComma","subheap","isHeap","lessThan","every","obj","heap2","removeMin","mergePairs","firstPair","remaining","decreaseKey","newValue","setHeapNode","newHeap","pairingNode","args","arg","heapNode","newKey","Point","LineSegment","PolyPoint","isLeft","P0","P1","P2","above","vj","below","tangent_PointPolyC","Vclosed","rtan","Rtangent_PointPolyC","ltan","Ltangent_PointPolyC","dnC","floor","tangent_PolyPolyC","W","t1","t2","cmp1","cmp2","ix1","ix2","done","RLtangent_PolyPolyC","ConvexHull","S","minmax","maxmin","maxmax","bot","clockwiseRadialSweep","atan2","LRtangent_PolyPolyC","LLtangent_PolyPolyC","RRtangent_PolyPolyC","BiTangent","BiTangents","TVGPoint","VisibilityVertex","polyid","polyvertid","vv","VisibilityEdge","g0","pj","Pi","Pj","tangents","i1","i2","intersectsPolys","poly","intersects","_int","bt","v3","w1","w3","v1v2w2","v2w1w2","v2w2w3","w1w2v2","w2v1v2","w2v2v3","ll","rr","lr","isAnyPInQ","isPointInsidePoly","polysOverlap","packingOptions","PADDING","GOLDEN_SECTION","FLOAT_EPSILON","MAX_INERATIONS","node_size","desired_ratio","init_x","init_y","svg_width","svg_height","real_width","real_height","min_width","global_bottom","line","step","max_width","put_rect","space_left","graph","min_x","min_y","max_x","max_y","array","calculate_single_bb","calculate_bb","curr_best_f","curr_best","get_entire_width","iterationCounter","f_x1","f_x2","flag","df","corner","put_nodes_to_right_positions","marks","ways","clusters","explore_node","is_new","adjacent","NodeWrapper","leaf","Vert","LongestCommonSubsequence","mf","findMatch","tr","mr","reversed","match","getSequence","GridRouter","originalnodes","accessor","groupPadding","getBounds","getChildren","cols","getGridLines","rows","ports","backToFront","getDepth","colMids","midPoints","rowMids","rowx","rowX","coly","colY","hlines","vlines","lines","verts","li","intersect","isHoriz","avg","columns","ls","overlapping","toUpperCase","col","splice","indexOf","depth","mids","findLineage","lineage","findAncestorPathBetween","aa","ba","commonAncestor","lineages","siblingObstacles","lineageLookup","obstacles","getSegmentSets","routes","vsegments","ei","edgeid","sdx","vsegmentsets","segmentset","segments","nudgeSegs","leftOf","s2","e1","e2","lind","rind","nudgeSegments","ss","openCount","routeEdges","nudgeGap","routePaths","order","orderEdges","makeSegments","unreverseEdges","segment","angleBetween2Lines","line1","line2","angle1","angle2","PI","getOrder","pairs","edgeOrder","lcs","copyPoint","isStraight","obstacleLookup","passableEdges","pathPoints","getRoutePath","cornerradius","arrowwidth","arrowheight","routepath","arrowpath","angle","arrowtip","arrowcorner1","arrowcorner2","__export","createFunction","vector_1","ROUND_PRECISION","round","number","precision","multiplier","pow","toCartesian","cos","theta","sin","toPolar","rad","crop","delaunator_1","overlap_1","delaunay","del","from","hastable","triangles","chunk","triangle","addable","augmented","edges1","edges2","iterated","iteratee","added","pair","optimalVector","actual","widthRatio","heightRatio","unOverlapRatio","minimalVector","Δx_n1n2","Δy_n1n2","nodeMap","aggreg","createScale","initial","frame","ratio","layout_1","LayoutAdaptor","options","dragstart","dragend","eventType","adaptor","d3v3","d3v4","d3adaptor","d3Context","version","isD3V3","D3StyleLayoutAdaptor","d3","dispatch","d3layout","behavior","d3event","timer","subject","Link3D","actualLength","Node3D","z","Layout3D","idealLinkLength","useJaccardLinkLengths","dims","linkLength","LinkAccessor","descent","gridrouter_1","gridify","pgLayout","margin","groupMargin","cola","routerNode","name","gridRouterNodes","powerGraph","powerGraphGridLayout","grouppadding","sourceInd","agora_graph_1","webcola_1","vpsc","rects","VPSCAlgorithm","algorithm"],"mappings":"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","file":"static/js/4.4bed77c6.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar powergraph = require(\"./powergraph\");\n\nvar linklengths_1 = require(\"./linklengths\");\n\nvar descent_1 = require(\"./descent\");\n\nvar rectangle_1 = require(\"./rectangle\");\n\nvar shortestpaths_1 = require(\"./shortestpaths\");\n\nvar geom_1 = require(\"./geom\");\n\nvar handledisconnected_1 = require(\"./handledisconnected\");\n\nvar EventType;\n\n(function (EventType) {\n  EventType[EventType[\"start\"] = 0] = \"start\";\n  EventType[EventType[\"tick\"] = 1] = \"tick\";\n  EventType[EventType[\"end\"] = 2] = \"end\";\n})(EventType = exports.EventType || (exports.EventType = {}));\n\n;\n\nfunction isGroup(g) {\n  return typeof g.leaves !== 'undefined' || typeof g.groups !== 'undefined';\n}\n\nvar Layout = function () {\n  function Layout() {\n    var _this = this;\n\n    this._canvasSize = [1, 1];\n    this._linkDistance = 20;\n    this._defaultNodeSize = 10;\n    this._linkLengthCalculator = null;\n    this._linkType = null;\n    this._avoidOverlaps = false;\n    this._handleDisconnected = true;\n    this._running = false;\n    this._nodes = [];\n    this._groups = [];\n    this._rootGroup = null;\n    this._links = [];\n    this._constraints = [];\n    this._distanceMatrix = null;\n    this._descent = null;\n    this._directedLinkConstraints = null;\n    this._threshold = 0.01;\n    this._visibilityGraph = null;\n    this._groupCompactness = 1e-6;\n    this.event = null;\n    this.linkAccessor = {\n      getSourceIndex: Layout.getSourceIndex,\n      getTargetIndex: Layout.getTargetIndex,\n      setLength: Layout.setLinkLength,\n      getType: function getType(l) {\n        return typeof _this._linkType === \"function\" ? _this._linkType(l) : 0;\n      }\n    };\n  }\n\n  Layout.prototype.on = function (e, listener) {\n    if (!this.event) this.event = {};\n\n    if (typeof e === 'string') {\n      this.event[EventType[e]] = listener;\n    } else {\n      this.event[e] = listener;\n    }\n\n    return this;\n  };\n\n  Layout.prototype.trigger = function (e) {\n    if (this.event && typeof this.event[e.type] !== 'undefined') {\n      this.event[e.type](e);\n    }\n  };\n\n  Layout.prototype.kick = function () {\n    while (!this.tick()) {\n      ;\n    }\n  };\n\n  Layout.prototype.tick = function () {\n    if (this._alpha < this._threshold) {\n      this._running = false;\n      this.trigger({\n        type: EventType.end,\n        alpha: this._alpha = 0,\n        stress: this._lastStress\n      });\n      return true;\n    }\n\n    var n = this._nodes.length,\n        m = this._links.length;\n    var o, i;\n\n    this._descent.locks.clear();\n\n    for (i = 0; i < n; ++i) {\n      o = this._nodes[i];\n\n      if (o.fixed) {\n        if (typeof o.px === 'undefined' || typeof o.py === 'undefined') {\n          o.px = o.x;\n          o.py = o.y;\n        }\n\n        var p = [o.px, o.py];\n\n        this._descent.locks.add(i, p);\n      }\n    }\n\n    var s1 = this._descent.rungeKutta();\n\n    if (s1 === 0) {\n      this._alpha = 0;\n    } else if (typeof this._lastStress !== 'undefined') {\n      this._alpha = s1;\n    }\n\n    this._lastStress = s1;\n    this.updateNodePositions();\n    this.trigger({\n      type: EventType.tick,\n      alpha: this._alpha,\n      stress: this._lastStress\n    });\n    return false;\n  };\n\n  Layout.prototype.updateNodePositions = function () {\n    var x = this._descent.x[0],\n        y = this._descent.x[1];\n    var o,\n        i = this._nodes.length;\n\n    while (i--) {\n      o = this._nodes[i];\n      o.x = x[i];\n      o.y = y[i];\n    }\n  };\n\n  Layout.prototype.nodes = function (v) {\n    if (!v) {\n      if (this._nodes.length === 0 && this._links.length > 0) {\n        var n = 0;\n\n        this._links.forEach(function (l) {\n          n = Math.max(n, l.source, l.target);\n        });\n\n        this._nodes = new Array(++n);\n\n        for (var i = 0; i < n; ++i) {\n          this._nodes[i] = {};\n        }\n      }\n\n      return this._nodes;\n    }\n\n    this._nodes = v;\n    return this;\n  };\n\n  Layout.prototype.groups = function (x) {\n    var _this = this;\n\n    if (!x) return this._groups;\n    this._groups = x;\n    this._rootGroup = {};\n\n    this._groups.forEach(function (g) {\n      if (typeof g.padding === \"undefined\") g.padding = 1;\n\n      if (typeof g.leaves !== \"undefined\") {\n        g.leaves.forEach(function (v, i) {\n          if (typeof v === 'number') (g.leaves[i] = _this._nodes[v]).parent = g;\n        });\n      }\n\n      if (typeof g.groups !== \"undefined\") {\n        g.groups.forEach(function (gi, i) {\n          if (typeof gi === 'number') (g.groups[i] = _this._groups[gi]).parent = g;\n        });\n      }\n    });\n\n    this._rootGroup.leaves = this._nodes.filter(function (v) {\n      return typeof v.parent === 'undefined';\n    });\n    this._rootGroup.groups = this._groups.filter(function (g) {\n      return typeof g.parent === 'undefined';\n    });\n    return this;\n  };\n\n  Layout.prototype.powerGraphGroups = function (f) {\n    var g = powergraph.getGroups(this._nodes, this._links, this.linkAccessor, this._rootGroup);\n    this.groups(g.groups);\n    f(g);\n    return this;\n  };\n\n  Layout.prototype.avoidOverlaps = function (v) {\n    if (!arguments.length) return this._avoidOverlaps;\n    this._avoidOverlaps = v;\n    return this;\n  };\n\n  Layout.prototype.handleDisconnected = function (v) {\n    if (!arguments.length) return this._handleDisconnected;\n    this._handleDisconnected = v;\n    return this;\n  };\n\n  Layout.prototype.flowLayout = function (axis, minSeparation) {\n    if (!arguments.length) axis = 'y';\n    this._directedLinkConstraints = {\n      axis: axis,\n      getMinSeparation: typeof minSeparation === 'number' ? function () {\n        return minSeparation;\n      } : minSeparation\n    };\n    return this;\n  };\n\n  Layout.prototype.links = function (x) {\n    if (!arguments.length) return this._links;\n    this._links = x;\n    return this;\n  };\n\n  Layout.prototype.constraints = function (c) {\n    if (!arguments.length) return this._constraints;\n    this._constraints = c;\n    return this;\n  };\n\n  Layout.prototype.distanceMatrix = function (d) {\n    if (!arguments.length) return this._distanceMatrix;\n    this._distanceMatrix = d;\n    return this;\n  };\n\n  Layout.prototype.size = function (x) {\n    if (!x) return this._canvasSize;\n    this._canvasSize = x;\n    return this;\n  };\n\n  Layout.prototype.defaultNodeSize = function (x) {\n    if (!x) return this._defaultNodeSize;\n    this._defaultNodeSize = x;\n    return this;\n  };\n\n  Layout.prototype.groupCompactness = function (x) {\n    if (!x) return this._groupCompactness;\n    this._groupCompactness = x;\n    return this;\n  };\n\n  Layout.prototype.linkDistance = function (x) {\n    if (!x) {\n      return this._linkDistance;\n    }\n\n    this._linkDistance = typeof x === \"function\" ? x : +x;\n    this._linkLengthCalculator = null;\n    return this;\n  };\n\n  Layout.prototype.linkType = function (f) {\n    this._linkType = f;\n    return this;\n  };\n\n  Layout.prototype.convergenceThreshold = function (x) {\n    if (!x) return this._threshold;\n    this._threshold = typeof x === \"function\" ? x : +x;\n    return this;\n  };\n\n  Layout.prototype.alpha = function (x) {\n    if (!arguments.length) return this._alpha;else {\n      x = +x;\n\n      if (this._alpha) {\n        if (x > 0) this._alpha = x;else this._alpha = 0;\n      } else if (x > 0) {\n        if (!this._running) {\n          this._running = true;\n          this.trigger({\n            type: EventType.start,\n            alpha: this._alpha = x\n          });\n          this.kick();\n        }\n      }\n\n      return this;\n    }\n  };\n\n  Layout.prototype.getLinkLength = function (link) {\n    return typeof this._linkDistance === \"function\" ? +this._linkDistance(link) : this._linkDistance;\n  };\n\n  Layout.setLinkLength = function (link, length) {\n    link.length = length;\n  };\n\n  Layout.prototype.getLinkType = function (link) {\n    return typeof this._linkType === \"function\" ? this._linkType(link) : 0;\n  };\n\n  Layout.prototype.symmetricDiffLinkLengths = function (idealLength, w) {\n    var _this = this;\n\n    if (w === void 0) {\n      w = 1;\n    }\n\n    this.linkDistance(function (l) {\n      return idealLength * l.length;\n    });\n\n    this._linkLengthCalculator = function () {\n      return linklengths_1.symmetricDiffLinkLengths(_this._links, _this.linkAccessor, w);\n    };\n\n    return this;\n  };\n\n  Layout.prototype.jaccardLinkLengths = function (idealLength, w) {\n    var _this = this;\n\n    if (w === void 0) {\n      w = 1;\n    }\n\n    this.linkDistance(function (l) {\n      return idealLength * l.length;\n    });\n\n    this._linkLengthCalculator = function () {\n      return linklengths_1.jaccardLinkLengths(_this._links, _this.linkAccessor, w);\n    };\n\n    return this;\n  };\n\n  Layout.prototype.start = function (initialUnconstrainedIterations, initialUserConstraintIterations, initialAllConstraintsIterations, gridSnapIterations, keepRunning, centerGraph) {\n    var _this = this;\n\n    if (initialUnconstrainedIterations === void 0) {\n      initialUnconstrainedIterations = 0;\n    }\n\n    if (initialUserConstraintIterations === void 0) {\n      initialUserConstraintIterations = 0;\n    }\n\n    if (initialAllConstraintsIterations === void 0) {\n      initialAllConstraintsIterations = 0;\n    }\n\n    if (gridSnapIterations === void 0) {\n      gridSnapIterations = 0;\n    }\n\n    if (keepRunning === void 0) {\n      keepRunning = true;\n    }\n\n    if (centerGraph === void 0) {\n      centerGraph = true;\n    }\n\n    var i,\n        j,\n        n = this.nodes().length,\n        N = n + 2 * this._groups.length,\n        m = this._links.length,\n        w = this._canvasSize[0],\n        h = this._canvasSize[1];\n    var x = new Array(N),\n        y = new Array(N);\n    var G = null;\n    var ao = this._avoidOverlaps;\n\n    this._nodes.forEach(function (v, i) {\n      v.index = i;\n\n      if (typeof v.x === 'undefined') {\n        v.x = w / 2, v.y = h / 2;\n      }\n\n      x[i] = v.x, y[i] = v.y;\n    });\n\n    if (this._linkLengthCalculator) this._linkLengthCalculator();\n    var distances;\n\n    if (this._distanceMatrix) {\n      distances = this._distanceMatrix;\n    } else {\n      distances = new shortestpaths_1.Calculator(N, this._links, Layout.getSourceIndex, Layout.getTargetIndex, function (l) {\n        return _this.getLinkLength(l);\n      }).DistanceMatrix();\n      G = descent_1.Descent.createSquareMatrix(N, function () {\n        return 2;\n      });\n\n      this._links.forEach(function (l) {\n        if (typeof l.source == \"number\") l.source = _this._nodes[l.source];\n        if (typeof l.target == \"number\") l.target = _this._nodes[l.target];\n      });\n\n      this._links.forEach(function (e) {\n        var u = Layout.getSourceIndex(e),\n            v = Layout.getTargetIndex(e);\n        G[u][v] = G[v][u] = e.weight || 1;\n      });\n    }\n\n    var D = descent_1.Descent.createSquareMatrix(N, function (i, j) {\n      return distances[i][j];\n    });\n\n    if (this._rootGroup && typeof this._rootGroup.groups !== 'undefined') {\n      var i = n;\n\n      var addAttraction = function addAttraction(i, j, strength, idealDistance) {\n        G[i][j] = G[j][i] = strength;\n        D[i][j] = D[j][i] = idealDistance;\n      };\n\n      this._groups.forEach(function (g) {\n        addAttraction(i, i + 1, _this._groupCompactness, 0.1);\n        x[i] = 0, y[i++] = 0;\n        x[i] = 0, y[i++] = 0;\n      });\n    } else this._rootGroup = {\n      leaves: this._nodes,\n      groups: []\n    };\n\n    var curConstraints = this._constraints || [];\n\n    if (this._directedLinkConstraints) {\n      this.linkAccessor.getMinSeparation = this._directedLinkConstraints.getMinSeparation;\n      curConstraints = curConstraints.concat(linklengths_1.generateDirectedEdgeConstraints(n, this._links, this._directedLinkConstraints.axis, this.linkAccessor));\n    }\n\n    this.avoidOverlaps(false);\n    this._descent = new descent_1.Descent([x, y], D);\n\n    this._descent.locks.clear();\n\n    for (var i = 0; i < n; ++i) {\n      var o = this._nodes[i];\n\n      if (o.fixed) {\n        o.px = o.x;\n        o.py = o.y;\n        var p = [o.x, o.y];\n\n        this._descent.locks.add(i, p);\n      }\n    }\n\n    this._descent.threshold = this._threshold;\n    this.initialLayout(initialUnconstrainedIterations, x, y);\n    if (curConstraints.length > 0) this._descent.project = new rectangle_1.Projection(this._nodes, this._groups, this._rootGroup, curConstraints).projectFunctions();\n\n    this._descent.run(initialUserConstraintIterations);\n\n    this.separateOverlappingComponents(w, h, centerGraph);\n    this.avoidOverlaps(ao);\n\n    if (ao) {\n      this._nodes.forEach(function (v, i) {\n        v.x = x[i], v.y = y[i];\n      });\n\n      this._descent.project = new rectangle_1.Projection(this._nodes, this._groups, this._rootGroup, curConstraints, true).projectFunctions();\n\n      this._nodes.forEach(function (v, i) {\n        x[i] = v.x, y[i] = v.y;\n      });\n    }\n\n    this._descent.G = G;\n\n    this._descent.run(initialAllConstraintsIterations);\n\n    if (gridSnapIterations) {\n      this._descent.snapStrength = 1000;\n      this._descent.snapGridSize = this._nodes[0].width;\n      this._descent.numGridSnapNodes = n;\n      this._descent.scaleSnapByMaxH = n != N;\n      var G0 = descent_1.Descent.createSquareMatrix(N, function (i, j) {\n        if (i >= n || j >= n) return G[i][j];\n        return 0;\n      });\n      this._descent.G = G0;\n\n      this._descent.run(gridSnapIterations);\n    }\n\n    this.updateNodePositions();\n    this.separateOverlappingComponents(w, h, centerGraph);\n    return keepRunning ? this.resume() : this;\n  };\n\n  Layout.prototype.initialLayout = function (iterations, x, y) {\n    if (this._groups.length > 0 && iterations > 0) {\n      var n = this._nodes.length;\n\n      var edges = this._links.map(function (e) {\n        return {\n          source: e.source.index,\n          target: e.target.index\n        };\n      });\n\n      var vs = this._nodes.map(function (v) {\n        return {\n          index: v.index\n        };\n      });\n\n      this._groups.forEach(function (g, i) {\n        vs.push({\n          index: g.index = n + i\n        });\n      });\n\n      this._groups.forEach(function (g, i) {\n        if (typeof g.leaves !== 'undefined') g.leaves.forEach(function (v) {\n          return edges.push({\n            source: g.index,\n            target: v.index\n          });\n        });\n        if (typeof g.groups !== 'undefined') g.groups.forEach(function (gg) {\n          return edges.push({\n            source: g.index,\n            target: gg.index\n          });\n        });\n      });\n\n      new Layout().size(this.size()).nodes(vs).links(edges).avoidOverlaps(false).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(iterations, 0, 0, 0, false);\n\n      this._nodes.forEach(function (v) {\n        x[v.index] = vs[v.index].x;\n        y[v.index] = vs[v.index].y;\n      });\n    } else {\n      this._descent.run(iterations);\n    }\n  };\n\n  Layout.prototype.separateOverlappingComponents = function (width, height, centerGraph) {\n    var _this = this;\n\n    if (centerGraph === void 0) {\n      centerGraph = true;\n    }\n\n    if (!this._distanceMatrix && this._handleDisconnected) {\n      var x_1 = this._descent.x[0],\n          y_1 = this._descent.x[1];\n\n      this._nodes.forEach(function (v, i) {\n        v.x = x_1[i], v.y = y_1[i];\n      });\n\n      var graphs = handledisconnected_1.separateGraphs(this._nodes, this._links);\n      handledisconnected_1.applyPacking(graphs, width, height, this._defaultNodeSize, 1, centerGraph);\n\n      this._nodes.forEach(function (v, i) {\n        _this._descent.x[0][i] = v.x, _this._descent.x[1][i] = v.y;\n\n        if (v.bounds) {\n          v.bounds.setXCentre(v.x);\n          v.bounds.setYCentre(v.y);\n        }\n      });\n    }\n  };\n\n  Layout.prototype.resume = function () {\n    return this.alpha(0.1);\n  };\n\n  Layout.prototype.stop = function () {\n    return this.alpha(0);\n  };\n\n  Layout.prototype.prepareEdgeRouting = function (nodeMargin) {\n    if (nodeMargin === void 0) {\n      nodeMargin = 0;\n    }\n\n    this._visibilityGraph = new geom_1.TangentVisibilityGraph(this._nodes.map(function (v) {\n      return v.bounds.inflate(-nodeMargin).vertices();\n    }));\n  };\n\n  Layout.prototype.routeEdge = function (edge, ah, draw) {\n    if (ah === void 0) {\n      ah = 5;\n    }\n\n    var lineData = [];\n    var vg2 = new geom_1.TangentVisibilityGraph(this._visibilityGraph.P, {\n      V: this._visibilityGraph.V,\n      E: this._visibilityGraph.E\n    }),\n        port1 = {\n      x: edge.source.x,\n      y: edge.source.y\n    },\n        port2 = {\n      x: edge.target.x,\n      y: edge.target.y\n    },\n        start = vg2.addPoint(port1, edge.source.index),\n        end = vg2.addPoint(port2, edge.target.index);\n    vg2.addEdgeIfVisible(port1, port2, edge.source.index, edge.target.index);\n\n    if (typeof draw !== 'undefined') {\n      draw(vg2);\n    }\n\n    var sourceInd = function sourceInd(e) {\n      return e.source.id;\n    },\n        targetInd = function targetInd(e) {\n      return e.target.id;\n    },\n        length = function length(e) {\n      return e.length();\n    },\n        spCalc = new shortestpaths_1.Calculator(vg2.V.length, vg2.E, sourceInd, targetInd, length),\n        shortestPath = spCalc.PathFromNodeToNode(start.id, end.id);\n\n    if (shortestPath.length === 1 || shortestPath.length === vg2.V.length) {\n      var route = rectangle_1.makeEdgeBetween(edge.source.innerBounds, edge.target.innerBounds, ah);\n      lineData = [route.sourceIntersection, route.arrowStart];\n    } else {\n      var n = shortestPath.length - 2,\n          p = vg2.V[shortestPath[n]].p,\n          q = vg2.V[shortestPath[0]].p,\n          lineData = [edge.source.innerBounds.rayIntersection(p.x, p.y)];\n\n      for (var i = n; i >= 0; --i) {\n        lineData.push(vg2.V[shortestPath[i]].p);\n      }\n\n      lineData.push(rectangle_1.makeEdgeTo(q, edge.target.innerBounds, ah));\n    }\n\n    return lineData;\n  };\n\n  Layout.getSourceIndex = function (e) {\n    return typeof e.source === 'number' ? e.source : e.source.index;\n  };\n\n  Layout.getTargetIndex = function (e) {\n    return typeof e.target === 'number' ? e.target : e.target.index;\n  };\n\n  Layout.linkId = function (e) {\n    return Layout.getSourceIndex(e) + \"-\" + Layout.getTargetIndex(e);\n  };\n\n  Layout.dragStart = function (d) {\n    if (isGroup(d)) {\n      Layout.storeOffset(d, Layout.dragOrigin(d));\n    } else {\n      Layout.stopNode(d);\n      d.fixed |= 2;\n    }\n  };\n\n  Layout.stopNode = function (v) {\n    v.px = v.x;\n    v.py = v.y;\n  };\n\n  Layout.storeOffset = function (d, origin) {\n    if (typeof d.leaves !== 'undefined') {\n      d.leaves.forEach(function (v) {\n        v.fixed |= 2;\n        Layout.stopNode(v);\n        v._dragGroupOffsetX = v.x - origin.x;\n        v._dragGroupOffsetY = v.y - origin.y;\n      });\n    }\n\n    if (typeof d.groups !== 'undefined') {\n      d.groups.forEach(function (g) {\n        return Layout.storeOffset(g, origin);\n      });\n    }\n  };\n\n  Layout.dragOrigin = function (d) {\n    if (isGroup(d)) {\n      return {\n        x: d.bounds.cx(),\n        y: d.bounds.cy()\n      };\n    } else {\n      return d;\n    }\n  };\n\n  Layout.drag = function (d, position) {\n    if (isGroup(d)) {\n      if (typeof d.leaves !== 'undefined') {\n        d.leaves.forEach(function (v) {\n          d.bounds.setXCentre(position.x);\n          d.bounds.setYCentre(position.y);\n          v.px = v._dragGroupOffsetX + position.x;\n          v.py = v._dragGroupOffsetY + position.y;\n        });\n      }\n\n      if (typeof d.groups !== 'undefined') {\n        d.groups.forEach(function (g) {\n          return Layout.drag(g, position);\n        });\n      }\n    } else {\n      d.px = position.x;\n      d.py = position.y;\n    }\n  };\n\n  Layout.dragEnd = function (d) {\n    if (isGroup(d)) {\n      if (typeof d.leaves !== 'undefined') {\n        d.leaves.forEach(function (v) {\n          Layout.dragEnd(v);\n          delete v._dragGroupOffsetX;\n          delete v._dragGroupOffsetY;\n        });\n      }\n\n      if (typeof d.groups !== 'undefined') {\n        d.groups.forEach(Layout.dragEnd);\n      }\n    } else {\n      d.fixed &= ~6;\n    }\n  };\n\n  Layout.mouseOver = function (d) {\n    d.fixed |= 4;\n    d.px = d.x, d.py = d.y;\n  };\n\n  Layout.mouseOut = function (d) {\n    d.fixed &= ~4;\n  };\n\n  return Layout;\n}();\n\nexports.Layout = Layout;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar vpsc_1 = require(\"./vpsc\");\n\nvar rbtree_1 = require(\"./rbtree\");\n\nfunction computeGroupBounds(g) {\n  g.bounds = typeof g.leaves !== \"undefined\" ? g.leaves.reduce(function (r, c) {\n    return c.bounds.union(r);\n  }, Rectangle.empty()) : Rectangle.empty();\n  if (typeof g.groups !== \"undefined\") g.bounds = g.groups.reduce(function (r, c) {\n    return computeGroupBounds(c).union(r);\n  }, g.bounds);\n  g.bounds = g.bounds.inflate(g.padding);\n  return g.bounds;\n}\n\nexports.computeGroupBounds = computeGroupBounds;\n\nvar Rectangle = function () {\n  function Rectangle(x, X, y, Y) {\n    this.x = x;\n    this.X = X;\n    this.y = y;\n    this.Y = Y;\n  }\n\n  Rectangle.empty = function () {\n    return new Rectangle(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY);\n  };\n\n  Rectangle.prototype.cx = function () {\n    return (this.x + this.X) / 2;\n  };\n\n  Rectangle.prototype.cy = function () {\n    return (this.y + this.Y) / 2;\n  };\n\n  Rectangle.prototype.overlapX = function (r) {\n    var ux = this.cx(),\n        vx = r.cx();\n    if (ux <= vx && r.x < this.X) return this.X - r.x;\n    if (vx <= ux && this.x < r.X) return r.X - this.x;\n    return 0;\n  };\n\n  Rectangle.prototype.overlapY = function (r) {\n    var uy = this.cy(),\n        vy = r.cy();\n    if (uy <= vy && r.y < this.Y) return this.Y - r.y;\n    if (vy <= uy && this.y < r.Y) return r.Y - this.y;\n    return 0;\n  };\n\n  Rectangle.prototype.setXCentre = function (cx) {\n    var dx = cx - this.cx();\n    this.x += dx;\n    this.X += dx;\n  };\n\n  Rectangle.prototype.setYCentre = function (cy) {\n    var dy = cy - this.cy();\n    this.y += dy;\n    this.Y += dy;\n  };\n\n  Rectangle.prototype.width = function () {\n    return this.X - this.x;\n  };\n\n  Rectangle.prototype.height = function () {\n    return this.Y - this.y;\n  };\n\n  Rectangle.prototype.union = function (r) {\n    return new Rectangle(Math.min(this.x, r.x), Math.max(this.X, r.X), Math.min(this.y, r.y), Math.max(this.Y, r.Y));\n  };\n\n  Rectangle.prototype.lineIntersections = function (x1, y1, x2, y2) {\n    var sides = [[this.x, this.y, this.X, this.y], [this.X, this.y, this.X, this.Y], [this.X, this.Y, this.x, this.Y], [this.x, this.Y, this.x, this.y]];\n    var intersections = [];\n\n    for (var i = 0; i < 4; ++i) {\n      var r = Rectangle.lineIntersection(x1, y1, x2, y2, sides[i][0], sides[i][1], sides[i][2], sides[i][3]);\n      if (r !== null) intersections.push({\n        x: r.x,\n        y: r.y\n      });\n    }\n\n    return intersections;\n  };\n\n  Rectangle.prototype.rayIntersection = function (x2, y2) {\n    var ints = this.lineIntersections(this.cx(), this.cy(), x2, y2);\n    return ints.length > 0 ? ints[0] : null;\n  };\n\n  Rectangle.prototype.vertices = function () {\n    return [{\n      x: this.x,\n      y: this.y\n    }, {\n      x: this.X,\n      y: this.y\n    }, {\n      x: this.X,\n      y: this.Y\n    }, {\n      x: this.x,\n      y: this.Y\n    }];\n  };\n\n  Rectangle.lineIntersection = function (x1, y1, x2, y2, x3, y3, x4, y4) {\n    var dx12 = x2 - x1,\n        dx34 = x4 - x3,\n        dy12 = y2 - y1,\n        dy34 = y4 - y3,\n        denominator = dy34 * dx12 - dx34 * dy12;\n    if (denominator == 0) return null;\n    var dx31 = x1 - x3,\n        dy31 = y1 - y3,\n        numa = dx34 * dy31 - dy34 * dx31,\n        a = numa / denominator,\n        numb = dx12 * dy31 - dy12 * dx31,\n        b = numb / denominator;\n\n    if (a >= 0 && a <= 1 && b >= 0 && b <= 1) {\n      return {\n        x: x1 + a * dx12,\n        y: y1 + a * dy12\n      };\n    }\n\n    return null;\n  };\n\n  Rectangle.prototype.inflate = function (pad) {\n    return new Rectangle(this.x - pad, this.X + pad, this.y - pad, this.Y + pad);\n  };\n\n  return Rectangle;\n}();\n\nexports.Rectangle = Rectangle;\n\nfunction makeEdgeBetween(source, target, ah) {\n  var si = source.rayIntersection(target.cx(), target.cy()) || {\n    x: source.cx(),\n    y: source.cy()\n  },\n      ti = target.rayIntersection(source.cx(), source.cy()) || {\n    x: target.cx(),\n    y: target.cy()\n  },\n      dx = ti.x - si.x,\n      dy = ti.y - si.y,\n      l = Math.sqrt(dx * dx + dy * dy),\n      al = l - ah;\n  return {\n    sourceIntersection: si,\n    targetIntersection: ti,\n    arrowStart: {\n      x: si.x + al * dx / l,\n      y: si.y + al * dy / l\n    }\n  };\n}\n\nexports.makeEdgeBetween = makeEdgeBetween;\n\nfunction makeEdgeTo(s, target, ah) {\n  var ti = target.rayIntersection(s.x, s.y);\n  if (!ti) ti = {\n    x: target.cx(),\n    y: target.cy()\n  };\n  var dx = ti.x - s.x,\n      dy = ti.y - s.y,\n      l = Math.sqrt(dx * dx + dy * dy);\n  return {\n    x: ti.x - ah * dx / l,\n    y: ti.y - ah * dy / l\n  };\n}\n\nexports.makeEdgeTo = makeEdgeTo;\n\nvar Node = function () {\n  function Node(v, r, pos) {\n    this.v = v;\n    this.r = r;\n    this.pos = pos;\n    this.prev = makeRBTree();\n    this.next = makeRBTree();\n  }\n\n  return Node;\n}();\n\nvar Event = function () {\n  function Event(isOpen, v, pos) {\n    this.isOpen = isOpen;\n    this.v = v;\n    this.pos = pos;\n  }\n\n  return Event;\n}();\n\nfunction compareEvents(a, b) {\n  if (a.pos > b.pos) {\n    return 1;\n  }\n\n  if (a.pos < b.pos) {\n    return -1;\n  }\n\n  if (a.isOpen) {\n    return -1;\n  }\n\n  if (b.isOpen) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction makeRBTree() {\n  return new rbtree_1.RBTree(function (a, b) {\n    return a.pos - b.pos;\n  });\n}\n\nvar xRect = {\n  getCentre: function getCentre(r) {\n    return r.cx();\n  },\n  getOpen: function getOpen(r) {\n    return r.y;\n  },\n  getClose: function getClose(r) {\n    return r.Y;\n  },\n  getSize: function getSize(r) {\n    return r.width();\n  },\n  makeRect: function makeRect(open, close, center, size) {\n    return new Rectangle(center - size / 2, center + size / 2, open, close);\n  },\n  findNeighbours: findXNeighbours\n};\nvar yRect = {\n  getCentre: function getCentre(r) {\n    return r.cy();\n  },\n  getOpen: function getOpen(r) {\n    return r.x;\n  },\n  getClose: function getClose(r) {\n    return r.X;\n  },\n  getSize: function getSize(r) {\n    return r.height();\n  },\n  makeRect: function makeRect(open, close, center, size) {\n    return new Rectangle(open, close, center - size / 2, center + size / 2);\n  },\n  findNeighbours: findYNeighbours\n};\n\nfunction generateGroupConstraints(root, f, minSep, isContained) {\n  if (isContained === void 0) {\n    isContained = false;\n  }\n\n  var padding = root.padding,\n      gn = typeof root.groups !== 'undefined' ? root.groups.length : 0,\n      ln = typeof root.leaves !== 'undefined' ? root.leaves.length : 0,\n      childConstraints = !gn ? [] : root.groups.reduce(function (ccs, g) {\n    return ccs.concat(generateGroupConstraints(g, f, minSep, true));\n  }, []),\n      n = (isContained ? 2 : 0) + ln + gn,\n      vs = new Array(n),\n      rs = new Array(n),\n      i = 0,\n      add = function add(r, v) {\n    rs[i] = r;\n    vs[i++] = v;\n  };\n\n  if (isContained) {\n    var b = root.bounds,\n        c = f.getCentre(b),\n        s = f.getSize(b) / 2,\n        open = f.getOpen(b),\n        close = f.getClose(b),\n        min = c - s + padding / 2,\n        max = c + s - padding / 2;\n    root.minVar.desiredPosition = min;\n    add(f.makeRect(open, close, min, padding), root.minVar);\n    root.maxVar.desiredPosition = max;\n    add(f.makeRect(open, close, max, padding), root.maxVar);\n  }\n\n  if (ln) root.leaves.forEach(function (l) {\n    return add(l.bounds, l.variable);\n  });\n  if (gn) root.groups.forEach(function (g) {\n    var b = g.bounds;\n    add(f.makeRect(f.getOpen(b), f.getClose(b), f.getCentre(b), f.getSize(b)), g.minVar);\n  });\n  var cs = generateConstraints(rs, vs, f, minSep);\n\n  if (gn) {\n    vs.forEach(function (v) {\n      v.cOut = [], v.cIn = [];\n    });\n    cs.forEach(function (c) {\n      c.left.cOut.push(c), c.right.cIn.push(c);\n    });\n    root.groups.forEach(function (g) {\n      var gapAdjustment = (g.padding - f.getSize(g.bounds)) / 2;\n      g.minVar.cIn.forEach(function (c) {\n        return c.gap += gapAdjustment;\n      });\n      g.minVar.cOut.forEach(function (c) {\n        c.left = g.maxVar;\n        c.gap += gapAdjustment;\n      });\n    });\n  }\n\n  return childConstraints.concat(cs);\n}\n\nfunction generateConstraints(rs, vars, rect, minSep) {\n  var i,\n      n = rs.length;\n  var N = 2 * n;\n  console.assert(vars.length >= n);\n  var events = new Array(N);\n\n  for (i = 0; i < n; ++i) {\n    var r = rs[i];\n    var v = new Node(vars[i], r, rect.getCentre(r));\n    events[i] = new Event(true, v, rect.getOpen(r));\n    events[i + n] = new Event(false, v, rect.getClose(r));\n  }\n\n  events.sort(compareEvents);\n  var cs = new Array();\n  var scanline = makeRBTree();\n\n  for (i = 0; i < N; ++i) {\n    var e = events[i];\n    var v = e.v;\n\n    if (e.isOpen) {\n      scanline.insert(v);\n      rect.findNeighbours(v, scanline);\n    } else {\n      scanline.remove(v);\n\n      var makeConstraint = function makeConstraint(l, r) {\n        var sep = (rect.getSize(l.r) + rect.getSize(r.r)) / 2 + minSep;\n        cs.push(new vpsc_1.Constraint(l.v, r.v, sep));\n      };\n\n      var visitNeighbours = function visitNeighbours(forward, reverse, mkcon) {\n        var u,\n            it = v[forward].iterator();\n\n        while ((u = it[forward]()) !== null) {\n          mkcon(u, v);\n          u[reverse].remove(v);\n        }\n      };\n\n      visitNeighbours(\"prev\", \"next\", function (u, v) {\n        return makeConstraint(u, v);\n      });\n      visitNeighbours(\"next\", \"prev\", function (u, v) {\n        return makeConstraint(v, u);\n      });\n    }\n  }\n\n  console.assert(scanline.size === 0);\n  return cs;\n}\n\nfunction findXNeighbours(v, scanline) {\n  var f = function f(forward, reverse) {\n    var it = scanline.findIter(v);\n    var u;\n\n    while ((u = it[forward]()) !== null) {\n      var uovervX = u.r.overlapX(v.r);\n\n      if (uovervX <= 0 || uovervX <= u.r.overlapY(v.r)) {\n        v[forward].insert(u);\n        u[reverse].insert(v);\n      }\n\n      if (uovervX <= 0) {\n        break;\n      }\n    }\n  };\n\n  f(\"next\", \"prev\");\n  f(\"prev\", \"next\");\n}\n\nfunction findYNeighbours(v, scanline) {\n  var f = function f(forward, reverse) {\n    var u = scanline.findIter(v)[forward]();\n\n    if (u !== null && u.r.overlapX(v.r) > 0) {\n      v[forward].insert(u);\n      u[reverse].insert(v);\n    }\n  };\n\n  f(\"next\", \"prev\");\n  f(\"prev\", \"next\");\n}\n\nfunction generateXConstraints(rs, vars) {\n  return generateConstraints(rs, vars, xRect, 1e-6);\n}\n\nexports.generateXConstraints = generateXConstraints;\n\nfunction generateYConstraints(rs, vars) {\n  return generateConstraints(rs, vars, yRect, 1e-6);\n}\n\nexports.generateYConstraints = generateYConstraints;\n\nfunction generateXGroupConstraints(root) {\n  return generateGroupConstraints(root, xRect, 1e-6);\n}\n\nexports.generateXGroupConstraints = generateXGroupConstraints;\n\nfunction generateYGroupConstraints(root) {\n  return generateGroupConstraints(root, yRect, 1e-6);\n}\n\nexports.generateYGroupConstraints = generateYGroupConstraints;\n\nfunction removeOverlaps(rs) {\n  var vs = rs.map(function (r) {\n    return new vpsc_1.Variable(r.cx());\n  });\n  var cs = generateXConstraints(rs, vs);\n  var solver = new vpsc_1.Solver(vs, cs);\n  solver.solve();\n  vs.forEach(function (v, i) {\n    return rs[i].setXCentre(v.position());\n  });\n  vs = rs.map(function (r) {\n    return new vpsc_1.Variable(r.cy());\n  });\n  cs = generateYConstraints(rs, vs);\n  solver = new vpsc_1.Solver(vs, cs);\n  solver.solve();\n  vs.forEach(function (v, i) {\n    return rs[i].setYCentre(v.position());\n  });\n}\n\nexports.removeOverlaps = removeOverlaps;\n\nvar IndexedVariable = function (_super) {\n  __extends(IndexedVariable, _super);\n\n  function IndexedVariable(index, w) {\n    var _this = _super.call(this, 0, w) || this;\n\n    _this.index = index;\n    return _this;\n  }\n\n  return IndexedVariable;\n}(vpsc_1.Variable);\n\nexports.IndexedVariable = IndexedVariable;\n\nvar Projection = function () {\n  function Projection(nodes, groups, rootGroup, constraints, avoidOverlaps) {\n    var _this = this;\n\n    if (rootGroup === void 0) {\n      rootGroup = null;\n    }\n\n    if (constraints === void 0) {\n      constraints = null;\n    }\n\n    if (avoidOverlaps === void 0) {\n      avoidOverlaps = false;\n    }\n\n    this.nodes = nodes;\n    this.groups = groups;\n    this.rootGroup = rootGroup;\n    this.avoidOverlaps = avoidOverlaps;\n    this.variables = nodes.map(function (v, i) {\n      return v.variable = new IndexedVariable(i, 1);\n    });\n    if (constraints) this.createConstraints(constraints);\n\n    if (avoidOverlaps && rootGroup && typeof rootGroup.groups !== 'undefined') {\n      nodes.forEach(function (v) {\n        if (!v.width || !v.height) {\n          v.bounds = new Rectangle(v.x, v.x, v.y, v.y);\n          return;\n        }\n\n        var w2 = v.width / 2,\n            h2 = v.height / 2;\n        v.bounds = new Rectangle(v.x - w2, v.x + w2, v.y - h2, v.y + h2);\n      });\n      computeGroupBounds(rootGroup);\n      var i = nodes.length;\n      groups.forEach(function (g) {\n        _this.variables[i] = g.minVar = new IndexedVariable(i++, typeof g.stiffness !== \"undefined\" ? g.stiffness : 0.01);\n        _this.variables[i] = g.maxVar = new IndexedVariable(i++, typeof g.stiffness !== \"undefined\" ? g.stiffness : 0.01);\n      });\n    }\n  }\n\n  Projection.prototype.createSeparation = function (c) {\n    return new vpsc_1.Constraint(this.nodes[c.left].variable, this.nodes[c.right].variable, c.gap, typeof c.equality !== \"undefined\" ? c.equality : false);\n  };\n\n  Projection.prototype.makeFeasible = function (c) {\n    var _this = this;\n\n    if (!this.avoidOverlaps) return;\n    var axis = 'x',\n        dim = 'width';\n    if (c.axis === 'x') axis = 'y', dim = 'height';\n    var vs = c.offsets.map(function (o) {\n      return _this.nodes[o.node];\n    }).sort(function (a, b) {\n      return a[axis] - b[axis];\n    });\n    var p = null;\n    vs.forEach(function (v) {\n      if (p) {\n        var nextPos = p[axis] + p[dim];\n\n        if (nextPos > v[axis]) {\n          v[axis] = nextPos;\n        }\n      }\n\n      p = v;\n    });\n  };\n\n  Projection.prototype.createAlignment = function (c) {\n    var _this = this;\n\n    var u = this.nodes[c.offsets[0].node].variable;\n    this.makeFeasible(c);\n    var cs = c.axis === 'x' ? this.xConstraints : this.yConstraints;\n    c.offsets.slice(1).forEach(function (o) {\n      var v = _this.nodes[o.node].variable;\n      cs.push(new vpsc_1.Constraint(u, v, o.offset, true));\n    });\n  };\n\n  Projection.prototype.createConstraints = function (constraints) {\n    var _this = this;\n\n    var isSep = function isSep(c) {\n      return typeof c.type === 'undefined' || c.type === 'separation';\n    };\n\n    this.xConstraints = constraints.filter(function (c) {\n      return c.axis === \"x\" && isSep(c);\n    }).map(function (c) {\n      return _this.createSeparation(c);\n    });\n    this.yConstraints = constraints.filter(function (c) {\n      return c.axis === \"y\" && isSep(c);\n    }).map(function (c) {\n      return _this.createSeparation(c);\n    });\n    constraints.filter(function (c) {\n      return c.type === 'alignment';\n    }).forEach(function (c) {\n      return _this.createAlignment(c);\n    });\n  };\n\n  Projection.prototype.setupVariablesAndBounds = function (x0, y0, desired, getDesired) {\n    this.nodes.forEach(function (v, i) {\n      if (v.fixed) {\n        v.variable.weight = v.fixedWeight ? v.fixedWeight : 1000;\n        desired[i] = getDesired(v);\n      } else {\n        v.variable.weight = 1;\n      }\n\n      var w = (v.width || 0) / 2,\n          h = (v.height || 0) / 2;\n      var ix = x0[i],\n          iy = y0[i];\n      v.bounds = new Rectangle(ix - w, ix + w, iy - h, iy + h);\n    });\n  };\n\n  Projection.prototype.xProject = function (x0, y0, x) {\n    if (!this.rootGroup && !(this.avoidOverlaps || this.xConstraints)) return;\n    this.project(x0, y0, x0, x, function (v) {\n      return v.px;\n    }, this.xConstraints, generateXGroupConstraints, function (v) {\n      return v.bounds.setXCentre(x[v.variable.index] = v.variable.position());\n    }, function (g) {\n      var xmin = x[g.minVar.index] = g.minVar.position();\n      var xmax = x[g.maxVar.index] = g.maxVar.position();\n      var p2 = g.padding / 2;\n      g.bounds.x = xmin - p2;\n      g.bounds.X = xmax + p2;\n    });\n  };\n\n  Projection.prototype.yProject = function (x0, y0, y) {\n    if (!this.rootGroup && !this.yConstraints) return;\n    this.project(x0, y0, y0, y, function (v) {\n      return v.py;\n    }, this.yConstraints, generateYGroupConstraints, function (v) {\n      return v.bounds.setYCentre(y[v.variable.index] = v.variable.position());\n    }, function (g) {\n      var ymin = y[g.minVar.index] = g.minVar.position();\n      var ymax = y[g.maxVar.index] = g.maxVar.position();\n      var p2 = g.padding / 2;\n      g.bounds.y = ymin - p2;\n      ;\n      g.bounds.Y = ymax + p2;\n    });\n  };\n\n  Projection.prototype.projectFunctions = function () {\n    var _this = this;\n\n    return [function (x0, y0, x) {\n      return _this.xProject(x0, y0, x);\n    }, function (x0, y0, y) {\n      return _this.yProject(x0, y0, y);\n    }];\n  };\n\n  Projection.prototype.project = function (x0, y0, start, desired, getDesired, cs, generateConstraints, updateNodeBounds, updateGroupBounds) {\n    this.setupVariablesAndBounds(x0, y0, desired, getDesired);\n\n    if (this.rootGroup && this.avoidOverlaps) {\n      computeGroupBounds(this.rootGroup);\n      cs = cs.concat(generateConstraints(this.rootGroup));\n    }\n\n    this.solve(this.variables, cs, start, desired);\n    this.nodes.forEach(updateNodeBounds);\n\n    if (this.rootGroup && this.avoidOverlaps) {\n      this.groups.forEach(updateGroupBounds);\n      computeGroupBounds(this.rootGroup);\n    }\n  };\n\n  Projection.prototype.solve = function (vs, cs, starting, desired) {\n    var solver = new vpsc_1.Solver(vs, cs);\n    solver.setStartingPositions(starting);\n    solver.setDesiredPositions(desired);\n    solver.solve();\n  };\n\n  return Projection;\n}();\n\nexports.Projection = Projection;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\r\n * @param {Point} p1 first point\r\n * @param {Point} p2 second point\r\n *\r\n * @returns creates a vector (p1, p2) using p1,p2\r\n */\n\nfunction delta(p1, p2) {\n  return {\n    x: deltaX(p1, p2),\n    y: deltaY(p1, p2)\n  };\n}\n\nexports.delta = delta;\nexports.Δ = delta;\n/**\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n *\r\n * @returns {number} the Δ (x axis) between two points\r\n */\n\nfunction deltaX(p1, p2) {\n  return p2.x - p1.x;\n}\n\nexports.deltaX = deltaX;\nexports.Δx = deltaX;\n/**\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n *\r\n * @returns {number} the Δ (y axis) between two points\r\n */\n\nfunction deltaY(p1, p2) {\n  return p2.y - p1.y;\n}\n\nexports.deltaY = deltaY;\nexports.Δy = deltaY;\n/**\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n *\r\n * @returns {number} the norm (x axis) between two points\r\n */\n\nfunction normX(p1, p2) {\n  return Math.abs(deltaX(p1, p2));\n}\n\nexports.normX = normX;\n/**\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n *\r\n * @returns {number} the norm (y axis) between two points\r\n */\n\nfunction normY(p1, p2) {\n  return Math.abs(deltaY(p1, p2));\n}\n\nexports.normY = normY;\n/**\r\n * @returns Distance between two points\r\n * @param p1\r\n * @param p2\r\n */\n\nfunction norm(p1, p2) {\n  return Math.hypot(deltaX(p1, p2), deltaY(p1, p2));\n}\n\nexports.norm = norm;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar pqueue_1 = require(\"./pqueue\");\n\nvar Neighbour = function () {\n  function Neighbour(id, distance) {\n    this.id = id;\n    this.distance = distance;\n  }\n\n  return Neighbour;\n}();\n\nvar Node = function () {\n  function Node(id) {\n    this.id = id;\n    this.neighbours = [];\n  }\n\n  return Node;\n}();\n\nvar QueueEntry = function () {\n  function QueueEntry(node, prev, d) {\n    this.node = node;\n    this.prev = prev;\n    this.d = d;\n  }\n\n  return QueueEntry;\n}();\n\nvar Calculator = function () {\n  function Calculator(n, es, getSourceIndex, getTargetIndex, getLength) {\n    this.n = n;\n    this.es = es;\n    this.neighbours = new Array(this.n);\n    var i = this.n;\n\n    while (i--) {\n      this.neighbours[i] = new Node(i);\n    }\n\n    i = this.es.length;\n\n    while (i--) {\n      var e = this.es[i];\n      var u = getSourceIndex(e),\n          v = getTargetIndex(e);\n      var d = getLength(e);\n      this.neighbours[u].neighbours.push(new Neighbour(v, d));\n      this.neighbours[v].neighbours.push(new Neighbour(u, d));\n    }\n  }\n\n  Calculator.prototype.DistanceMatrix = function () {\n    var D = new Array(this.n);\n\n    for (var i = 0; i < this.n; ++i) {\n      D[i] = this.dijkstraNeighbours(i);\n    }\n\n    return D;\n  };\n\n  Calculator.prototype.DistancesFromNode = function (start) {\n    return this.dijkstraNeighbours(start);\n  };\n\n  Calculator.prototype.PathFromNodeToNode = function (start, end) {\n    return this.dijkstraNeighbours(start, end);\n  };\n\n  Calculator.prototype.PathFromNodeToNodeWithPrevCost = function (start, end, prevCost) {\n    var q = new pqueue_1.PriorityQueue(function (a, b) {\n      return a.d <= b.d;\n    }),\n        u = this.neighbours[start],\n        qu = new QueueEntry(u, null, 0),\n        visitedFrom = {};\n    q.push(qu);\n\n    while (!q.empty()) {\n      qu = q.pop();\n      u = qu.node;\n\n      if (u.id === end) {\n        break;\n      }\n\n      var i = u.neighbours.length;\n\n      while (i--) {\n        var neighbour = u.neighbours[i],\n            v = this.neighbours[neighbour.id];\n        if (qu.prev && v.id === qu.prev.node.id) continue;\n        var viduid = v.id + ',' + u.id;\n        if (viduid in visitedFrom && visitedFrom[viduid] <= qu.d) continue;\n        var cc = qu.prev ? prevCost(qu.prev.node.id, u.id, v.id) : 0,\n            t = qu.d + neighbour.distance + cc;\n        visitedFrom[viduid] = t;\n        q.push(new QueueEntry(v, qu, t));\n      }\n    }\n\n    var path = [];\n\n    while (qu.prev) {\n      qu = qu.prev;\n      path.push(qu.node.id);\n    }\n\n    return path;\n  };\n\n  Calculator.prototype.dijkstraNeighbours = function (start, dest) {\n    if (dest === void 0) {\n      dest = -1;\n    }\n\n    var q = new pqueue_1.PriorityQueue(function (a, b) {\n      return a.d <= b.d;\n    }),\n        i = this.neighbours.length,\n        d = new Array(i);\n\n    while (i--) {\n      var node = this.neighbours[i];\n      node.d = i === start ? 0 : Number.POSITIVE_INFINITY;\n      node.q = q.push(node);\n    }\n\n    while (!q.empty()) {\n      var u = q.pop();\n      d[u.id] = u.d;\n\n      if (u.id === dest) {\n        var path = [];\n        var v = u;\n\n        while (typeof v.prev !== 'undefined') {\n          path.push(v.prev.id);\n          v = v.prev;\n        }\n\n        return path;\n      }\n\n      i = u.neighbours.length;\n\n      while (i--) {\n        var neighbour = u.neighbours[i];\n        var v = this.neighbours[neighbour.id];\n        var t = u.d + neighbour.distance;\n\n        if (u.d !== Number.MAX_VALUE && v.d > t) {\n          v.d = t;\n          v.prev = u;\n          q.reduceKey(v.q, v, function (e, q) {\n            return e.q = q;\n          });\n        }\n      }\n    }\n\n    return d;\n  };\n\n  return Calculator;\n}();\n\nexports.Calculator = Calculator;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = __importDefault(require(\"lodash\"));\n/**\r\n * diagonal length of the box\r\n * @param box\r\n */\n\n\nfunction diagonal(box) {\n  return Math.hypot(box.width, box.height);\n}\n\nexports.diagonal = diagonal;\n\nfunction minX(node) {\n  if (node instanceof Array) return lodash_1.default.minBy(node, function (v) {\n    return minX(v);\n  });\n  return node.x - node.width / 2;\n}\n\nexports.minX = minX;\nexports.left = minX;\n\nfunction maxX(node) {\n  if (node instanceof Array) return lodash_1.default.maxBy(node, function (v) {\n    return maxX(v);\n  });\n  return node.x + node.width / 2;\n}\n\nexports.maxX = maxX;\nexports.right = maxX;\n\nfunction minY(node) {\n  if (node instanceof Array) return lodash_1.default.minBy(node, function (v) {\n    return minY(v);\n  });\n  return node.y - node.height / 2;\n}\n\nexports.minY = minY;\nexports.top = minY;\n\nfunction maxY(node) {\n  if (node instanceof Array) return lodash_1.default.maxBy(node, function (v) {\n    return maxY(v);\n  });\n  return node.y + node.height / 2;\n}\n\nexports.maxY = maxY;\nexports.bottom = maxY;\n\nfunction setHeight(n, yMin, yMax) {\n  n.height = yMax - yMin;\n  return n;\n}\n\nexports.setHeight = setHeight;\n\nfunction setWidth(n, xMin, xMax) {\n  n.width = xMax - xMin;\n  return n;\n}\n\nexports.setWidth = setWidth;\n\nfunction setMinY(n, yMin) {\n  setHeight(n, yMin, maxY(n));\n  n.y = n.height / 2 + yMin;\n  return n;\n}\n\nexports.setMinY = setMinY;\nexports.setTop = setMinY;\n\nfunction setMaxY(n, yMax) {\n  var yMin = minY(n);\n  setHeight(n, yMin, yMax);\n  n.y = n.height / 2 + yMin;\n  return n;\n}\n\nexports.setMaxY = setMaxY;\nexports.setBottom = setMaxY;\n\nfunction setMinX(n, xMin) {\n  setWidth(n, xMin, maxX(n));\n  n.x = n.width / 2 + xMin;\n  return n;\n}\n\nexports.setMinX = setMinX;\nexports.setLeft = setMinX;\n\nfunction setMaxX(n, xMax) {\n  var xMin = minX(n);\n  setWidth(n, xMin, xMax);\n  n.x = n.width / 2 + xMin;\n  return n;\n}\n\nexports.setMaxX = setMaxX;\nexports.setRight = setMaxX;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar point_1 = require(\"./point\");\n\nexports.vector = point_1.delta;\n/**\r\n * length of the vector\r\n * @param vector\r\n */\n\nfunction magnitude(vector) {\n  return Math.hypot(vector.x, vector.y);\n}\n\nexports.magnitude = magnitude;\nexports.length = magnitude;\n/**\r\n * Sums two vectors\r\n * @param v1\r\n * @param v2\r\n */\n\nfunction sum(v1, v2) {\n  return {\n    x: v1.x + v2.x,\n    y: v1.y + v2.y\n  };\n}\n\nexports.sum = sum;\n/**\r\n * substract vector v1 - v2\r\n * @param v1\r\n * @param v2\r\n */\n\nfunction diff(v1, v2) {\n  return {\n    x: v1.x - v2.x,\n    y: v1.y - v2.y\n  };\n}\n\nexports.diff = diff;\n/**\r\n * Scalar multiplication (mutable)\r\n *\r\n * @param v\r\n * @param k\r\n */\n\nfunction mult(v, k) {\n  v.x *= k;\n  v.y *= k;\n  return v;\n}\n\nexports.mult = mult;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction unionCount(a, b) {\n  var u = {};\n\n  for (var i in a) {\n    u[i] = {};\n  }\n\n  for (var i in b) {\n    u[i] = {};\n  }\n\n  return Object.keys(u).length;\n}\n\nfunction intersectionCount(a, b) {\n  var n = 0;\n\n  for (var i in a) {\n    if (typeof b[i] !== 'undefined') ++n;\n  }\n\n  return n;\n}\n\nfunction getNeighbours(links, la) {\n  var neighbours = {};\n\n  var addNeighbours = function addNeighbours(u, v) {\n    if (typeof neighbours[u] === 'undefined') neighbours[u] = {};\n    neighbours[u][v] = {};\n  };\n\n  links.forEach(function (e) {\n    var u = la.getSourceIndex(e),\n        v = la.getTargetIndex(e);\n    addNeighbours(u, v);\n    addNeighbours(v, u);\n  });\n  return neighbours;\n}\n\nfunction computeLinkLengths(links, w, f, la) {\n  var neighbours = getNeighbours(links, la);\n  links.forEach(function (l) {\n    var a = neighbours[la.getSourceIndex(l)];\n    var b = neighbours[la.getTargetIndex(l)];\n    la.setLength(l, 1 + w * f(a, b));\n  });\n}\n\nfunction symmetricDiffLinkLengths(links, la, w) {\n  if (w === void 0) {\n    w = 1;\n  }\n\n  computeLinkLengths(links, w, function (a, b) {\n    return Math.sqrt(unionCount(a, b) - intersectionCount(a, b));\n  }, la);\n}\n\nexports.symmetricDiffLinkLengths = symmetricDiffLinkLengths;\n\nfunction jaccardLinkLengths(links, la, w) {\n  if (w === void 0) {\n    w = 1;\n  }\n\n  computeLinkLengths(links, w, function (a, b) {\n    return Math.min(Object.keys(a).length, Object.keys(b).length) < 1.1 ? 0 : intersectionCount(a, b) / unionCount(a, b);\n  }, la);\n}\n\nexports.jaccardLinkLengths = jaccardLinkLengths;\n\nfunction generateDirectedEdgeConstraints(n, links, axis, la) {\n  var components = stronglyConnectedComponents(n, links, la);\n  var nodes = {};\n  components.forEach(function (c, i) {\n    return c.forEach(function (v) {\n      return nodes[v] = i;\n    });\n  });\n  var constraints = [];\n  links.forEach(function (l) {\n    var ui = la.getSourceIndex(l),\n        vi = la.getTargetIndex(l),\n        u = nodes[ui],\n        v = nodes[vi];\n\n    if (u !== v) {\n      constraints.push({\n        axis: axis,\n        left: ui,\n        right: vi,\n        gap: la.getMinSeparation(l)\n      });\n    }\n  });\n  return constraints;\n}\n\nexports.generateDirectedEdgeConstraints = generateDirectedEdgeConstraints;\n\nfunction stronglyConnectedComponents(numVertices, edges, la) {\n  var nodes = [];\n  var index = 0;\n  var stack = [];\n  var components = [];\n\n  function strongConnect(v) {\n    v.index = v.lowlink = index++;\n    stack.push(v);\n    v.onStack = true;\n\n    for (var _i = 0, _a = v.out; _i < _a.length; _i++) {\n      var w = _a[_i];\n\n      if (typeof w.index === 'undefined') {\n        strongConnect(w);\n        v.lowlink = Math.min(v.lowlink, w.lowlink);\n      } else if (w.onStack) {\n        v.lowlink = Math.min(v.lowlink, w.index);\n      }\n    }\n\n    if (v.lowlink === v.index) {\n      var component = [];\n\n      while (stack.length) {\n        w = stack.pop();\n        w.onStack = false;\n        component.push(w);\n        if (w === v) break;\n      }\n\n      components.push(component.map(function (v) {\n        return v.id;\n      }));\n    }\n  }\n\n  for (var i = 0; i < numVertices; i++) {\n    nodes.push({\n      id: i,\n      out: []\n    });\n  }\n\n  for (var _i = 0, edges_1 = edges; _i < edges_1.length; _i++) {\n    var e = edges_1[_i];\n    var v_1 = nodes[la.getSourceIndex(e)],\n        w = nodes[la.getTargetIndex(e)];\n    v_1.out.push(w);\n  }\n\n  for (var _a = 0, nodes_1 = nodes; _a < nodes_1.length; _a++) {\n    var v = nodes_1[_a];\n    if (typeof v.index === 'undefined') strongConnect(v);\n  }\n\n  return components;\n}\n\nexports.stronglyConnectedComponents = stronglyConnectedComponents;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Locks = function () {\n  function Locks() {\n    this.locks = {};\n  }\n\n  Locks.prototype.add = function (id, x) {\n    this.locks[id] = x;\n  };\n\n  Locks.prototype.clear = function () {\n    this.locks = {};\n  };\n\n  Locks.prototype.isEmpty = function () {\n    for (var l in this.locks) {\n      return false;\n    }\n\n    return true;\n  };\n\n  Locks.prototype.apply = function (f) {\n    for (var l in this.locks) {\n      f(Number(l), this.locks[l]);\n    }\n  };\n\n  return Locks;\n}();\n\nexports.Locks = Locks;\n\nvar Descent = function () {\n  function Descent(x, D, G) {\n    if (G === void 0) {\n      G = null;\n    }\n\n    this.D = D;\n    this.G = G;\n    this.threshold = 0.0001;\n    this.numGridSnapNodes = 0;\n    this.snapGridSize = 100;\n    this.snapStrength = 1000;\n    this.scaleSnapByMaxH = false;\n    this.random = new PseudoRandom();\n    this.project = null;\n    this.x = x;\n    this.k = x.length;\n    var n = this.n = x[0].length;\n    this.H = new Array(this.k);\n    this.g = new Array(this.k);\n    this.Hd = new Array(this.k);\n    this.a = new Array(this.k);\n    this.b = new Array(this.k);\n    this.c = new Array(this.k);\n    this.d = new Array(this.k);\n    this.e = new Array(this.k);\n    this.ia = new Array(this.k);\n    this.ib = new Array(this.k);\n    this.xtmp = new Array(this.k);\n    this.locks = new Locks();\n    this.minD = Number.MAX_VALUE;\n    var i = n,\n        j;\n\n    while (i--) {\n      j = n;\n\n      while (--j > i) {\n        var d = D[i][j];\n\n        if (d > 0 && d < this.minD) {\n          this.minD = d;\n        }\n      }\n    }\n\n    if (this.minD === Number.MAX_VALUE) this.minD = 1;\n    i = this.k;\n\n    while (i--) {\n      this.g[i] = new Array(n);\n      this.H[i] = new Array(n);\n      j = n;\n\n      while (j--) {\n        this.H[i][j] = new Array(n);\n      }\n\n      this.Hd[i] = new Array(n);\n      this.a[i] = new Array(n);\n      this.b[i] = new Array(n);\n      this.c[i] = new Array(n);\n      this.d[i] = new Array(n);\n      this.e[i] = new Array(n);\n      this.ia[i] = new Array(n);\n      this.ib[i] = new Array(n);\n      this.xtmp[i] = new Array(n);\n    }\n  }\n\n  Descent.createSquareMatrix = function (n, f) {\n    var M = new Array(n);\n\n    for (var i = 0; i < n; ++i) {\n      M[i] = new Array(n);\n\n      for (var j = 0; j < n; ++j) {\n        M[i][j] = f(i, j);\n      }\n    }\n\n    return M;\n  };\n\n  Descent.prototype.offsetDir = function () {\n    var _this = this;\n\n    var u = new Array(this.k);\n    var l = 0;\n\n    for (var i = 0; i < this.k; ++i) {\n      var x = u[i] = this.random.getNextBetween(0.01, 1) - 0.5;\n      l += x * x;\n    }\n\n    l = Math.sqrt(l);\n    return u.map(function (x) {\n      return x *= _this.minD / l;\n    });\n  };\n\n  Descent.prototype.computeDerivatives = function (x) {\n    var _this = this;\n\n    var n = this.n;\n    if (n < 1) return;\n    var i;\n    var d = new Array(this.k);\n    var d2 = new Array(this.k);\n    var Huu = new Array(this.k);\n    var maxH = 0;\n\n    for (var u = 0; u < n; ++u) {\n      for (i = 0; i < this.k; ++i) {\n        Huu[i] = this.g[i][u] = 0;\n      }\n\n      for (var v = 0; v < n; ++v) {\n        if (u === v) continue;\n        var maxDisplaces = n;\n\n        while (maxDisplaces--) {\n          var sd2 = 0;\n\n          for (i = 0; i < this.k; ++i) {\n            var dx = d[i] = x[i][u] - x[i][v];\n            sd2 += d2[i] = dx * dx;\n          }\n\n          if (sd2 > 1e-9) break;\n          var rd = this.offsetDir();\n\n          for (i = 0; i < this.k; ++i) {\n            x[i][v] += rd[i];\n          }\n        }\n\n        var l = Math.sqrt(sd2);\n        var D = this.D[u][v];\n        var weight = this.G != null ? this.G[u][v] : 1;\n\n        if (weight > 1 && l > D || !isFinite(D)) {\n          for (i = 0; i < this.k; ++i) {\n            this.H[i][u][v] = 0;\n          }\n\n          continue;\n        }\n\n        if (weight > 1) {\n          weight = 1;\n        }\n\n        var D2 = D * D;\n        var gs = 2 * weight * (l - D) / (D2 * l);\n        var l3 = l * l * l;\n        var hs = 2 * -weight / (D2 * l3);\n        if (!isFinite(gs)) console.log(gs);\n\n        for (i = 0; i < this.k; ++i) {\n          this.g[i][u] += d[i] * gs;\n          Huu[i] -= this.H[i][u][v] = hs * (l3 + D * (d2[i] - sd2) + l * sd2);\n        }\n      }\n\n      for (i = 0; i < this.k; ++i) {\n        maxH = Math.max(maxH, this.H[i][u][u] = Huu[i]);\n      }\n    }\n\n    var r = this.snapGridSize / 2;\n    var g = this.snapGridSize;\n    var w = this.snapStrength;\n    var k = w / (r * r);\n    var numNodes = this.numGridSnapNodes;\n\n    for (var u = 0; u < numNodes; ++u) {\n      for (i = 0; i < this.k; ++i) {\n        var xiu = this.x[i][u];\n        var m = xiu / g;\n        var f = m % 1;\n        var q = m - f;\n        var a = Math.abs(f);\n        var dx = a <= 0.5 ? xiu - q * g : xiu > 0 ? xiu - (q + 1) * g : xiu - (q - 1) * g;\n\n        if (-r < dx && dx <= r) {\n          if (this.scaleSnapByMaxH) {\n            this.g[i][u] += maxH * k * dx;\n            this.H[i][u][u] += maxH * k;\n          } else {\n            this.g[i][u] += k * dx;\n            this.H[i][u][u] += k;\n          }\n        }\n      }\n    }\n\n    if (!this.locks.isEmpty()) {\n      this.locks.apply(function (u, p) {\n        for (i = 0; i < _this.k; ++i) {\n          _this.H[i][u][u] += maxH;\n          _this.g[i][u] -= maxH * (p[i] - x[i][u]);\n        }\n      });\n    }\n  };\n\n  Descent.dotProd = function (a, b) {\n    var x = 0,\n        i = a.length;\n\n    while (i--) {\n      x += a[i] * b[i];\n    }\n\n    return x;\n  };\n\n  Descent.rightMultiply = function (m, v, r) {\n    var i = m.length;\n\n    while (i--) {\n      r[i] = Descent.dotProd(m[i], v);\n    }\n  };\n\n  Descent.prototype.computeStepSize = function (d) {\n    var numerator = 0,\n        denominator = 0;\n\n    for (var i = 0; i < this.k; ++i) {\n      numerator += Descent.dotProd(this.g[i], d[i]);\n      Descent.rightMultiply(this.H[i], d[i], this.Hd[i]);\n      denominator += Descent.dotProd(d[i], this.Hd[i]);\n    }\n\n    if (denominator === 0 || !isFinite(denominator)) return 0;\n    return 1 * numerator / denominator;\n  };\n\n  Descent.prototype.reduceStress = function () {\n    this.computeDerivatives(this.x);\n    var alpha = this.computeStepSize(this.g);\n\n    for (var i = 0; i < this.k; ++i) {\n      this.takeDescentStep(this.x[i], this.g[i], alpha);\n    }\n\n    return this.computeStress();\n  };\n\n  Descent.copy = function (a, b) {\n    var m = a.length,\n        n = b[0].length;\n\n    for (var i = 0; i < m; ++i) {\n      for (var j = 0; j < n; ++j) {\n        b[i][j] = a[i][j];\n      }\n    }\n  };\n\n  Descent.prototype.stepAndProject = function (x0, r, d, stepSize) {\n    Descent.copy(x0, r);\n    this.takeDescentStep(r[0], d[0], stepSize);\n    if (this.project) this.project[0](x0[0], x0[1], r[0]);\n    this.takeDescentStep(r[1], d[1], stepSize);\n    if (this.project) this.project[1](r[0], x0[1], r[1]);\n\n    for (var i = 2; i < this.k; i++) {\n      this.takeDescentStep(r[i], d[i], stepSize);\n    }\n  };\n\n  Descent.mApply = function (m, n, f) {\n    var i = m;\n\n    while (i-- > 0) {\n      var j = n;\n\n      while (j-- > 0) {\n        f(i, j);\n      }\n    }\n  };\n\n  Descent.prototype.matrixApply = function (f) {\n    Descent.mApply(this.k, this.n, f);\n  };\n\n  Descent.prototype.computeNextPosition = function (x0, r) {\n    var _this = this;\n\n    this.computeDerivatives(x0);\n    var alpha = this.computeStepSize(this.g);\n    this.stepAndProject(x0, r, this.g, alpha);\n\n    if (this.project) {\n      this.matrixApply(function (i, j) {\n        return _this.e[i][j] = x0[i][j] - r[i][j];\n      });\n      var beta = this.computeStepSize(this.e);\n      beta = Math.max(0.2, Math.min(beta, 1));\n      this.stepAndProject(x0, r, this.e, beta);\n    }\n  };\n\n  Descent.prototype.run = function (iterations) {\n    var stress = Number.MAX_VALUE,\n        converged = false;\n\n    while (!converged && iterations-- > 0) {\n      var s = this.rungeKutta();\n      converged = Math.abs(stress / s - 1) < this.threshold;\n      stress = s;\n    }\n\n    return stress;\n  };\n\n  Descent.prototype.rungeKutta = function () {\n    var _this = this;\n\n    this.computeNextPosition(this.x, this.a);\n    Descent.mid(this.x, this.a, this.ia);\n    this.computeNextPosition(this.ia, this.b);\n    Descent.mid(this.x, this.b, this.ib);\n    this.computeNextPosition(this.ib, this.c);\n    this.computeNextPosition(this.c, this.d);\n    var disp = 0;\n    this.matrixApply(function (i, j) {\n      var x = (_this.a[i][j] + 2.0 * _this.b[i][j] + 2.0 * _this.c[i][j] + _this.d[i][j]) / 6.0,\n          d = _this.x[i][j] - x;\n      disp += d * d;\n      _this.x[i][j] = x;\n    });\n    return disp;\n  };\n\n  Descent.mid = function (a, b, m) {\n    Descent.mApply(a.length, a[0].length, function (i, j) {\n      return m[i][j] = a[i][j] + (b[i][j] - a[i][j]) / 2.0;\n    });\n  };\n\n  Descent.prototype.takeDescentStep = function (x, d, stepSize) {\n    for (var i = 0; i < this.n; ++i) {\n      x[i] = x[i] - stepSize * d[i];\n    }\n  };\n\n  Descent.prototype.computeStress = function () {\n    var stress = 0;\n\n    for (var u = 0, nMinus1 = this.n - 1; u < nMinus1; ++u) {\n      for (var v = u + 1, n = this.n; v < n; ++v) {\n        var l = 0;\n\n        for (var i = 0; i < this.k; ++i) {\n          var dx = this.x[i][u] - this.x[i][v];\n          l += dx * dx;\n        }\n\n        l = Math.sqrt(l);\n        var d = this.D[u][v];\n        if (!isFinite(d)) continue;\n        var rl = d - l;\n        var d2 = d * d;\n        stress += rl * rl / d2;\n      }\n    }\n\n    return stress;\n  };\n\n  Descent.zeroDistance = 1e-10;\n  return Descent;\n}();\n\nexports.Descent = Descent;\n\nvar PseudoRandom = function () {\n  function PseudoRandom(seed) {\n    if (seed === void 0) {\n      seed = 1;\n    }\n\n    this.seed = seed;\n    this.a = 214013;\n    this.c = 2531011;\n    this.m = 2147483648;\n    this.range = 32767;\n  }\n\n  PseudoRandom.prototype.getNext = function () {\n    this.seed = (this.seed * this.a + this.c) % this.m;\n    return (this.seed >> 16) / this.range;\n  };\n\n  PseudoRandom.prototype.getNextBetween = function (min, max) {\n    return min + this.getNext() * (max - min);\n  };\n\n  return PseudoRandom;\n}();\n\nexports.PseudoRandom = PseudoRandom;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PositionStats = function () {\n  function PositionStats(scale) {\n    this.scale = scale;\n    this.AB = 0;\n    this.AD = 0;\n    this.A2 = 0;\n  }\n\n  PositionStats.prototype.addVariable = function (v) {\n    var ai = this.scale / v.scale;\n    var bi = v.offset / v.scale;\n    var wi = v.weight;\n    this.AB += wi * ai * bi;\n    this.AD += wi * ai * v.desiredPosition;\n    this.A2 += wi * ai * ai;\n  };\n\n  PositionStats.prototype.getPosn = function () {\n    return (this.AD - this.AB) / this.A2;\n  };\n\n  return PositionStats;\n}();\n\nexports.PositionStats = PositionStats;\n\nvar Constraint = function () {\n  function Constraint(left, right, gap, equality) {\n    if (equality === void 0) {\n      equality = false;\n    }\n\n    this.left = left;\n    this.right = right;\n    this.gap = gap;\n    this.equality = equality;\n    this.active = false;\n    this.unsatisfiable = false;\n    this.left = left;\n    this.right = right;\n    this.gap = gap;\n    this.equality = equality;\n  }\n\n  Constraint.prototype.slack = function () {\n    return this.unsatisfiable ? Number.MAX_VALUE : this.right.scale * this.right.position() - this.gap - this.left.scale * this.left.position();\n  };\n\n  return Constraint;\n}();\n\nexports.Constraint = Constraint;\n\nvar Variable = function () {\n  function Variable(desiredPosition, weight, scale) {\n    if (weight === void 0) {\n      weight = 1;\n    }\n\n    if (scale === void 0) {\n      scale = 1;\n    }\n\n    this.desiredPosition = desiredPosition;\n    this.weight = weight;\n    this.scale = scale;\n    this.offset = 0;\n  }\n\n  Variable.prototype.dfdv = function () {\n    return 2.0 * this.weight * (this.position() - this.desiredPosition);\n  };\n\n  Variable.prototype.position = function () {\n    return (this.block.ps.scale * this.block.posn + this.offset) / this.scale;\n  };\n\n  Variable.prototype.visitNeighbours = function (prev, f) {\n    var ff = function ff(c, next) {\n      return c.active && prev !== next && f(c, next);\n    };\n\n    this.cOut.forEach(function (c) {\n      return ff(c, c.right);\n    });\n    this.cIn.forEach(function (c) {\n      return ff(c, c.left);\n    });\n  };\n\n  return Variable;\n}();\n\nexports.Variable = Variable;\n\nvar Block = function () {\n  function Block(v) {\n    this.vars = [];\n    v.offset = 0;\n    this.ps = new PositionStats(v.scale);\n    this.addVariable(v);\n  }\n\n  Block.prototype.addVariable = function (v) {\n    v.block = this;\n    this.vars.push(v);\n    this.ps.addVariable(v);\n    this.posn = this.ps.getPosn();\n  };\n\n  Block.prototype.updateWeightedPosition = function () {\n    this.ps.AB = this.ps.AD = this.ps.A2 = 0;\n\n    for (var i = 0, n = this.vars.length; i < n; ++i) {\n      this.ps.addVariable(this.vars[i]);\n    }\n\n    this.posn = this.ps.getPosn();\n  };\n\n  Block.prototype.compute_lm = function (v, u, postAction) {\n    var _this = this;\n\n    var dfdv = v.dfdv();\n    v.visitNeighbours(u, function (c, next) {\n      var _dfdv = _this.compute_lm(next, v, postAction);\n\n      if (next === c.right) {\n        dfdv += _dfdv * c.left.scale;\n        c.lm = _dfdv;\n      } else {\n        dfdv += _dfdv * c.right.scale;\n        c.lm = -_dfdv;\n      }\n\n      postAction(c);\n    });\n    return dfdv / v.scale;\n  };\n\n  Block.prototype.populateSplitBlock = function (v, prev) {\n    var _this = this;\n\n    v.visitNeighbours(prev, function (c, next) {\n      next.offset = v.offset + (next === c.right ? c.gap : -c.gap);\n\n      _this.addVariable(next);\n\n      _this.populateSplitBlock(next, v);\n    });\n  };\n\n  Block.prototype.traverse = function (visit, acc, v, prev) {\n    var _this = this;\n\n    if (v === void 0) {\n      v = this.vars[0];\n    }\n\n    if (prev === void 0) {\n      prev = null;\n    }\n\n    v.visitNeighbours(prev, function (c, next) {\n      acc.push(visit(c));\n\n      _this.traverse(visit, acc, next, v);\n    });\n  };\n\n  Block.prototype.findMinLM = function () {\n    var m = null;\n    this.compute_lm(this.vars[0], null, function (c) {\n      if (!c.equality && (m === null || c.lm < m.lm)) m = c;\n    });\n    return m;\n  };\n\n  Block.prototype.findMinLMBetween = function (lv, rv) {\n    this.compute_lm(lv, null, function () {});\n    var m = null;\n    this.findPath(lv, null, rv, function (c, next) {\n      if (!c.equality && c.right === next && (m === null || c.lm < m.lm)) m = c;\n    });\n    return m;\n  };\n\n  Block.prototype.findPath = function (v, prev, to, visit) {\n    var _this = this;\n\n    var endFound = false;\n    v.visitNeighbours(prev, function (c, next) {\n      if (!endFound && (next === to || _this.findPath(next, v, to, visit))) {\n        endFound = true;\n        visit(c, next);\n      }\n    });\n    return endFound;\n  };\n\n  Block.prototype.isActiveDirectedPathBetween = function (u, v) {\n    if (u === v) return true;\n    var i = u.cOut.length;\n\n    while (i--) {\n      var c = u.cOut[i];\n      if (c.active && this.isActiveDirectedPathBetween(c.right, v)) return true;\n    }\n\n    return false;\n  };\n\n  Block.split = function (c) {\n    c.active = false;\n    return [Block.createSplitBlock(c.left), Block.createSplitBlock(c.right)];\n  };\n\n  Block.createSplitBlock = function (startVar) {\n    var b = new Block(startVar);\n    b.populateSplitBlock(startVar, null);\n    return b;\n  };\n\n  Block.prototype.splitBetween = function (vl, vr) {\n    var c = this.findMinLMBetween(vl, vr);\n\n    if (c !== null) {\n      var bs = Block.split(c);\n      return {\n        constraint: c,\n        lb: bs[0],\n        rb: bs[1]\n      };\n    }\n\n    return null;\n  };\n\n  Block.prototype.mergeAcross = function (b, c, dist) {\n    c.active = true;\n\n    for (var i = 0, n = b.vars.length; i < n; ++i) {\n      var v = b.vars[i];\n      v.offset += dist;\n      this.addVariable(v);\n    }\n\n    this.posn = this.ps.getPosn();\n  };\n\n  Block.prototype.cost = function () {\n    var sum = 0,\n        i = this.vars.length;\n\n    while (i--) {\n      var v = this.vars[i],\n          d = v.position() - v.desiredPosition;\n      sum += d * d * v.weight;\n    }\n\n    return sum;\n  };\n\n  return Block;\n}();\n\nexports.Block = Block;\n\nvar Blocks = function () {\n  function Blocks(vs) {\n    this.vs = vs;\n    var n = vs.length;\n    this.list = new Array(n);\n\n    while (n--) {\n      var b = new Block(vs[n]);\n      this.list[n] = b;\n      b.blockInd = n;\n    }\n  }\n\n  Blocks.prototype.cost = function () {\n    var sum = 0,\n        i = this.list.length;\n\n    while (i--) {\n      sum += this.list[i].cost();\n    }\n\n    return sum;\n  };\n\n  Blocks.prototype.insert = function (b) {\n    b.blockInd = this.list.length;\n    this.list.push(b);\n  };\n\n  Blocks.prototype.remove = function (b) {\n    var last = this.list.length - 1;\n    var swapBlock = this.list[last];\n    this.list.length = last;\n\n    if (b !== swapBlock) {\n      this.list[b.blockInd] = swapBlock;\n      swapBlock.blockInd = b.blockInd;\n    }\n  };\n\n  Blocks.prototype.merge = function (c) {\n    var l = c.left.block,\n        r = c.right.block;\n    var dist = c.right.offset - c.left.offset - c.gap;\n\n    if (l.vars.length < r.vars.length) {\n      r.mergeAcross(l, c, dist);\n      this.remove(l);\n    } else {\n      l.mergeAcross(r, c, -dist);\n      this.remove(r);\n    }\n  };\n\n  Blocks.prototype.forEach = function (f) {\n    this.list.forEach(f);\n  };\n\n  Blocks.prototype.updateBlockPositions = function () {\n    this.list.forEach(function (b) {\n      return b.updateWeightedPosition();\n    });\n  };\n\n  Blocks.prototype.split = function (inactive) {\n    var _this = this;\n\n    this.updateBlockPositions();\n    this.list.forEach(function (b) {\n      var v = b.findMinLM();\n\n      if (v !== null && v.lm < Solver.LAGRANGIAN_TOLERANCE) {\n        b = v.left.block;\n        Block.split(v).forEach(function (nb) {\n          return _this.insert(nb);\n        });\n\n        _this.remove(b);\n\n        inactive.push(v);\n      }\n    });\n  };\n\n  return Blocks;\n}();\n\nexports.Blocks = Blocks;\n\nvar Solver = function () {\n  function Solver(vs, cs) {\n    this.vs = vs;\n    this.cs = cs;\n    this.vs = vs;\n    vs.forEach(function (v) {\n      v.cIn = [], v.cOut = [];\n    });\n    this.cs = cs;\n    cs.forEach(function (c) {\n      c.left.cOut.push(c);\n      c.right.cIn.push(c);\n    });\n    this.inactive = cs.map(function (c) {\n      c.active = false;\n      return c;\n    });\n    this.bs = null;\n  }\n\n  Solver.prototype.cost = function () {\n    return this.bs.cost();\n  };\n\n  Solver.prototype.setStartingPositions = function (ps) {\n    this.inactive = this.cs.map(function (c) {\n      c.active = false;\n      return c;\n    });\n    this.bs = new Blocks(this.vs);\n    this.bs.forEach(function (b, i) {\n      return b.posn = ps[i];\n    });\n  };\n\n  Solver.prototype.setDesiredPositions = function (ps) {\n    this.vs.forEach(function (v, i) {\n      return v.desiredPosition = ps[i];\n    });\n  };\n\n  Solver.prototype.mostViolated = function () {\n    var minSlack = Number.MAX_VALUE,\n        v = null,\n        l = this.inactive,\n        n = l.length,\n        deletePoint = n;\n\n    for (var i = 0; i < n; ++i) {\n      var c = l[i];\n      if (c.unsatisfiable) continue;\n      var slack = c.slack();\n\n      if (c.equality || slack < minSlack) {\n        minSlack = slack;\n        v = c;\n        deletePoint = i;\n        if (c.equality) break;\n      }\n    }\n\n    if (deletePoint !== n && (minSlack < Solver.ZERO_UPPERBOUND && !v.active || v.equality)) {\n      l[deletePoint] = l[n - 1];\n      l.length = n - 1;\n    }\n\n    return v;\n  };\n\n  Solver.prototype.satisfy = function () {\n    if (this.bs == null) {\n      this.bs = new Blocks(this.vs);\n    }\n\n    this.bs.split(this.inactive);\n    var v = null;\n\n    while ((v = this.mostViolated()) && (v.equality || v.slack() < Solver.ZERO_UPPERBOUND && !v.active)) {\n      var lb = v.left.block,\n          rb = v.right.block;\n\n      if (lb !== rb) {\n        this.bs.merge(v);\n      } else {\n        if (lb.isActiveDirectedPathBetween(v.right, v.left)) {\n          v.unsatisfiable = true;\n          continue;\n        }\n\n        var split = lb.splitBetween(v.left, v.right);\n\n        if (split !== null) {\n          this.bs.insert(split.lb);\n          this.bs.insert(split.rb);\n          this.bs.remove(lb);\n          this.inactive.push(split.constraint);\n        } else {\n          v.unsatisfiable = true;\n          continue;\n        }\n\n        if (v.slack() >= 0) {\n          this.inactive.push(v);\n        } else {\n          this.bs.merge(v);\n        }\n      }\n    }\n  };\n\n  Solver.prototype.solve = function () {\n    this.satisfy();\n    var lastcost = Number.MAX_VALUE,\n        cost = this.bs.cost();\n\n    while (Math.abs(lastcost - cost) > 0.0001) {\n      this.satisfy();\n      lastcost = cost;\n      cost = this.bs.cost();\n    }\n\n    return cost;\n  };\n\n  Solver.LAGRANGIAN_TOLERANCE = -1e-4;\n  Solver.ZERO_UPPERBOUND = -1e-10;\n  return Solver;\n}();\n\nexports.Solver = Solver;\n\nfunction removeOverlapInOneDimension(spans, lowerBound, upperBound) {\n  var vs = spans.map(function (s) {\n    return new Variable(s.desiredCenter);\n  });\n  var cs = [];\n  var n = spans.length;\n\n  for (var i = 0; i < n - 1; i++) {\n    var left = spans[i],\n        right = spans[i + 1];\n    cs.push(new Constraint(vs[i], vs[i + 1], (left.size + right.size) / 2));\n  }\n\n  var leftMost = vs[0],\n      rightMost = vs[n - 1],\n      leftMostSize = spans[0].size / 2,\n      rightMostSize = spans[n - 1].size / 2;\n  var vLower = null,\n      vUpper = null;\n\n  if (lowerBound) {\n    vLower = new Variable(lowerBound, leftMost.weight * 1000);\n    vs.push(vLower);\n    cs.push(new Constraint(vLower, leftMost, leftMostSize));\n  }\n\n  if (upperBound) {\n    vUpper = new Variable(upperBound, rightMost.weight * 1000);\n    vs.push(vUpper);\n    cs.push(new Constraint(rightMost, vUpper, rightMostSize));\n  }\n\n  var solver = new Solver(vs, cs);\n  solver.solve();\n  return {\n    newCenters: vs.slice(0, spans.length).map(function (v) {\n      return v.position();\n    }),\n    lowerBound: vLower ? vLower.position() : leftMost.position() - leftMostSize,\n    upperBound: vUpper ? vUpper.position() : rightMost.position() + rightMostSize\n  };\n}\n\nexports.removeOverlapInOneDimension = removeOverlapInOneDimension;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = __importDefault(require(\"lodash\"));\n\nvar box_1 = require(\"./box\");\n\nvar point_1 = require(\"./point\");\n/**\r\n * @param n1\r\n * @param n2\r\n * @param padding\r\n *\r\n * @returns true if the nodes overlap\r\n */\n\n\nfunction overlap(n1, n2, padding) {\n  if (padding === void 0) {\n    padding = 0;\n  }\n\n  return overlapX(n1, n2, padding) && overlapY(n1, n2, padding);\n}\n\nexports.overlap = overlap;\n/**\r\n * @param n1\r\n * @param n2\r\n * @param padding\r\n *\r\n * @returns true if the nodes overlap on x\r\n */\n\nfunction overlapX(n1, n2, padding) {\n  if (padding === void 0) {\n    padding = 0;\n  }\n\n  return point_1.normX(n1, n2) < (n1.width + n2.width) / 2 + +padding;\n}\n\nexports.overlapX = overlapX;\n/**\r\n * @param n1\r\n * @param n2\r\n * @param padding\r\n *\r\n * @returns true if the nodes overlap on y\r\n */\n\nfunction overlapY(n1, n2, padding) {\n  if (padding === void 0) {\n    padding = 0;\n  }\n\n  return point_1.normY(n1, n2) < (n1.height + n2.height) / 2 + +padding;\n}\n\nexports.overlapY = overlapY;\n/**\r\n * @param nodes\r\n * @param padding\r\n * @returns true if at least two nodes of the list overlap\r\n */\n\nfunction hasOverlap(nodes, padding) {\n  if (padding === void 0) {\n    padding = 0;\n  }\n\n  var lap = false;\n  var sorted = lodash_1.default.sortBy(nodes, function (node) {\n    return box_1.left(node);\n  });\n  lodash_1.default.forEach(sorted, function (n1, index) {\n    for (var j = index + 1; j < nodes.length; j++) {\n      var n2 = sorted[j];\n\n      if (overlap(n1, n2, padding)) {\n        lap = true;\n        return false; // exit _.forEach\n      } else if (box_1.left(n2) > box_1.right(n1) + padding) break;\n    }\n  });\n  return lap;\n}\n\nexports.hasOverlap = hasOverlap;\n/**\r\n * Get all the overlaps between couple of nodes\r\n * @param map map of nodes having their index as keys\r\n * @param edges\r\n * @param padding\r\n */\n\nfunction edgeOverlap(map, edges, padding) {\n  if (padding === void 0) {\n    padding = 0;\n  }\n\n  var present = false;\n  lodash_1.default.forEach(edges, function (edge) {\n    if (overlap(map[edge.source], map[edge.target], padding)) {\n      present = true;\n      return false;\n    }\n  });\n  return present;\n}\n\nexports.edgeOverlap = edgeOverlap;\n/**\r\n * @param {Node[]} nodes\r\n * @param {number} [padding]\r\n *\r\n * @returns the list of all overlaps of the graph.\r\n */\n\nfunction getAllOverlaps(nodes, padding) {\n  if (padding === void 0) {\n    padding = 0;\n  }\n\n  var sorted = lodash_1.default.sortBy(nodes, function (node) {\n    return box_1.left(node);\n  });\n  var overlaps = [];\n  lodash_1.default.forEach(sorted, function (n1, index) {\n    for (var j = index + 1; j < nodes.length; j++) {\n      var n2 = sorted[j];\n      if (overlap(n1, n2, padding)) overlaps.push([n1, n2]);else if (box_1.left(n2) > box_1.right(n1) + padding) break;\n    }\n  });\n  return overlaps;\n}\n\nexports.getAllOverlaps = getAllOverlaps;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PowerEdge = function () {\n  function PowerEdge(source, target, type) {\n    this.source = source;\n    this.target = target;\n    this.type = type;\n  }\n\n  return PowerEdge;\n}();\n\nexports.PowerEdge = PowerEdge;\n\nvar Configuration = function () {\n  function Configuration(n, edges, linkAccessor, rootGroup) {\n    var _this = this;\n\n    this.linkAccessor = linkAccessor;\n    this.modules = new Array(n);\n    this.roots = [];\n\n    if (rootGroup) {\n      this.initModulesFromGroup(rootGroup);\n    } else {\n      this.roots.push(new ModuleSet());\n\n      for (var i = 0; i < n; ++i) {\n        this.roots[0].add(this.modules[i] = new Module(i));\n      }\n    }\n\n    this.R = edges.length;\n    edges.forEach(function (e) {\n      var s = _this.modules[linkAccessor.getSourceIndex(e)],\n          t = _this.modules[linkAccessor.getTargetIndex(e)],\n          type = linkAccessor.getType(e);\n\n      s.outgoing.add(type, t);\n      t.incoming.add(type, s);\n    });\n  }\n\n  Configuration.prototype.initModulesFromGroup = function (group) {\n    var moduleSet = new ModuleSet();\n    this.roots.push(moduleSet);\n\n    for (var i = 0; i < group.leaves.length; ++i) {\n      var node = group.leaves[i];\n      var module = new Module(node.id);\n      this.modules[node.id] = module;\n      moduleSet.add(module);\n    }\n\n    if (group.groups) {\n      for (var j = 0; j < group.groups.length; ++j) {\n        var child = group.groups[j];\n        var definition = {};\n\n        for (var prop in child) {\n          if (prop !== \"leaves\" && prop !== \"groups\" && child.hasOwnProperty(prop)) definition[prop] = child[prop];\n        }\n\n        moduleSet.add(new Module(-1 - j, new LinkSets(), new LinkSets(), this.initModulesFromGroup(child), definition));\n      }\n    }\n\n    return moduleSet;\n  };\n\n  Configuration.prototype.merge = function (a, b, k) {\n    if (k === void 0) {\n      k = 0;\n    }\n\n    var inInt = a.incoming.intersection(b.incoming),\n        outInt = a.outgoing.intersection(b.outgoing);\n    var children = new ModuleSet();\n    children.add(a);\n    children.add(b);\n    var m = new Module(this.modules.length, outInt, inInt, children);\n    this.modules.push(m);\n\n    var update = function update(s, i, o) {\n      s.forAll(function (ms, linktype) {\n        ms.forAll(function (n) {\n          var nls = n[i];\n          nls.add(linktype, m);\n          nls.remove(linktype, a);\n          nls.remove(linktype, b);\n          a[o].remove(linktype, n);\n          b[o].remove(linktype, n);\n        });\n      });\n    };\n\n    update(outInt, \"incoming\", \"outgoing\");\n    update(inInt, \"outgoing\", \"incoming\");\n    this.R -= inInt.count() + outInt.count();\n    this.roots[k].remove(a);\n    this.roots[k].remove(b);\n    this.roots[k].add(m);\n    return m;\n  };\n\n  Configuration.prototype.rootMerges = function (k) {\n    if (k === void 0) {\n      k = 0;\n    }\n\n    var rs = this.roots[k].modules();\n    var n = rs.length;\n    var merges = new Array(n * (n - 1));\n    var ctr = 0;\n\n    for (var i = 0, i_ = n - 1; i < i_; ++i) {\n      for (var j = i + 1; j < n; ++j) {\n        var a = rs[i],\n            b = rs[j];\n        merges[ctr] = {\n          id: ctr,\n          nEdges: this.nEdges(a, b),\n          a: a,\n          b: b\n        };\n        ctr++;\n      }\n    }\n\n    return merges;\n  };\n\n  Configuration.prototype.greedyMerge = function () {\n    for (var i = 0; i < this.roots.length; ++i) {\n      if (this.roots[i].modules().length < 2) continue;\n      var ms = this.rootMerges(i).sort(function (a, b) {\n        return a.nEdges == b.nEdges ? a.id - b.id : a.nEdges - b.nEdges;\n      });\n      var m = ms[0];\n      if (m.nEdges >= this.R) continue;\n      this.merge(m.a, m.b, i);\n      return true;\n    }\n  };\n\n  Configuration.prototype.nEdges = function (a, b) {\n    var inInt = a.incoming.intersection(b.incoming),\n        outInt = a.outgoing.intersection(b.outgoing);\n    return this.R - inInt.count() - outInt.count();\n  };\n\n  Configuration.prototype.getGroupHierarchy = function (retargetedEdges) {\n    var _this = this;\n\n    var groups = [];\n    var root = {};\n    toGroups(this.roots[0], root, groups);\n    var es = this.allEdges();\n    es.forEach(function (e) {\n      var a = _this.modules[e.source];\n      var b = _this.modules[e.target];\n      retargetedEdges.push(new PowerEdge(typeof a.gid === \"undefined\" ? e.source : groups[a.gid], typeof b.gid === \"undefined\" ? e.target : groups[b.gid], e.type));\n    });\n    return groups;\n  };\n\n  Configuration.prototype.allEdges = function () {\n    var es = [];\n    Configuration.getEdges(this.roots[0], es);\n    return es;\n  };\n\n  Configuration.getEdges = function (modules, es) {\n    modules.forAll(function (m) {\n      m.getEdges(es);\n      Configuration.getEdges(m.children, es);\n    });\n  };\n\n  return Configuration;\n}();\n\nexports.Configuration = Configuration;\n\nfunction toGroups(modules, group, groups) {\n  modules.forAll(function (m) {\n    if (m.isLeaf()) {\n      if (!group.leaves) group.leaves = [];\n      group.leaves.push(m.id);\n    } else {\n      var g = group;\n      m.gid = groups.length;\n\n      if (!m.isIsland() || m.isPredefined()) {\n        g = {\n          id: m.gid\n        };\n        if (m.isPredefined()) for (var prop in m.definition) {\n          g[prop] = m.definition[prop];\n        }\n        if (!group.groups) group.groups = [];\n        group.groups.push(m.gid);\n        groups.push(g);\n      }\n\n      toGroups(m.children, g, groups);\n    }\n  });\n}\n\nvar Module = function () {\n  function Module(id, outgoing, incoming, children, definition) {\n    if (outgoing === void 0) {\n      outgoing = new LinkSets();\n    }\n\n    if (incoming === void 0) {\n      incoming = new LinkSets();\n    }\n\n    if (children === void 0) {\n      children = new ModuleSet();\n    }\n\n    this.id = id;\n    this.outgoing = outgoing;\n    this.incoming = incoming;\n    this.children = children;\n    this.definition = definition;\n  }\n\n  Module.prototype.getEdges = function (es) {\n    var _this = this;\n\n    this.outgoing.forAll(function (ms, edgetype) {\n      ms.forAll(function (target) {\n        es.push(new PowerEdge(_this.id, target.id, edgetype));\n      });\n    });\n  };\n\n  Module.prototype.isLeaf = function () {\n    return this.children.count() === 0;\n  };\n\n  Module.prototype.isIsland = function () {\n    return this.outgoing.count() === 0 && this.incoming.count() === 0;\n  };\n\n  Module.prototype.isPredefined = function () {\n    return typeof this.definition !== \"undefined\";\n  };\n\n  return Module;\n}();\n\nexports.Module = Module;\n\nfunction intersection(m, n) {\n  var i = {};\n\n  for (var v in m) {\n    if (v in n) i[v] = m[v];\n  }\n\n  return i;\n}\n\nvar ModuleSet = function () {\n  function ModuleSet() {\n    this.table = {};\n  }\n\n  ModuleSet.prototype.count = function () {\n    return Object.keys(this.table).length;\n  };\n\n  ModuleSet.prototype.intersection = function (other) {\n    var result = new ModuleSet();\n    result.table = intersection(this.table, other.table);\n    return result;\n  };\n\n  ModuleSet.prototype.intersectionCount = function (other) {\n    return this.intersection(other).count();\n  };\n\n  ModuleSet.prototype.contains = function (id) {\n    return id in this.table;\n  };\n\n  ModuleSet.prototype.add = function (m) {\n    this.table[m.id] = m;\n  };\n\n  ModuleSet.prototype.remove = function (m) {\n    delete this.table[m.id];\n  };\n\n  ModuleSet.prototype.forAll = function (f) {\n    for (var mid in this.table) {\n      f(this.table[mid]);\n    }\n  };\n\n  ModuleSet.prototype.modules = function () {\n    var vs = [];\n    this.forAll(function (m) {\n      if (!m.isPredefined()) vs.push(m);\n    });\n    return vs;\n  };\n\n  return ModuleSet;\n}();\n\nexports.ModuleSet = ModuleSet;\n\nvar LinkSets = function () {\n  function LinkSets() {\n    this.sets = {};\n    this.n = 0;\n  }\n\n  LinkSets.prototype.count = function () {\n    return this.n;\n  };\n\n  LinkSets.prototype.contains = function (id) {\n    var result = false;\n    this.forAllModules(function (m) {\n      if (!result && m.id == id) {\n        result = true;\n      }\n    });\n    return result;\n  };\n\n  LinkSets.prototype.add = function (linktype, m) {\n    var s = linktype in this.sets ? this.sets[linktype] : this.sets[linktype] = new ModuleSet();\n    s.add(m);\n    ++this.n;\n  };\n\n  LinkSets.prototype.remove = function (linktype, m) {\n    var ms = this.sets[linktype];\n    ms.remove(m);\n\n    if (ms.count() === 0) {\n      delete this.sets[linktype];\n    }\n\n    --this.n;\n  };\n\n  LinkSets.prototype.forAll = function (f) {\n    for (var linktype in this.sets) {\n      f(this.sets[linktype], Number(linktype));\n    }\n  };\n\n  LinkSets.prototype.forAllModules = function (f) {\n    this.forAll(function (ms, lt) {\n      return ms.forAll(f);\n    });\n  };\n\n  LinkSets.prototype.intersection = function (other) {\n    var result = new LinkSets();\n    this.forAll(function (ms, lt) {\n      if (lt in other.sets) {\n        var i = ms.intersection(other.sets[lt]),\n            n = i.count();\n\n        if (n > 0) {\n          result.sets[lt] = i;\n          result.n += n;\n        }\n      }\n    });\n    return result;\n  };\n\n  return LinkSets;\n}();\n\nexports.LinkSets = LinkSets;\n\nfunction intersectionCount(m, n) {\n  return Object.keys(intersection(m, n)).length;\n}\n\nfunction getGroups(nodes, links, la, rootGroup) {\n  var n = nodes.length,\n      c = new Configuration(n, links, la, rootGroup);\n\n  while (c.greedyMerge()) {\n    ;\n  }\n\n  var powerEdges = [];\n  var g = c.getGroupHierarchy(powerEdges);\n  powerEdges.forEach(function (e) {\n    var f = function f(end) {\n      var g = e[end];\n      if (typeof g == \"number\") e[end] = nodes[g];\n    };\n\n    f(\"source\");\n    f(\"target\");\n  });\n  return {\n    groups: g,\n    powerEdges: powerEdges\n  };\n}\n\nexports.getGroups = getGroups;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar TreeBase = function () {\n  function TreeBase() {\n    this.findIter = function (data) {\n      var res = this._root;\n      var iter = this.iterator();\n\n      while (res !== null) {\n        var c = this._comparator(data, res.data);\n\n        if (c === 0) {\n          iter._cursor = res;\n          return iter;\n        } else {\n          iter._ancestors.push(res);\n\n          res = res.get_child(c > 0);\n        }\n      }\n\n      return null;\n    };\n  }\n\n  TreeBase.prototype.clear = function () {\n    this._root = null;\n    this.size = 0;\n  };\n\n  ;\n\n  TreeBase.prototype.find = function (data) {\n    var res = this._root;\n\n    while (res !== null) {\n      var c = this._comparator(data, res.data);\n\n      if (c === 0) {\n        return res.data;\n      } else {\n        res = res.get_child(c > 0);\n      }\n    }\n\n    return null;\n  };\n\n  ;\n\n  TreeBase.prototype.lowerBound = function (data) {\n    return this._bound(data, this._comparator);\n  };\n\n  ;\n\n  TreeBase.prototype.upperBound = function (data) {\n    var cmp = this._comparator;\n\n    function reverse_cmp(a, b) {\n      return cmp(b, a);\n    }\n\n    return this._bound(data, reverse_cmp);\n  };\n\n  ;\n\n  TreeBase.prototype.min = function () {\n    var res = this._root;\n\n    if (res === null) {\n      return null;\n    }\n\n    while (res.left !== null) {\n      res = res.left;\n    }\n\n    return res.data;\n  };\n\n  ;\n\n  TreeBase.prototype.max = function () {\n    var res = this._root;\n\n    if (res === null) {\n      return null;\n    }\n\n    while (res.right !== null) {\n      res = res.right;\n    }\n\n    return res.data;\n  };\n\n  ;\n\n  TreeBase.prototype.iterator = function () {\n    return new Iterator(this);\n  };\n\n  ;\n\n  TreeBase.prototype.each = function (cb) {\n    var it = this.iterator(),\n        data;\n\n    while ((data = it.next()) !== null) {\n      cb(data);\n    }\n  };\n\n  ;\n\n  TreeBase.prototype.reach = function (cb) {\n    var it = this.iterator(),\n        data;\n\n    while ((data = it.prev()) !== null) {\n      cb(data);\n    }\n  };\n\n  ;\n\n  TreeBase.prototype._bound = function (data, cmp) {\n    var cur = this._root;\n    var iter = this.iterator();\n\n    while (cur !== null) {\n      var c = this._comparator(data, cur.data);\n\n      if (c === 0) {\n        iter._cursor = cur;\n        return iter;\n      }\n\n      iter._ancestors.push(cur);\n\n      cur = cur.get_child(c > 0);\n    }\n\n    for (var i = iter._ancestors.length - 1; i >= 0; --i) {\n      cur = iter._ancestors[i];\n\n      if (cmp(data, cur.data) > 0) {\n        iter._cursor = cur;\n        iter._ancestors.length = i;\n        return iter;\n      }\n    }\n\n    iter._ancestors.length = 0;\n    return iter;\n  };\n\n  ;\n  return TreeBase;\n}();\n\nexports.TreeBase = TreeBase;\n\nvar Iterator = function () {\n  function Iterator(tree) {\n    this._tree = tree;\n    this._ancestors = [];\n    this._cursor = null;\n  }\n\n  Iterator.prototype.data = function () {\n    return this._cursor !== null ? this._cursor.data : null;\n  };\n\n  ;\n\n  Iterator.prototype.next = function () {\n    if (this._cursor === null) {\n      var root = this._tree._root;\n\n      if (root !== null) {\n        this._minNode(root);\n      }\n    } else {\n      if (this._cursor.right === null) {\n        var save;\n\n        do {\n          save = this._cursor;\n\n          if (this._ancestors.length) {\n            this._cursor = this._ancestors.pop();\n          } else {\n            this._cursor = null;\n            break;\n          }\n        } while (this._cursor.right === save);\n      } else {\n        this._ancestors.push(this._cursor);\n\n        this._minNode(this._cursor.right);\n      }\n    }\n\n    return this._cursor !== null ? this._cursor.data : null;\n  };\n\n  ;\n\n  Iterator.prototype.prev = function () {\n    if (this._cursor === null) {\n      var root = this._tree._root;\n\n      if (root !== null) {\n        this._maxNode(root);\n      }\n    } else {\n      if (this._cursor.left === null) {\n        var save;\n\n        do {\n          save = this._cursor;\n\n          if (this._ancestors.length) {\n            this._cursor = this._ancestors.pop();\n          } else {\n            this._cursor = null;\n            break;\n          }\n        } while (this._cursor.left === save);\n      } else {\n        this._ancestors.push(this._cursor);\n\n        this._maxNode(this._cursor.left);\n      }\n    }\n\n    return this._cursor !== null ? this._cursor.data : null;\n  };\n\n  ;\n\n  Iterator.prototype._minNode = function (start) {\n    while (start.left !== null) {\n      this._ancestors.push(start);\n\n      start = start.left;\n    }\n\n    this._cursor = start;\n  };\n\n  ;\n\n  Iterator.prototype._maxNode = function (start) {\n    while (start.right !== null) {\n      this._ancestors.push(start);\n\n      start = start.right;\n    }\n\n    this._cursor = start;\n  };\n\n  ;\n  return Iterator;\n}();\n\nexports.Iterator = Iterator;\n\nvar Node = function () {\n  function Node(data) {\n    this.data = data;\n    this.left = null;\n    this.right = null;\n    this.red = true;\n  }\n\n  Node.prototype.get_child = function (dir) {\n    return dir ? this.right : this.left;\n  };\n\n  ;\n\n  Node.prototype.set_child = function (dir, val) {\n    if (dir) {\n      this.right = val;\n    } else {\n      this.left = val;\n    }\n  };\n\n  ;\n  return Node;\n}();\n\nvar RBTree = function (_super) {\n  __extends(RBTree, _super);\n\n  function RBTree(comparator) {\n    var _this = _super.call(this) || this;\n\n    _this._root = null;\n    _this._comparator = comparator;\n    _this.size = 0;\n    return _this;\n  }\n\n  RBTree.prototype.insert = function (data) {\n    var ret = false;\n\n    if (this._root === null) {\n      this._root = new Node(data);\n      ret = true;\n      this.size++;\n    } else {\n      var head = new Node(undefined);\n      var dir = false;\n      var last = false;\n      var gp = null;\n      var ggp = head;\n      var p = null;\n      var node = this._root;\n      ggp.right = this._root;\n\n      while (true) {\n        if (node === null) {\n          node = new Node(data);\n          p.set_child(dir, node);\n          ret = true;\n          this.size++;\n        } else if (RBTree.is_red(node.left) && RBTree.is_red(node.right)) {\n          node.red = true;\n          node.left.red = false;\n          node.right.red = false;\n        }\n\n        if (RBTree.is_red(node) && RBTree.is_red(p)) {\n          var dir2 = ggp.right === gp;\n\n          if (node === p.get_child(last)) {\n            ggp.set_child(dir2, RBTree.single_rotate(gp, !last));\n          } else {\n            ggp.set_child(dir2, RBTree.double_rotate(gp, !last));\n          }\n        }\n\n        var cmp = this._comparator(node.data, data);\n\n        if (cmp === 0) {\n          break;\n        }\n\n        last = dir;\n        dir = cmp < 0;\n\n        if (gp !== null) {\n          ggp = gp;\n        }\n\n        gp = p;\n        p = node;\n        node = node.get_child(dir);\n      }\n\n      this._root = head.right;\n    }\n\n    this._root.red = false;\n    return ret;\n  };\n\n  ;\n\n  RBTree.prototype.remove = function (data) {\n    if (this._root === null) {\n      return false;\n    }\n\n    var head = new Node(undefined);\n    var node = head;\n    node.right = this._root;\n    var p = null;\n    var gp = null;\n    var found = null;\n    var dir = true;\n\n    while (node.get_child(dir) !== null) {\n      var last = dir;\n      gp = p;\n      p = node;\n      node = node.get_child(dir);\n\n      var cmp = this._comparator(data, node.data);\n\n      dir = cmp > 0;\n\n      if (cmp === 0) {\n        found = node;\n      }\n\n      if (!RBTree.is_red(node) && !RBTree.is_red(node.get_child(dir))) {\n        if (RBTree.is_red(node.get_child(!dir))) {\n          var sr = RBTree.single_rotate(node, dir);\n          p.set_child(last, sr);\n          p = sr;\n        } else if (!RBTree.is_red(node.get_child(!dir))) {\n          var sibling = p.get_child(!last);\n\n          if (sibling !== null) {\n            if (!RBTree.is_red(sibling.get_child(!last)) && !RBTree.is_red(sibling.get_child(last))) {\n              p.red = false;\n              sibling.red = true;\n              node.red = true;\n            } else {\n              var dir2 = gp.right === p;\n\n              if (RBTree.is_red(sibling.get_child(last))) {\n                gp.set_child(dir2, RBTree.double_rotate(p, last));\n              } else if (RBTree.is_red(sibling.get_child(!last))) {\n                gp.set_child(dir2, RBTree.single_rotate(p, last));\n              }\n\n              var gpc = gp.get_child(dir2);\n              gpc.red = true;\n              node.red = true;\n              gpc.left.red = false;\n              gpc.right.red = false;\n            }\n          }\n        }\n      }\n    }\n\n    if (found !== null) {\n      found.data = node.data;\n      p.set_child(p.right === node, node.get_child(node.left === null));\n      this.size--;\n    }\n\n    this._root = head.right;\n\n    if (this._root !== null) {\n      this._root.red = false;\n    }\n\n    return found !== null;\n  };\n\n  ;\n\n  RBTree.is_red = function (node) {\n    return node !== null && node.red;\n  };\n\n  RBTree.single_rotate = function (root, dir) {\n    var save = root.get_child(!dir);\n    root.set_child(!dir, save.get_child(dir));\n    save.set_child(dir, root);\n    root.red = true;\n    save.red = false;\n    return save;\n  };\n\n  RBTree.double_rotate = function (root, dir) {\n    root.set_child(!dir, RBTree.single_rotate(root.get_child(!dir), !dir));\n    return RBTree.single_rotate(root, dir);\n  };\n\n  return RBTree;\n}(TreeBase);\n\nexports.RBTree = RBTree;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PairingHeap = function () {\n  function PairingHeap(elem) {\n    this.elem = elem;\n    this.subheaps = [];\n  }\n\n  PairingHeap.prototype.toString = function (selector) {\n    var str = \"\",\n        needComma = false;\n\n    for (var i = 0; i < this.subheaps.length; ++i) {\n      var subheap = this.subheaps[i];\n\n      if (!subheap.elem) {\n        needComma = false;\n        continue;\n      }\n\n      if (needComma) {\n        str = str + \",\";\n      }\n\n      str = str + subheap.toString(selector);\n      needComma = true;\n    }\n\n    if (str !== \"\") {\n      str = \"(\" + str + \")\";\n    }\n\n    return (this.elem ? selector(this.elem) : \"\") + str;\n  };\n\n  PairingHeap.prototype.forEach = function (f) {\n    if (!this.empty()) {\n      f(this.elem, this);\n      this.subheaps.forEach(function (s) {\n        return s.forEach(f);\n      });\n    }\n  };\n\n  PairingHeap.prototype.count = function () {\n    return this.empty() ? 0 : 1 + this.subheaps.reduce(function (n, h) {\n      return n + h.count();\n    }, 0);\n  };\n\n  PairingHeap.prototype.min = function () {\n    return this.elem;\n  };\n\n  PairingHeap.prototype.empty = function () {\n    return this.elem == null;\n  };\n\n  PairingHeap.prototype.contains = function (h) {\n    if (this === h) return true;\n\n    for (var i = 0; i < this.subheaps.length; i++) {\n      if (this.subheaps[i].contains(h)) return true;\n    }\n\n    return false;\n  };\n\n  PairingHeap.prototype.isHeap = function (lessThan) {\n    var _this = this;\n\n    return this.subheaps.every(function (h) {\n      return lessThan(_this.elem, h.elem) && h.isHeap(lessThan);\n    });\n  };\n\n  PairingHeap.prototype.insert = function (obj, lessThan) {\n    return this.merge(new PairingHeap(obj), lessThan);\n  };\n\n  PairingHeap.prototype.merge = function (heap2, lessThan) {\n    if (this.empty()) return heap2;else if (heap2.empty()) return this;else if (lessThan(this.elem, heap2.elem)) {\n      this.subheaps.push(heap2);\n      return this;\n    } else {\n      heap2.subheaps.push(this);\n      return heap2;\n    }\n  };\n\n  PairingHeap.prototype.removeMin = function (lessThan) {\n    if (this.empty()) return null;else return this.mergePairs(lessThan);\n  };\n\n  PairingHeap.prototype.mergePairs = function (lessThan) {\n    if (this.subheaps.length == 0) return new PairingHeap(null);else if (this.subheaps.length == 1) {\n      return this.subheaps[0];\n    } else {\n      var firstPair = this.subheaps.pop().merge(this.subheaps.pop(), lessThan);\n      var remaining = this.mergePairs(lessThan);\n      return firstPair.merge(remaining, lessThan);\n    }\n  };\n\n  PairingHeap.prototype.decreaseKey = function (subheap, newValue, setHeapNode, lessThan) {\n    var newHeap = subheap.removeMin(lessThan);\n    subheap.elem = newHeap.elem;\n    subheap.subheaps = newHeap.subheaps;\n\n    if (setHeapNode !== null && newHeap.elem !== null) {\n      setHeapNode(subheap.elem, subheap);\n    }\n\n    var pairingNode = new PairingHeap(newValue);\n\n    if (setHeapNode !== null) {\n      setHeapNode(newValue, pairingNode);\n    }\n\n    return this.merge(pairingNode, lessThan);\n  };\n\n  return PairingHeap;\n}();\n\nexports.PairingHeap = PairingHeap;\n\nvar PriorityQueue = function () {\n  function PriorityQueue(lessThan) {\n    this.lessThan = lessThan;\n  }\n\n  PriorityQueue.prototype.top = function () {\n    if (this.empty()) {\n      return null;\n    }\n\n    return this.root.elem;\n  };\n\n  PriorityQueue.prototype.push = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    var pairingNode;\n\n    for (var i = 0, arg; arg = args[i]; ++i) {\n      pairingNode = new PairingHeap(arg);\n      this.root = this.empty() ? pairingNode : this.root.merge(pairingNode, this.lessThan);\n    }\n\n    return pairingNode;\n  };\n\n  PriorityQueue.prototype.empty = function () {\n    return !this.root || !this.root.elem;\n  };\n\n  PriorityQueue.prototype.isHeap = function () {\n    return this.root.isHeap(this.lessThan);\n  };\n\n  PriorityQueue.prototype.forEach = function (f) {\n    this.root.forEach(f);\n  };\n\n  PriorityQueue.prototype.pop = function () {\n    if (this.empty()) {\n      return null;\n    }\n\n    var obj = this.root.min();\n    this.root = this.root.removeMin(this.lessThan);\n    return obj;\n  };\n\n  PriorityQueue.prototype.reduceKey = function (heapNode, newKey, setHeapNode) {\n    if (setHeapNode === void 0) {\n      setHeapNode = null;\n    }\n\n    this.root = this.root.decreaseKey(heapNode, newKey, setHeapNode, this.lessThan);\n  };\n\n  PriorityQueue.prototype.toString = function (selector) {\n    return this.root.toString(selector);\n  };\n\n  PriorityQueue.prototype.count = function () {\n    return this.root.count();\n  };\n\n  return PriorityQueue;\n}();\n\nexports.PriorityQueue = PriorityQueue;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar rectangle_1 = require(\"./rectangle\");\n\nvar Point = function () {\n  function Point() {}\n\n  return Point;\n}();\n\nexports.Point = Point;\n\nvar LineSegment = function () {\n  function LineSegment(x1, y1, x2, y2) {\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n\n  return LineSegment;\n}();\n\nexports.LineSegment = LineSegment;\n\nvar PolyPoint = function (_super) {\n  __extends(PolyPoint, _super);\n\n  function PolyPoint() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return PolyPoint;\n}(Point);\n\nexports.PolyPoint = PolyPoint;\n\nfunction isLeft(P0, P1, P2) {\n  return (P1.x - P0.x) * (P2.y - P0.y) - (P2.x - P0.x) * (P1.y - P0.y);\n}\n\nexports.isLeft = isLeft;\n\nfunction above(p, vi, vj) {\n  return isLeft(p, vi, vj) > 0;\n}\n\nfunction below(p, vi, vj) {\n  return isLeft(p, vi, vj) < 0;\n}\n\nfunction ConvexHull(S) {\n  var P = S.slice(0).sort(function (a, b) {\n    return a.x !== b.x ? b.x - a.x : b.y - a.y;\n  });\n  var n = S.length,\n      i;\n  var minmin = 0;\n  var xmin = P[0].x;\n\n  for (i = 1; i < n; ++i) {\n    if (P[i].x !== xmin) break;\n  }\n\n  var minmax = i - 1;\n  var H = [];\n  H.push(P[minmin]);\n\n  if (minmax === n - 1) {\n    if (P[minmax].y !== P[minmin].y) H.push(P[minmax]);\n  } else {\n    var maxmin,\n        maxmax = n - 1;\n    var xmax = P[n - 1].x;\n\n    for (i = n - 2; i >= 0; i--) {\n      if (P[i].x !== xmax) break;\n    }\n\n    maxmin = i + 1;\n    i = minmax;\n\n    while (++i <= maxmin) {\n      if (isLeft(P[minmin], P[maxmin], P[i]) >= 0 && i < maxmin) continue;\n\n      while (H.length > 1) {\n        if (isLeft(H[H.length - 2], H[H.length - 1], P[i]) > 0) break;else H.length -= 1;\n      }\n\n      if (i != minmin) H.push(P[i]);\n    }\n\n    if (maxmax != maxmin) H.push(P[maxmax]);\n    var bot = H.length;\n    i = maxmin;\n\n    while (--i >= minmax) {\n      if (isLeft(P[maxmax], P[minmax], P[i]) >= 0 && i > minmax) continue;\n\n      while (H.length > bot) {\n        if (isLeft(H[H.length - 2], H[H.length - 1], P[i]) > 0) break;else H.length -= 1;\n      }\n\n      if (i != minmin) H.push(P[i]);\n    }\n  }\n\n  return H;\n}\n\nexports.ConvexHull = ConvexHull;\n\nfunction clockwiseRadialSweep(p, P, f) {\n  P.slice(0).sort(function (a, b) {\n    return Math.atan2(a.y - p.y, a.x - p.x) - Math.atan2(b.y - p.y, b.x - p.x);\n  }).forEach(f);\n}\n\nexports.clockwiseRadialSweep = clockwiseRadialSweep;\n\nfunction nextPolyPoint(p, ps) {\n  if (p.polyIndex === ps.length - 1) return ps[0];\n  return ps[p.polyIndex + 1];\n}\n\nfunction prevPolyPoint(p, ps) {\n  if (p.polyIndex === 0) return ps[ps.length - 1];\n  return ps[p.polyIndex - 1];\n}\n\nfunction tangent_PointPolyC(P, V) {\n  var Vclosed = V.slice(0);\n  Vclosed.push(V[0]);\n  return {\n    rtan: Rtangent_PointPolyC(P, Vclosed),\n    ltan: Ltangent_PointPolyC(P, Vclosed)\n  };\n}\n\nfunction Rtangent_PointPolyC(P, V) {\n  var n = V.length - 1;\n  var a, b, c;\n  var upA, dnC;\n  if (below(P, V[1], V[0]) && !above(P, V[n - 1], V[0])) return 0;\n\n  for (a = 0, b = n;;) {\n    if (b - a === 1) if (above(P, V[a], V[b])) return a;else return b;\n    c = Math.floor((a + b) / 2);\n    dnC = below(P, V[c + 1], V[c]);\n    if (dnC && !above(P, V[c - 1], V[c])) return c;\n    upA = above(P, V[a + 1], V[a]);\n\n    if (upA) {\n      if (dnC) b = c;else {\n        if (above(P, V[a], V[c])) b = c;else a = c;\n      }\n    } else {\n      if (!dnC) a = c;else {\n        if (below(P, V[a], V[c])) b = c;else a = c;\n      }\n    }\n  }\n}\n\nfunction Ltangent_PointPolyC(P, V) {\n  var n = V.length - 1;\n  var a, b, c;\n  var dnA, dnC;\n  if (above(P, V[n - 1], V[0]) && !below(P, V[1], V[0])) return 0;\n\n  for (a = 0, b = n;;) {\n    if (b - a === 1) if (below(P, V[a], V[b])) return a;else return b;\n    c = Math.floor((a + b) / 2);\n    dnC = below(P, V[c + 1], V[c]);\n    if (above(P, V[c - 1], V[c]) && !dnC) return c;\n    dnA = below(P, V[a + 1], V[a]);\n\n    if (dnA) {\n      if (!dnC) b = c;else {\n        if (below(P, V[a], V[c])) b = c;else a = c;\n      }\n    } else {\n      if (dnC) a = c;else {\n        if (above(P, V[a], V[c])) b = c;else a = c;\n      }\n    }\n  }\n}\n\nfunction tangent_PolyPolyC(V, W, t1, t2, cmp1, cmp2) {\n  var ix1, ix2;\n  ix1 = t1(W[0], V);\n  ix2 = t2(V[ix1], W);\n  var done = false;\n\n  while (!done) {\n    done = true;\n\n    while (true) {\n      if (ix1 === V.length - 1) ix1 = 0;\n      if (cmp1(W[ix2], V[ix1], V[ix1 + 1])) break;\n      ++ix1;\n    }\n\n    while (true) {\n      if (ix2 === 0) ix2 = W.length - 1;\n      if (cmp2(V[ix1], W[ix2], W[ix2 - 1])) break;\n      --ix2;\n      done = false;\n    }\n  }\n\n  return {\n    t1: ix1,\n    t2: ix2\n  };\n}\n\nexports.tangent_PolyPolyC = tangent_PolyPolyC;\n\nfunction LRtangent_PolyPolyC(V, W) {\n  var rl = RLtangent_PolyPolyC(W, V);\n  return {\n    t1: rl.t2,\n    t2: rl.t1\n  };\n}\n\nexports.LRtangent_PolyPolyC = LRtangent_PolyPolyC;\n\nfunction RLtangent_PolyPolyC(V, W) {\n  return tangent_PolyPolyC(V, W, Rtangent_PointPolyC, Ltangent_PointPolyC, above, below);\n}\n\nexports.RLtangent_PolyPolyC = RLtangent_PolyPolyC;\n\nfunction LLtangent_PolyPolyC(V, W) {\n  return tangent_PolyPolyC(V, W, Ltangent_PointPolyC, Ltangent_PointPolyC, below, below);\n}\n\nexports.LLtangent_PolyPolyC = LLtangent_PolyPolyC;\n\nfunction RRtangent_PolyPolyC(V, W) {\n  return tangent_PolyPolyC(V, W, Rtangent_PointPolyC, Rtangent_PointPolyC, above, above);\n}\n\nexports.RRtangent_PolyPolyC = RRtangent_PolyPolyC;\n\nvar BiTangent = function () {\n  function BiTangent(t1, t2) {\n    this.t1 = t1;\n    this.t2 = t2;\n  }\n\n  return BiTangent;\n}();\n\nexports.BiTangent = BiTangent;\n\nvar BiTangents = function () {\n  function BiTangents() {}\n\n  return BiTangents;\n}();\n\nexports.BiTangents = BiTangents;\n\nvar TVGPoint = function (_super) {\n  __extends(TVGPoint, _super);\n\n  function TVGPoint() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return TVGPoint;\n}(Point);\n\nexports.TVGPoint = TVGPoint;\n\nvar VisibilityVertex = function () {\n  function VisibilityVertex(id, polyid, polyvertid, p) {\n    this.id = id;\n    this.polyid = polyid;\n    this.polyvertid = polyvertid;\n    this.p = p;\n    p.vv = this;\n  }\n\n  return VisibilityVertex;\n}();\n\nexports.VisibilityVertex = VisibilityVertex;\n\nvar VisibilityEdge = function () {\n  function VisibilityEdge(source, target) {\n    this.source = source;\n    this.target = target;\n  }\n\n  VisibilityEdge.prototype.length = function () {\n    var dx = this.source.p.x - this.target.p.x;\n    var dy = this.source.p.y - this.target.p.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  return VisibilityEdge;\n}();\n\nexports.VisibilityEdge = VisibilityEdge;\n\nvar TangentVisibilityGraph = function () {\n  function TangentVisibilityGraph(P, g0) {\n    this.P = P;\n    this.V = [];\n    this.E = [];\n\n    if (!g0) {\n      var n = P.length;\n\n      for (var i = 0; i < n; i++) {\n        var p = P[i];\n\n        for (var j = 0; j < p.length; ++j) {\n          var pj = p[j],\n              vv = new VisibilityVertex(this.V.length, i, j, pj);\n          this.V.push(vv);\n          if (j > 0) this.E.push(new VisibilityEdge(p[j - 1].vv, vv));\n        }\n\n        if (p.length > 1) this.E.push(new VisibilityEdge(p[0].vv, p[p.length - 1].vv));\n      }\n\n      for (var i = 0; i < n - 1; i++) {\n        var Pi = P[i];\n\n        for (var j = i + 1; j < n; j++) {\n          var Pj = P[j],\n              t = tangents(Pi, Pj);\n\n          for (var q in t) {\n            var c = t[q],\n                source = Pi[c.t1],\n                target = Pj[c.t2];\n            this.addEdgeIfVisible(source, target, i, j);\n          }\n        }\n      }\n    } else {\n      this.V = g0.V.slice(0);\n      this.E = g0.E.slice(0);\n    }\n  }\n\n  TangentVisibilityGraph.prototype.addEdgeIfVisible = function (u, v, i1, i2) {\n    if (!this.intersectsPolys(new LineSegment(u.x, u.y, v.x, v.y), i1, i2)) {\n      this.E.push(new VisibilityEdge(u.vv, v.vv));\n    }\n  };\n\n  TangentVisibilityGraph.prototype.addPoint = function (p, i1) {\n    var n = this.P.length;\n    this.V.push(new VisibilityVertex(this.V.length, n, 0, p));\n\n    for (var i = 0; i < n; ++i) {\n      if (i === i1) continue;\n      var poly = this.P[i],\n          t = tangent_PointPolyC(p, poly);\n      this.addEdgeIfVisible(p, poly[t.ltan], i1, i);\n      this.addEdgeIfVisible(p, poly[t.rtan], i1, i);\n    }\n\n    return p.vv;\n  };\n\n  TangentVisibilityGraph.prototype.intersectsPolys = function (l, i1, i2) {\n    for (var i = 0, n = this.P.length; i < n; ++i) {\n      if (i != i1 && i != i2 && intersects(l, this.P[i]).length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  return TangentVisibilityGraph;\n}();\n\nexports.TangentVisibilityGraph = TangentVisibilityGraph;\n\nfunction intersects(l, P) {\n  var ints = [];\n\n  for (var i = 1, n = P.length; i < n; ++i) {\n    var _int = rectangle_1.Rectangle.lineIntersection(l.x1, l.y1, l.x2, l.y2, P[i - 1].x, P[i - 1].y, P[i].x, P[i].y);\n\n    if (_int) ints.push(_int);\n  }\n\n  return ints;\n}\n\nfunction tangents(V, W) {\n  var m = V.length - 1,\n      n = W.length - 1;\n  var bt = new BiTangents();\n\n  for (var i = 0; i < m; ++i) {\n    for (var j = 0; j < n; ++j) {\n      var v1 = V[i == 0 ? m - 1 : i - 1];\n      var v2 = V[i];\n      var v3 = V[i + 1];\n      var w1 = W[j == 0 ? n - 1 : j - 1];\n      var w2 = W[j];\n      var w3 = W[j + 1];\n      var v1v2w2 = isLeft(v1, v2, w2);\n      var v2w1w2 = isLeft(v2, w1, w2);\n      var v2w2w3 = isLeft(v2, w2, w3);\n      var w1w2v2 = isLeft(w1, w2, v2);\n      var w2v1v2 = isLeft(w2, v1, v2);\n      var w2v2v3 = isLeft(w2, v2, v3);\n\n      if (v1v2w2 >= 0 && v2w1w2 >= 0 && v2w2w3 < 0 && w1w2v2 >= 0 && w2v1v2 >= 0 && w2v2v3 < 0) {\n        bt.ll = new BiTangent(i, j);\n      } else if (v1v2w2 <= 0 && v2w1w2 <= 0 && v2w2w3 > 0 && w1w2v2 <= 0 && w2v1v2 <= 0 && w2v2v3 > 0) {\n        bt.rr = new BiTangent(i, j);\n      } else if (v1v2w2 <= 0 && v2w1w2 > 0 && v2w2w3 <= 0 && w1w2v2 >= 0 && w2v1v2 < 0 && w2v2v3 >= 0) {\n        bt.rl = new BiTangent(i, j);\n      } else if (v1v2w2 >= 0 && v2w1w2 < 0 && v2w2w3 >= 0 && w1w2v2 <= 0 && w2v1v2 > 0 && w2v2v3 <= 0) {\n        bt.lr = new BiTangent(i, j);\n      }\n    }\n  }\n\n  return bt;\n}\n\nexports.tangents = tangents;\n\nfunction isPointInsidePoly(p, poly) {\n  for (var i = 1, n = poly.length; i < n; ++i) {\n    if (below(poly[i - 1], poly[i], p)) return false;\n  }\n\n  return true;\n}\n\nfunction isAnyPInQ(p, q) {\n  return !p.every(function (v) {\n    return !isPointInsidePoly(v, q);\n  });\n}\n\nfunction polysOverlap(p, q) {\n  if (isAnyPInQ(p, q)) return true;\n  if (isAnyPInQ(q, p)) return true;\n\n  for (var i = 1, n = p.length; i < n; ++i) {\n    var v = p[i],\n        u = p[i - 1];\n    if (intersects(new LineSegment(u.x, u.y, v.x, v.y), q).length > 0) return true;\n  }\n\n  return false;\n}\n\nexports.polysOverlap = polysOverlap;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar packingOptions = {\n  PADDING: 10,\n  GOLDEN_SECTION: (1 + Math.sqrt(5)) / 2,\n  FLOAT_EPSILON: 0.0001,\n  MAX_INERATIONS: 100\n};\n\nfunction applyPacking(graphs, w, h, node_size, desired_ratio, centerGraph) {\n  if (desired_ratio === void 0) {\n    desired_ratio = 1;\n  }\n\n  if (centerGraph === void 0) {\n    centerGraph = true;\n  }\n\n  var init_x = 0,\n      init_y = 0,\n      svg_width = w,\n      svg_height = h,\n      desired_ratio = typeof desired_ratio !== 'undefined' ? desired_ratio : 1,\n      node_size = typeof node_size !== 'undefined' ? node_size : 0,\n      real_width = 0,\n      real_height = 0,\n      min_width = 0,\n      global_bottom = 0,\n      line = [];\n  if (graphs.length == 0) return;\n  calculate_bb(graphs);\n  apply(graphs, desired_ratio);\n\n  if (centerGraph) {\n    put_nodes_to_right_positions(graphs);\n  }\n\n  function calculate_bb(graphs) {\n    graphs.forEach(function (g) {\n      calculate_single_bb(g);\n    });\n\n    function calculate_single_bb(graph) {\n      var min_x = Number.MAX_VALUE,\n          min_y = Number.MAX_VALUE,\n          max_x = 0,\n          max_y = 0;\n      graph.array.forEach(function (v) {\n        var w = typeof v.width !== 'undefined' ? v.width : node_size;\n        var h = typeof v.height !== 'undefined' ? v.height : node_size;\n        w /= 2;\n        h /= 2;\n        max_x = Math.max(v.x + w, max_x);\n        min_x = Math.min(v.x - w, min_x);\n        max_y = Math.max(v.y + h, max_y);\n        min_y = Math.min(v.y - h, min_y);\n      });\n      graph.width = max_x - min_x;\n      graph.height = max_y - min_y;\n    }\n  }\n\n  function put_nodes_to_right_positions(graphs) {\n    graphs.forEach(function (g) {\n      var center = {\n        x: 0,\n        y: 0\n      };\n      g.array.forEach(function (node) {\n        center.x += node.x;\n        center.y += node.y;\n      });\n      center.x /= g.array.length;\n      center.y /= g.array.length;\n      var corner = {\n        x: center.x - g.width / 2,\n        y: center.y - g.height / 2\n      };\n      var offset = {\n        x: g.x - corner.x + svg_width / 2 - real_width / 2,\n        y: g.y - corner.y + svg_height / 2 - real_height / 2\n      };\n      g.array.forEach(function (node) {\n        node.x += offset.x;\n        node.y += offset.y;\n      });\n    });\n  }\n\n  function apply(data, desired_ratio) {\n    var curr_best_f = Number.POSITIVE_INFINITY;\n    var curr_best = 0;\n    data.sort(function (a, b) {\n      return b.height - a.height;\n    });\n    min_width = data.reduce(function (a, b) {\n      return a.width < b.width ? a.width : b.width;\n    });\n    var left = x1 = min_width;\n    var right = x2 = get_entire_width(data);\n    var iterationCounter = 0;\n    var f_x1 = Number.MAX_VALUE;\n    var f_x2 = Number.MAX_VALUE;\n    var flag = -1;\n    var dx = Number.MAX_VALUE;\n    var df = Number.MAX_VALUE;\n\n    while (dx > min_width || df > packingOptions.FLOAT_EPSILON) {\n      if (flag != 1) {\n        var x1 = right - (right - left) / packingOptions.GOLDEN_SECTION;\n        var f_x1 = step(data, x1);\n      }\n\n      if (flag != 0) {\n        var x2 = left + (right - left) / packingOptions.GOLDEN_SECTION;\n        var f_x2 = step(data, x2);\n      }\n\n      dx = Math.abs(x1 - x2);\n      df = Math.abs(f_x1 - f_x2);\n\n      if (f_x1 < curr_best_f) {\n        curr_best_f = f_x1;\n        curr_best = x1;\n      }\n\n      if (f_x2 < curr_best_f) {\n        curr_best_f = f_x2;\n        curr_best = x2;\n      }\n\n      if (f_x1 > f_x2) {\n        left = x1;\n        x1 = x2;\n        f_x1 = f_x2;\n        flag = 1;\n      } else {\n        right = x2;\n        x2 = x1;\n        f_x2 = f_x1;\n        flag = 0;\n      }\n\n      if (iterationCounter++ > 100) {\n        break;\n      }\n    }\n\n    step(data, curr_best);\n  }\n\n  function step(data, max_width) {\n    line = [];\n    real_width = 0;\n    real_height = 0;\n    global_bottom = init_y;\n\n    for (var i = 0; i < data.length; i++) {\n      var o = data[i];\n      put_rect(o, max_width);\n    }\n\n    return Math.abs(get_real_ratio() - desired_ratio);\n  }\n\n  function put_rect(rect, max_width) {\n    var parent = undefined;\n\n    for (var i = 0; i < line.length; i++) {\n      if (line[i].space_left >= rect.height && line[i].x + line[i].width + rect.width + packingOptions.PADDING - max_width <= packingOptions.FLOAT_EPSILON) {\n        parent = line[i];\n        break;\n      }\n    }\n\n    line.push(rect);\n\n    if (parent !== undefined) {\n      rect.x = parent.x + parent.width + packingOptions.PADDING;\n      rect.y = parent.bottom;\n      rect.space_left = rect.height;\n      rect.bottom = rect.y;\n      parent.space_left -= rect.height + packingOptions.PADDING;\n      parent.bottom += rect.height + packingOptions.PADDING;\n    } else {\n      rect.y = global_bottom;\n      global_bottom += rect.height + packingOptions.PADDING;\n      rect.x = init_x;\n      rect.bottom = rect.y;\n      rect.space_left = rect.height;\n    }\n\n    if (rect.y + rect.height - real_height > -packingOptions.FLOAT_EPSILON) real_height = rect.y + rect.height - init_y;\n    if (rect.x + rect.width - real_width > -packingOptions.FLOAT_EPSILON) real_width = rect.x + rect.width - init_x;\n  }\n\n  ;\n\n  function get_entire_width(data) {\n    var width = 0;\n    data.forEach(function (d) {\n      return width += d.width + packingOptions.PADDING;\n    });\n    return width;\n  }\n\n  function get_real_ratio() {\n    return real_width / real_height;\n  }\n}\n\nexports.applyPacking = applyPacking;\n\nfunction separateGraphs(nodes, links) {\n  var marks = {};\n  var ways = {};\n  var graphs = [];\n  var clusters = 0;\n\n  for (var i = 0; i < links.length; i++) {\n    var link = links[i];\n    var n1 = link.source;\n    var n2 = link.target;\n    if (ways[n1.index]) ways[n1.index].push(n2);else ways[n1.index] = [n2];\n    if (ways[n2.index]) ways[n2.index].push(n1);else ways[n2.index] = [n1];\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    var node = nodes[i];\n    if (marks[node.index]) continue;\n    explore_node(node, true);\n  }\n\n  function explore_node(n, is_new) {\n    if (marks[n.index] !== undefined) return;\n\n    if (is_new) {\n      clusters++;\n      graphs.push({\n        array: []\n      });\n    }\n\n    marks[n.index] = clusters;\n    graphs[clusters - 1].array.push(n);\n    var adjacent = ways[n.index];\n    if (!adjacent) return;\n\n    for (var j = 0; j < adjacent.length; j++) {\n      explore_node(adjacent[j], false);\n    }\n  }\n\n  return graphs;\n}\n\nexports.separateGraphs = separateGraphs;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar rectangle_1 = require(\"./rectangle\");\n\nvar vpsc_1 = require(\"./vpsc\");\n\nvar shortestpaths_1 = require(\"./shortestpaths\");\n\nvar NodeWrapper = function () {\n  function NodeWrapper(id, rect, children) {\n    this.id = id;\n    this.rect = rect;\n    this.children = children;\n    this.leaf = typeof children === 'undefined' || children.length === 0;\n  }\n\n  return NodeWrapper;\n}();\n\nexports.NodeWrapper = NodeWrapper;\n\nvar Vert = function () {\n  function Vert(id, x, y, node, line) {\n    if (node === void 0) {\n      node = null;\n    }\n\n    if (line === void 0) {\n      line = null;\n    }\n\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.node = node;\n    this.line = line;\n  }\n\n  return Vert;\n}();\n\nexports.Vert = Vert;\n\nvar LongestCommonSubsequence = function () {\n  function LongestCommonSubsequence(s, t) {\n    this.s = s;\n    this.t = t;\n    var mf = LongestCommonSubsequence.findMatch(s, t);\n    var tr = t.slice(0).reverse();\n    var mr = LongestCommonSubsequence.findMatch(s, tr);\n\n    if (mf.length >= mr.length) {\n      this.length = mf.length;\n      this.si = mf.si;\n      this.ti = mf.ti;\n      this.reversed = false;\n    } else {\n      this.length = mr.length;\n      this.si = mr.si;\n      this.ti = t.length - mr.ti - mr.length;\n      this.reversed = true;\n    }\n  }\n\n  LongestCommonSubsequence.findMatch = function (s, t) {\n    var m = s.length;\n    var n = t.length;\n    var match = {\n      length: 0,\n      si: -1,\n      ti: -1\n    };\n    var l = new Array(m);\n\n    for (var i = 0; i < m; i++) {\n      l[i] = new Array(n);\n\n      for (var j = 0; j < n; j++) {\n        if (s[i] === t[j]) {\n          var v = l[i][j] = i === 0 || j === 0 ? 1 : l[i - 1][j - 1] + 1;\n\n          if (v > match.length) {\n            match.length = v;\n            match.si = i - v + 1;\n            match.ti = j - v + 1;\n          }\n\n          ;\n        } else l[i][j] = 0;\n      }\n    }\n\n    return match;\n  };\n\n  LongestCommonSubsequence.prototype.getSequence = function () {\n    return this.length >= 0 ? this.s.slice(this.si, this.si + this.length) : [];\n  };\n\n  return LongestCommonSubsequence;\n}();\n\nexports.LongestCommonSubsequence = LongestCommonSubsequence;\n\nvar GridRouter = function () {\n  function GridRouter(originalnodes, accessor, groupPadding) {\n    var _this = this;\n\n    if (groupPadding === void 0) {\n      groupPadding = 12;\n    }\n\n    this.originalnodes = originalnodes;\n    this.groupPadding = groupPadding;\n    this.leaves = null;\n    this.nodes = originalnodes.map(function (v, i) {\n      return new NodeWrapper(i, accessor.getBounds(v), accessor.getChildren(v));\n    });\n    this.leaves = this.nodes.filter(function (v) {\n      return v.leaf;\n    });\n    this.groups = this.nodes.filter(function (g) {\n      return !g.leaf;\n    });\n    this.cols = this.getGridLines('x');\n    this.rows = this.getGridLines('y');\n    this.groups.forEach(function (v) {\n      return v.children.forEach(function (c) {\n        return _this.nodes[c].parent = v;\n      });\n    });\n    this.root = {\n      children: []\n    };\n    this.nodes.forEach(function (v) {\n      if (typeof v.parent === 'undefined') {\n        v.parent = _this.root;\n\n        _this.root.children.push(v.id);\n      }\n\n      v.ports = [];\n    });\n    this.backToFront = this.nodes.slice(0);\n    this.backToFront.sort(function (x, y) {\n      return _this.getDepth(x) - _this.getDepth(y);\n    });\n    var frontToBackGroups = this.backToFront.slice(0).reverse().filter(function (g) {\n      return !g.leaf;\n    });\n    frontToBackGroups.forEach(function (v) {\n      var r = rectangle_1.Rectangle.empty();\n      v.children.forEach(function (c) {\n        return r = r.union(_this.nodes[c].rect);\n      });\n      v.rect = r.inflate(_this.groupPadding);\n    });\n    var colMids = this.midPoints(this.cols.map(function (r) {\n      return r.pos;\n    }));\n    var rowMids = this.midPoints(this.rows.map(function (r) {\n      return r.pos;\n    }));\n    var rowx = colMids[0],\n        rowX = colMids[colMids.length - 1];\n    var coly = rowMids[0],\n        colY = rowMids[rowMids.length - 1];\n    var hlines = this.rows.map(function (r) {\n      return {\n        x1: rowx,\n        x2: rowX,\n        y1: r.pos,\n        y2: r.pos\n      };\n    }).concat(rowMids.map(function (m) {\n      return {\n        x1: rowx,\n        x2: rowX,\n        y1: m,\n        y2: m\n      };\n    }));\n    var vlines = this.cols.map(function (c) {\n      return {\n        x1: c.pos,\n        x2: c.pos,\n        y1: coly,\n        y2: colY\n      };\n    }).concat(colMids.map(function (m) {\n      return {\n        x1: m,\n        x2: m,\n        y1: coly,\n        y2: colY\n      };\n    }));\n    var lines = hlines.concat(vlines);\n    lines.forEach(function (l) {\n      return l.verts = [];\n    });\n    this.verts = [];\n    this.edges = [];\n    hlines.forEach(function (h) {\n      return vlines.forEach(function (v) {\n        var p = new Vert(_this.verts.length, v.x1, h.y1);\n        h.verts.push(p);\n        v.verts.push(p);\n\n        _this.verts.push(p);\n\n        var i = _this.backToFront.length;\n\n        while (i-- > 0) {\n          var node = _this.backToFront[i],\n              r = node.rect;\n          var dx = Math.abs(p.x - r.cx()),\n              dy = Math.abs(p.y - r.cy());\n\n          if (dx < r.width() / 2 && dy < r.height() / 2) {\n            p.node = node;\n            break;\n          }\n        }\n      });\n    });\n    lines.forEach(function (l, li) {\n      _this.nodes.forEach(function (v, i) {\n        v.rect.lineIntersections(l.x1, l.y1, l.x2, l.y2).forEach(function (intersect, j) {\n          var p = new Vert(_this.verts.length, intersect.x, intersect.y, v, l);\n\n          _this.verts.push(p);\n\n          l.verts.push(p);\n          v.ports.push(p);\n        });\n      });\n\n      var isHoriz = Math.abs(l.y1 - l.y2) < 0.1;\n\n      var delta = function delta(a, b) {\n        return isHoriz ? b.x - a.x : b.y - a.y;\n      };\n\n      l.verts.sort(delta);\n\n      for (var i = 1; i < l.verts.length; i++) {\n        var u = l.verts[i - 1],\n            v = l.verts[i];\n        if (u.node && u.node === v.node && u.node.leaf) continue;\n\n        _this.edges.push({\n          source: u.id,\n          target: v.id,\n          length: Math.abs(delta(u, v))\n        });\n      }\n    });\n  }\n\n  GridRouter.prototype.avg = function (a) {\n    return a.reduce(function (x, y) {\n      return x + y;\n    }) / a.length;\n  };\n\n  GridRouter.prototype.getGridLines = function (axis) {\n    var columns = [];\n    var ls = this.leaves.slice(0, this.leaves.length);\n\n    while (ls.length > 0) {\n      var overlapping = ls.filter(function (v) {\n        return v.rect['overlap' + axis.toUpperCase()](ls[0].rect);\n      });\n      var col = {\n        nodes: overlapping,\n        pos: this.avg(overlapping.map(function (v) {\n          return v.rect['c' + axis]();\n        }))\n      };\n      columns.push(col);\n      col.nodes.forEach(function (v) {\n        return ls.splice(ls.indexOf(v), 1);\n      });\n    }\n\n    columns.sort(function (a, b) {\n      return a.pos - b.pos;\n    });\n    return columns;\n  };\n\n  GridRouter.prototype.getDepth = function (v) {\n    var depth = 0;\n\n    while (v.parent !== this.root) {\n      depth++;\n      v = v.parent;\n    }\n\n    return depth;\n  };\n\n  GridRouter.prototype.midPoints = function (a) {\n    var gap = a[1] - a[0];\n    var mids = [a[0] - gap / 2];\n\n    for (var i = 1; i < a.length; i++) {\n      mids.push((a[i] + a[i - 1]) / 2);\n    }\n\n    mids.push(a[a.length - 1] + gap / 2);\n    return mids;\n  };\n\n  GridRouter.prototype.findLineage = function (v) {\n    var lineage = [v];\n\n    do {\n      v = v.parent;\n      lineage.push(v);\n    } while (v !== this.root);\n\n    return lineage.reverse();\n  };\n\n  GridRouter.prototype.findAncestorPathBetween = function (a, b) {\n    var aa = this.findLineage(a),\n        ba = this.findLineage(b),\n        i = 0;\n\n    while (aa[i] === ba[i]) {\n      i++;\n    }\n\n    return {\n      commonAncestor: aa[i - 1],\n      lineages: aa.slice(i).concat(ba.slice(i))\n    };\n  };\n\n  GridRouter.prototype.siblingObstacles = function (a, b) {\n    var _this = this;\n\n    var path = this.findAncestorPathBetween(a, b);\n    var lineageLookup = {};\n    path.lineages.forEach(function (v) {\n      return lineageLookup[v.id] = {};\n    });\n    var obstacles = path.commonAncestor.children.filter(function (v) {\n      return !(v in lineageLookup);\n    });\n    path.lineages.filter(function (v) {\n      return v.parent !== path.commonAncestor;\n    }).forEach(function (v) {\n      return obstacles = obstacles.concat(v.parent.children.filter(function (c) {\n        return c !== v.id;\n      }));\n    });\n    return obstacles.map(function (v) {\n      return _this.nodes[v];\n    });\n  };\n\n  GridRouter.getSegmentSets = function (routes, x, y) {\n    var vsegments = [];\n\n    for (var ei = 0; ei < routes.length; ei++) {\n      var route = routes[ei];\n\n      for (var si = 0; si < route.length; si++) {\n        var s = route[si];\n        s.edgeid = ei;\n        s.i = si;\n        var sdx = s[1][x] - s[0][x];\n\n        if (Math.abs(sdx) < 0.1) {\n          vsegments.push(s);\n        }\n      }\n    }\n\n    vsegments.sort(function (a, b) {\n      return a[0][x] - b[0][x];\n    });\n    var vsegmentsets = [];\n    var segmentset = null;\n\n    for (var i = 0; i < vsegments.length; i++) {\n      var s = vsegments[i];\n\n      if (!segmentset || Math.abs(s[0][x] - segmentset.pos) > 0.1) {\n        segmentset = {\n          pos: s[0][x],\n          segments: []\n        };\n        vsegmentsets.push(segmentset);\n      }\n\n      segmentset.segments.push(s);\n    }\n\n    return vsegmentsets;\n  };\n\n  GridRouter.nudgeSegs = function (x, y, routes, segments, leftOf, gap) {\n    var n = segments.length;\n    if (n <= 1) return;\n    var vs = segments.map(function (s) {\n      return new vpsc_1.Variable(s[0][x]);\n    });\n    var cs = [];\n\n    for (var i = 0; i < n; i++) {\n      for (var j = 0; j < n; j++) {\n        if (i === j) continue;\n        var s1 = segments[i],\n            s2 = segments[j],\n            e1 = s1.edgeid,\n            e2 = s2.edgeid,\n            lind = -1,\n            rind = -1;\n\n        if (x == 'x') {\n          if (leftOf(e1, e2)) {\n            if (s1[0][y] < s1[1][y]) {\n              lind = j, rind = i;\n            } else {\n              lind = i, rind = j;\n            }\n          }\n        } else {\n          if (leftOf(e1, e2)) {\n            if (s1[0][y] < s1[1][y]) {\n              lind = i, rind = j;\n            } else {\n              lind = j, rind = i;\n            }\n          }\n        }\n\n        if (lind >= 0) {\n          cs.push(new vpsc_1.Constraint(vs[lind], vs[rind], gap));\n        }\n      }\n    }\n\n    var solver = new vpsc_1.Solver(vs, cs);\n    solver.solve();\n    vs.forEach(function (v, i) {\n      var s = segments[i];\n      var pos = v.position();\n      s[0][x] = s[1][x] = pos;\n      var route = routes[s.edgeid];\n      if (s.i > 0) route[s.i - 1][1][x] = pos;\n      if (s.i < route.length - 1) route[s.i + 1][0][x] = pos;\n    });\n  };\n\n  GridRouter.nudgeSegments = function (routes, x, y, leftOf, gap) {\n    var vsegmentsets = GridRouter.getSegmentSets(routes, x, y);\n\n    for (var i = 0; i < vsegmentsets.length; i++) {\n      var ss = vsegmentsets[i];\n      var events = [];\n\n      for (var j = 0; j < ss.segments.length; j++) {\n        var s = ss.segments[j];\n        events.push({\n          type: 0,\n          s: s,\n          pos: Math.min(s[0][y], s[1][y])\n        });\n        events.push({\n          type: 1,\n          s: s,\n          pos: Math.max(s[0][y], s[1][y])\n        });\n      }\n\n      events.sort(function (a, b) {\n        return a.pos - b.pos + a.type - b.type;\n      });\n      var open = [];\n      var openCount = 0;\n      events.forEach(function (e) {\n        if (e.type === 0) {\n          open.push(e.s);\n          openCount++;\n        } else {\n          openCount--;\n        }\n\n        if (openCount == 0) {\n          GridRouter.nudgeSegs(x, y, routes, open, leftOf, gap);\n          open = [];\n        }\n      });\n    }\n  };\n\n  GridRouter.prototype.routeEdges = function (edges, nudgeGap, source, target) {\n    var _this = this;\n\n    var routePaths = edges.map(function (e) {\n      return _this.route(source(e), target(e));\n    });\n    var order = GridRouter.orderEdges(routePaths);\n    var routes = routePaths.map(function (e) {\n      return GridRouter.makeSegments(e);\n    });\n    GridRouter.nudgeSegments(routes, 'x', 'y', order, nudgeGap);\n    GridRouter.nudgeSegments(routes, 'y', 'x', order, nudgeGap);\n    GridRouter.unreverseEdges(routes, routePaths);\n    return routes;\n  };\n\n  GridRouter.unreverseEdges = function (routes, routePaths) {\n    routes.forEach(function (segments, i) {\n      var path = routePaths[i];\n\n      if (path.reversed) {\n        segments.reverse();\n        segments.forEach(function (segment) {\n          segment.reverse();\n        });\n      }\n    });\n  };\n\n  GridRouter.angleBetween2Lines = function (line1, line2) {\n    var angle1 = Math.atan2(line1[0].y - line1[1].y, line1[0].x - line1[1].x);\n    var angle2 = Math.atan2(line2[0].y - line2[1].y, line2[0].x - line2[1].x);\n    var diff = angle1 - angle2;\n\n    if (diff > Math.PI || diff < -Math.PI) {\n      diff = angle2 - angle1;\n    }\n\n    return diff;\n  };\n\n  GridRouter.isLeft = function (a, b, c) {\n    return (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x) <= 0;\n  };\n\n  GridRouter.getOrder = function (pairs) {\n    var outgoing = {};\n\n    for (var i = 0; i < pairs.length; i++) {\n      var p = pairs[i];\n      if (typeof outgoing[p.l] === 'undefined') outgoing[p.l] = {};\n      outgoing[p.l][p.r] = true;\n    }\n\n    return function (l, r) {\n      return typeof outgoing[l] !== 'undefined' && outgoing[l][r];\n    };\n  };\n\n  GridRouter.orderEdges = function (edges) {\n    var edgeOrder = [];\n\n    for (var i = 0; i < edges.length - 1; i++) {\n      for (var j = i + 1; j < edges.length; j++) {\n        var e = edges[i],\n            f = edges[j],\n            lcs = new LongestCommonSubsequence(e, f);\n        var u, vi, vj;\n        if (lcs.length === 0) continue;\n\n        if (lcs.reversed) {\n          f.reverse();\n          f.reversed = true;\n          lcs = new LongestCommonSubsequence(e, f);\n        }\n\n        if ((lcs.si <= 0 || lcs.ti <= 0) && (lcs.si + lcs.length >= e.length || lcs.ti + lcs.length >= f.length)) {\n          edgeOrder.push({\n            l: i,\n            r: j\n          });\n          continue;\n        }\n\n        if (lcs.si + lcs.length >= e.length || lcs.ti + lcs.length >= f.length) {\n          u = e[lcs.si + 1];\n          vj = e[lcs.si - 1];\n          vi = f[lcs.ti - 1];\n        } else {\n          u = e[lcs.si + lcs.length - 2];\n          vi = e[lcs.si + lcs.length];\n          vj = f[lcs.ti + lcs.length];\n        }\n\n        if (GridRouter.isLeft(u, vi, vj)) {\n          edgeOrder.push({\n            l: j,\n            r: i\n          });\n        } else {\n          edgeOrder.push({\n            l: i,\n            r: j\n          });\n        }\n      }\n    }\n\n    return GridRouter.getOrder(edgeOrder);\n  };\n\n  GridRouter.makeSegments = function (path) {\n    function copyPoint(p) {\n      return {\n        x: p.x,\n        y: p.y\n      };\n    }\n\n    var isStraight = function isStraight(a, b, c) {\n      return Math.abs((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)) < 0.001;\n    };\n\n    var segments = [];\n    var a = copyPoint(path[0]);\n\n    for (var i = 1; i < path.length; i++) {\n      var b = copyPoint(path[i]),\n          c = i < path.length - 1 ? path[i + 1] : null;\n\n      if (!c || !isStraight(a, b, c)) {\n        segments.push([a, b]);\n        a = b;\n      }\n    }\n\n    return segments;\n  };\n\n  GridRouter.prototype.route = function (s, t) {\n    var _this = this;\n\n    var source = this.nodes[s],\n        target = this.nodes[t];\n    this.obstacles = this.siblingObstacles(source, target);\n    var obstacleLookup = {};\n    this.obstacles.forEach(function (o) {\n      return obstacleLookup[o.id] = o;\n    });\n    this.passableEdges = this.edges.filter(function (e) {\n      var u = _this.verts[e.source],\n          v = _this.verts[e.target];\n      return !(u.node && u.node.id in obstacleLookup || v.node && v.node.id in obstacleLookup);\n    });\n\n    for (var i = 1; i < source.ports.length; i++) {\n      var u = source.ports[0].id;\n      var v = source.ports[i].id;\n      this.passableEdges.push({\n        source: u,\n        target: v,\n        length: 0\n      });\n    }\n\n    for (var i = 1; i < target.ports.length; i++) {\n      var u = target.ports[0].id;\n      var v = target.ports[i].id;\n      this.passableEdges.push({\n        source: u,\n        target: v,\n        length: 0\n      });\n    }\n\n    var getSource = function getSource(e) {\n      return e.source;\n    },\n        getTarget = function getTarget(e) {\n      return e.target;\n    },\n        getLength = function getLength(e) {\n      return e.length;\n    };\n\n    var shortestPathCalculator = new shortestpaths_1.Calculator(this.verts.length, this.passableEdges, getSource, getTarget, getLength);\n\n    var bendPenalty = function bendPenalty(u, v, w) {\n      var a = _this.verts[u],\n          b = _this.verts[v],\n          c = _this.verts[w];\n      var dx = Math.abs(c.x - a.x),\n          dy = Math.abs(c.y - a.y);\n      if (a.node === source && a.node === b.node || b.node === target && b.node === c.node) return 0;\n      return dx > 1 && dy > 1 ? 1000 : 0;\n    };\n\n    var shortestPath = shortestPathCalculator.PathFromNodeToNodeWithPrevCost(source.ports[0].id, target.ports[0].id, bendPenalty);\n    var pathPoints = shortestPath.reverse().map(function (vi) {\n      return _this.verts[vi];\n    });\n    pathPoints.push(this.nodes[target.id].ports[0]);\n    return pathPoints.filter(function (v, i) {\n      return !(i < pathPoints.length - 1 && pathPoints[i + 1].node === source && v.node === source || i > 0 && v.node === target && pathPoints[i - 1].node === target);\n    });\n  };\n\n  GridRouter.getRoutePath = function (route, cornerradius, arrowwidth, arrowheight) {\n    var result = {\n      routepath: 'M ' + route[0][0].x + ' ' + route[0][0].y + ' ',\n      arrowpath: ''\n    };\n\n    if (route.length > 1) {\n      for (var i = 0; i < route.length; i++) {\n        var li = route[i];\n        var x = li[1].x,\n            y = li[1].y;\n        var dx = x - li[0].x;\n        var dy = y - li[0].y;\n\n        if (i < route.length - 1) {\n          if (Math.abs(dx) > 0) {\n            x -= dx / Math.abs(dx) * cornerradius;\n          } else {\n            y -= dy / Math.abs(dy) * cornerradius;\n          }\n\n          result.routepath += 'L ' + x + ' ' + y + ' ';\n          var l = route[i + 1];\n          var x0 = l[0].x,\n              y0 = l[0].y;\n          var x1 = l[1].x;\n          var y1 = l[1].y;\n          dx = x1 - x0;\n          dy = y1 - y0;\n          var angle = GridRouter.angleBetween2Lines(li, l) < 0 ? 1 : 0;\n          var x2, y2;\n\n          if (Math.abs(dx) > 0) {\n            x2 = x0 + dx / Math.abs(dx) * cornerradius;\n            y2 = y0;\n          } else {\n            x2 = x0;\n            y2 = y0 + dy / Math.abs(dy) * cornerradius;\n          }\n\n          var cx = Math.abs(x2 - x);\n          var cy = Math.abs(y2 - y);\n          result.routepath += 'A ' + cx + ' ' + cy + ' 0 0 ' + angle + ' ' + x2 + ' ' + y2 + ' ';\n        } else {\n          var arrowtip = [x, y];\n          var arrowcorner1, arrowcorner2;\n\n          if (Math.abs(dx) > 0) {\n            x -= dx / Math.abs(dx) * arrowheight;\n            arrowcorner1 = [x, y + arrowwidth];\n            arrowcorner2 = [x, y - arrowwidth];\n          } else {\n            y -= dy / Math.abs(dy) * arrowheight;\n            arrowcorner1 = [x + arrowwidth, y];\n            arrowcorner2 = [x - arrowwidth, y];\n          }\n\n          result.routepath += 'L ' + x + ' ' + y + ' ';\n\n          if (arrowheight > 0) {\n            result.arrowpath = 'M ' + arrowtip[0] + ' ' + arrowtip[1] + ' L ' + arrowcorner1[0] + ' ' + arrowcorner1[1] + ' L ' + arrowcorner2[0] + ' ' + arrowcorner2[1];\n          }\n        }\n      }\n    } else {\n      var li = route[0];\n      var x = li[1].x,\n          y = li[1].y;\n      var dx = x - li[0].x;\n      var dy = y - li[0].y;\n      var arrowtip = [x, y];\n      var arrowcorner1, arrowcorner2;\n\n      if (Math.abs(dx) > 0) {\n        x -= dx / Math.abs(dx) * arrowheight;\n        arrowcorner1 = [x, y + arrowwidth];\n        arrowcorner2 = [x, y - arrowwidth];\n      } else {\n        y -= dy / Math.abs(dy) * arrowheight;\n        arrowcorner1 = [x + arrowwidth, y];\n        arrowcorner2 = [x - arrowwidth, y];\n      }\n\n      result.routepath += 'L ' + x + ' ' + y + ' ';\n\n      if (arrowheight > 0) {\n        result.arrowpath = 'M ' + arrowtip[0] + ' ' + arrowtip[1] + ' L ' + arrowcorner1[0] + ' ' + arrowcorner1[1] + ' L ' + arrowcorner2[0] + ' ' + arrowcorner2[1];\n      }\n    }\n\n    return result;\n  };\n\n  return GridRouter;\n}();\n\nexports.GridRouter = GridRouter;","\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./algorithm\"));\n\n__export(require(\"./box\"));\n\n__export(require(\"./conversion\"));\n\n__export(require(\"./cropped\"));\n\n__export(require(\"./delaunay-edges\"));\n\n__export(require(\"./distance\"));\n\n__export(require(\"./node-map\"));\n\n__export(require(\"./overlap\"));\n\n__export(require(\"./point\"));\n\n__export(require(\"./scale\"));\n\n__export(require(\"./vector\"));","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction createFunction(f) {\n  return f;\n}\n\nexports.createFunction = createFunction;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar vector_1 = require(\"./vector\");\n\nvar ROUND_PRECISION = -14;\n\nfunction toCartesian(vector, precision) {\n  if (precision === void 0) {\n    precision = ROUND_PRECISION;\n  }\n\n  return {\n    x: round(vector.length * Math.cos(vector.theta), precision),\n    y: round(vector.length * Math.sin(vector.theta), precision)\n  };\n}\n\nexports.toCartesian = toCartesian;\n\nfunction toPolar(vector, precision) {\n  if (precision === void 0) {\n    precision = ROUND_PRECISION;\n  }\n\n  var rad = Math.atan2(vector.y, vector.x);\n\n  if (rad < 0) {\n    rad = rad + 2 * Math.PI;\n  }\n\n  return {\n    length: vector_1.length(vector),\n    theta: rad,\n    angle: round(rad * 180 / Math.PI, precision)\n  };\n}\n\nexports.toPolar = toPolar;\n\nfunction round(number, precision) {\n  if (precision === void 0) {\n    precision = 0;\n  }\n\n  var multiplier = Math.pow(10, -precision);\n  return Math.round(number * multiplier) / multiplier;\n}\n\nexports.round = round;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = __importDefault(require(\"lodash\"));\n\nvar box_1 = require(\"./box\");\n\nfunction crop(graph) {\n  var minX = box_1.left(box_1.left(graph.nodes));\n  var minY = box_1.top(box_1.top(graph.nodes));\n  lodash_1.default.forEach(graph.nodes, function (n) {\n    n.x -= minX;\n    n.y -= minY;\n  });\n  return graph;\n}\n\nexports.crop = crop;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar delaunator_1 = __importDefault(require(\"delaunator\"));\n\nvar lodash_1 = __importDefault(require(\"lodash\"));\n\nvar overlap_1 = require(\"./overlap\");\n\nexports.default = delaunay;\n\nfunction delaunay(nodes) {\n  var del = delaunator_1.default.from(nodes, function (node) {\n    return node.x;\n  }, function (node) {\n    return node.y;\n  });\n  var hastable = [];\n  var triangles = lodash_1.default.chunk(del.triangles, 3); // create edges\n\n  var edges = [];\n  lodash_1.default.forEach(triangles, function (triangle) {\n    triangle.sort(function (a, b) {\n      return +a - +b;\n    });\n    var a = +triangle[0],\n        b = +triangle[1],\n        c = +triangle[2];\n    if (addable(hastable, a, b)) edges.push({\n      source: nodes[a].index,\n      target: nodes[b].index\n    });\n    if (addable(hastable, b, c)) edges.push({\n      source: nodes[b].index,\n      target: nodes[c].index\n    });\n    if (addable(hastable, a, c)) edges.push({\n      source: nodes[a].index,\n      target: nodes[c].index\n    });\n  });\n  return lodash_1.default.sortBy(edges, ['source', 'target']);\n}\n\nexports.delaunay = delaunay;\n\nfunction addable(hastable, i, j) {\n  if (hastable[i] === void 0 || hastable[i][j] !== true) {\n    if (!hastable[i]) hastable[i] = [];\n    hastable[i][j] = true;\n    return true;\n  }\n\n  return false;\n}\n/**\r\n * augment the delaunay triangulation with the overlaping nodes\r\n * @param nodes list of nodes\r\n * @param padding padding between nodes\r\n */\n\n\nfunction augmented(nodes, padding) {\n  return merge(delaunay(nodes), overlaps(nodes, padding));\n}\n\nexports.augmented = augmented;\n/**\r\n * Get all overlaps of the list of nodes\r\n * @param nodes\r\n * @param padding\r\n */\n\nfunction overlaps(nodes, padding) {\n  return lodash_1.default(overlap_1.getAllOverlaps(nodes, padding)).map(function (pair) {\n    pair.sort(function (a, b) {\n      return a.index - b.index;\n    });\n    return {\n      source: pair[0].index,\n      target: pair[1].index\n    };\n  }).sortBy(['source', 'target']).value();\n}\n/**\r\n * Merging multiple edge list while removing redundancy\r\n * @param edges1\r\n * @param edges2\r\n */\n\n\nfunction merge(edges1, edges2) {\n  var _a = edges1.length <= edges2.length ? [edges1, edges2] : [edges2, edges1],\n      iterated = _a[0],\n      iteratee = _a[1];\n\n  var added = [];\n  lodash_1.default.forEach(iterated, function (e1) {\n    var empty = true;\n    lodash_1.default.forEach(iteratee, function (e2) {\n      if (e1.source === e2.source && e1.target === e2.target) {\n        empty = false;\n        return false;\n      }\n\n      if (e1.source === e2.source && e1.target < e2.target || e1.source < e2.source) {\n        added.push(e1);\n        empty = false;\n        return false;\n      }\n    });\n    if (empty) added.push(e1);\n  });\n  return lodash_1.default.concat(added, iteratee);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar point_1 = require(\"./point\");\n\nvar vector_1 = require(\"./vector\");\n/**\r\n * @param n1\r\n * @param n2\r\n * @param padding\r\n *\r\n * @returns the closest position of n2 relative to n1 while avoiding overlapping, along the (n1,n2) line.\r\n */\n\n\nfunction optimalVector(n1, n2, padding) {\n  if (padding === void 0) {\n    padding = 0;\n  } // optimal distance for each axis\n\n\n  var desired = {\n    x: +(n1.width + n2.width) / 2 + +padding,\n    y: +(n1.height + n2.height) / 2 + +padding\n  }; // distances\n\n  var actual = point_1.Δ(n1, n2);\n\n  if (actual.x === 0 && actual.y === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  } // ratios\n\n\n  var widthRatio = desired.x / actual.x,\n      heightRatio = desired.y / actual.y;\n  var unOverlapRatio = Math.min(Math.abs(widthRatio), Math.abs(heightRatio));\n  return vector_1.mult(actual, unOverlapRatio);\n}\n\nexports.optimalVector = optimalVector;\n/**\r\n *\r\n * @param n1\r\n * @param n2\r\n * @param padding\r\n *\r\n * @returns the minimal vector between two nodes ; the closest position of n2 relative to n1 according his current position, while avoiding overlapping\r\n */\n\nfunction minimalVector(n1, n2, padding) {\n  if (padding === void 0) {\n    padding = 0;\n  }\n\n  var Δx_n1n2 = point_1.Δx(n1, n2);\n  var Δy_n1n2 = point_1.Δy(n1, n2);\n\n  if (Δx_n1n2 <= Δy_n1n2) {\n    return {\n      x: Δx_n1n2 + 2 * padding,\n      y: 0\n    };\n  } else {\n    return {\n      x: 0,\n      y: Δy_n1n2 + 2 * padding\n    };\n  }\n}\n\nexports.minimalVector = minimalVector;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = __importDefault(require(\"lodash\"));\n\nfunction nodeMap(nodes) {\n  var aggreg = {};\n  lodash_1.default.forEach(nodes, function (node) {\n    aggreg[node.index] = node;\n  });\n  return aggreg;\n}\n\nexports.nodeMap = nodeMap;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\r\n *\r\n * @param initial\r\n * @param frame\r\n *\r\n * @returns function which converts the coordinate for the projection\r\n */\n\nfunction createScale(initial, frame) {\n  var scale = function scale(initial) {\n    return scale.ratio * initial;\n  };\n\n  scale.ratio = Math.min(frame.width / initial.width, frame.height / initial.height);\n  return scale;\n}\n\nexports.createScale = createScale;","\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./src/adaptor\"));\n\n__export(require(\"./src/d3adaptor\"));\n\n__export(require(\"./src/descent\"));\n\n__export(require(\"./src/geom\"));\n\n__export(require(\"./src/gridrouter\"));\n\n__export(require(\"./src/handledisconnected\"));\n\n__export(require(\"./src/layout\"));\n\n__export(require(\"./src/layout3d\"));\n\n__export(require(\"./src/linklengths\"));\n\n__export(require(\"./src/powergraph\"));\n\n__export(require(\"./src/pqueue\"));\n\n__export(require(\"./src/rbtree\"));\n\n__export(require(\"./src/rectangle\"));\n\n__export(require(\"./src/shortestpaths\"));\n\n__export(require(\"./src/vpsc\"));\n\n__export(require(\"./src/batch\"));","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar LayoutAdaptor = function (_super) {\n  __extends(LayoutAdaptor, _super);\n\n  function LayoutAdaptor(options) {\n    var _this = _super.call(this) || this;\n\n    var self = _this;\n    var o = options;\n\n    if (o.trigger) {\n      _this.trigger = o.trigger;\n    }\n\n    if (o.kick) {\n      _this.kick = o.kick;\n    }\n\n    if (o.drag) {\n      _this.drag = o.drag;\n    }\n\n    if (o.on) {\n      _this.on = o.on;\n    }\n\n    _this.dragstart = _this.dragStart = layout_1.Layout.dragStart;\n    _this.dragend = _this.dragEnd = layout_1.Layout.dragEnd;\n    return _this;\n  }\n\n  LayoutAdaptor.prototype.trigger = function (e) {};\n\n  ;\n\n  LayoutAdaptor.prototype.kick = function () {};\n\n  ;\n\n  LayoutAdaptor.prototype.drag = function () {};\n\n  ;\n\n  LayoutAdaptor.prototype.on = function (eventType, listener) {\n    return this;\n  };\n\n  ;\n  return LayoutAdaptor;\n}(layout_1.Layout);\n\nexports.LayoutAdaptor = LayoutAdaptor;\n\nfunction adaptor(options) {\n  return new LayoutAdaptor(options);\n}\n\nexports.adaptor = adaptor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar d3v3 = require(\"./d3v3adaptor\");\n\nvar d3v4 = require(\"./d3v4adaptor\");\n\n;\n\nfunction d3adaptor(d3Context) {\n  if (!d3Context || isD3V3(d3Context)) {\n    return new d3v3.D3StyleLayoutAdaptor();\n  }\n\n  return new d3v4.D3StyleLayoutAdaptor(d3Context);\n}\n\nexports.d3adaptor = d3adaptor;\n\nfunction isD3V3(d3Context) {\n  var v3exp = /^3\\./;\n  return d3Context.version && d3Context.version.match(v3exp) !== null;\n}","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar D3StyleLayoutAdaptor = function (_super) {\n  __extends(D3StyleLayoutAdaptor, _super);\n\n  function D3StyleLayoutAdaptor() {\n    var _this = _super.call(this) || this;\n\n    _this.event = d3.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\n    var d3layout = _this;\n    var drag;\n\n    _this.drag = function () {\n      if (!drag) {\n        var drag = d3.behavior.drag().origin(layout_1.Layout.dragOrigin).on(\"dragstart.d3adaptor\", layout_1.Layout.dragStart).on(\"drag.d3adaptor\", function (d) {\n          layout_1.Layout.drag(d, d3.event);\n          d3layout.resume();\n        }).on(\"dragend.d3adaptor\", layout_1.Layout.dragEnd);\n      }\n\n      if (!arguments.length) return drag;\n      this.call(drag);\n    };\n\n    return _this;\n  }\n\n  D3StyleLayoutAdaptor.prototype.trigger = function (e) {\n    var d3event = {\n      type: layout_1.EventType[e.type],\n      alpha: e.alpha,\n      stress: e.stress\n    };\n    this.event[d3event.type](d3event);\n  };\n\n  D3StyleLayoutAdaptor.prototype.kick = function () {\n    var _this = this;\n\n    d3.timer(function () {\n      return _super.prototype.tick.call(_this);\n    });\n  };\n\n  D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\n    if (typeof eventType === 'string') {\n      this.event.on(eventType, listener);\n    } else {\n      this.event.on(layout_1.EventType[eventType], listener);\n    }\n\n    return this;\n  };\n\n  return D3StyleLayoutAdaptor;\n}(layout_1.Layout);\n\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;\n\nfunction d3adaptor() {\n  return new D3StyleLayoutAdaptor();\n}\n\nexports.d3adaptor = d3adaptor;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar D3StyleLayoutAdaptor = function (_super) {\n  __extends(D3StyleLayoutAdaptor, _super);\n\n  function D3StyleLayoutAdaptor(d3Context) {\n    var _this = _super.call(this) || this;\n\n    _this.d3Context = d3Context;\n    _this.event = d3Context.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\n    var d3layout = _this;\n    var drag;\n\n    _this.drag = function () {\n      if (!drag) {\n        var drag = d3Context.drag().subject(layout_1.Layout.dragOrigin).on(\"start.d3adaptor\", layout_1.Layout.dragStart).on(\"drag.d3adaptor\", function (d) {\n          layout_1.Layout.drag(d, d3Context.event);\n          d3layout.resume();\n        }).on(\"end.d3adaptor\", layout_1.Layout.dragEnd);\n      }\n\n      if (!arguments.length) return drag;\n      arguments[0].call(drag);\n    };\n\n    return _this;\n  }\n\n  D3StyleLayoutAdaptor.prototype.trigger = function (e) {\n    var d3event = {\n      type: layout_1.EventType[e.type],\n      alpha: e.alpha,\n      stress: e.stress\n    };\n    this.event.call(d3event.type, d3event);\n  };\n\n  D3StyleLayoutAdaptor.prototype.kick = function () {\n    var _this = this;\n\n    var t = this.d3Context.timer(function () {\n      return _super.prototype.tick.call(_this) && t.stop();\n    });\n  };\n\n  D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\n    if (typeof eventType === 'string') {\n      this.event.on(eventType, listener);\n    } else {\n      this.event.on(layout_1.EventType[eventType], listener);\n    }\n\n    return this;\n  };\n\n  return D3StyleLayoutAdaptor;\n}(layout_1.Layout);\n\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar shortestpaths_1 = require(\"./shortestpaths\");\n\nvar descent_1 = require(\"./descent\");\n\nvar rectangle_1 = require(\"./rectangle\");\n\nvar linklengths_1 = require(\"./linklengths\");\n\nvar Link3D = function () {\n  function Link3D(source, target) {\n    this.source = source;\n    this.target = target;\n  }\n\n  Link3D.prototype.actualLength = function (x) {\n    var _this = this;\n\n    return Math.sqrt(x.reduce(function (c, v) {\n      var dx = v[_this.target] - v[_this.source];\n      return c + dx * dx;\n    }, 0));\n  };\n\n  return Link3D;\n}();\n\nexports.Link3D = Link3D;\n\nvar Node3D = function () {\n  function Node3D(x, y, z) {\n    if (x === void 0) {\n      x = 0;\n    }\n\n    if (y === void 0) {\n      y = 0;\n    }\n\n    if (z === void 0) {\n      z = 0;\n    }\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n\n  return Node3D;\n}();\n\nexports.Node3D = Node3D;\n\nvar Layout3D = function () {\n  function Layout3D(nodes, links, idealLinkLength) {\n    var _this = this;\n\n    if (idealLinkLength === void 0) {\n      idealLinkLength = 1;\n    }\n\n    this.nodes = nodes;\n    this.links = links;\n    this.idealLinkLength = idealLinkLength;\n    this.constraints = null;\n    this.useJaccardLinkLengths = true;\n    this.result = new Array(Layout3D.k);\n\n    for (var i = 0; i < Layout3D.k; ++i) {\n      this.result[i] = new Array(nodes.length);\n    }\n\n    nodes.forEach(function (v, i) {\n      for (var _i = 0, _a = Layout3D.dims; _i < _a.length; _i++) {\n        var dim = _a[_i];\n        if (typeof v[dim] == 'undefined') v[dim] = Math.random();\n      }\n\n      _this.result[0][i] = v.x;\n      _this.result[1][i] = v.y;\n      _this.result[2][i] = v.z;\n    });\n  }\n\n  ;\n\n  Layout3D.prototype.linkLength = function (l) {\n    return l.actualLength(this.result);\n  };\n\n  Layout3D.prototype.start = function (iterations) {\n    var _this = this;\n\n    if (iterations === void 0) {\n      iterations = 100;\n    }\n\n    var n = this.nodes.length;\n    var linkAccessor = new LinkAccessor();\n    if (this.useJaccardLinkLengths) linklengths_1.jaccardLinkLengths(this.links, linkAccessor, 1.5);\n    this.links.forEach(function (e) {\n      return e.length *= _this.idealLinkLength;\n    });\n    var distanceMatrix = new shortestpaths_1.Calculator(n, this.links, function (e) {\n      return e.source;\n    }, function (e) {\n      return e.target;\n    }, function (e) {\n      return e.length;\n    }).DistanceMatrix();\n    var D = descent_1.Descent.createSquareMatrix(n, function (i, j) {\n      return distanceMatrix[i][j];\n    });\n    var G = descent_1.Descent.createSquareMatrix(n, function () {\n      return 2;\n    });\n    this.links.forEach(function (_a) {\n      var source = _a.source,\n          target = _a.target;\n      return G[source][target] = G[target][source] = 1;\n    });\n    this.descent = new descent_1.Descent(this.result, D);\n    this.descent.threshold = 1e-3;\n    this.descent.G = G;\n    if (this.constraints) this.descent.project = new rectangle_1.Projection(this.nodes, null, null, this.constraints).projectFunctions();\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      var v = this.nodes[i];\n\n      if (v.fixed) {\n        this.descent.locks.add(i, [v.x, v.y, v.z]);\n      }\n    }\n\n    this.descent.run(iterations);\n    return this;\n  };\n\n  Layout3D.prototype.tick = function () {\n    this.descent.locks.clear();\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      var v = this.nodes[i];\n\n      if (v.fixed) {\n        this.descent.locks.add(i, [v.x, v.y, v.z]);\n      }\n    }\n\n    return this.descent.rungeKutta();\n  };\n\n  Layout3D.dims = ['x', 'y', 'z'];\n  Layout3D.k = Layout3D.dims.length;\n  return Layout3D;\n}();\n\nexports.Layout3D = Layout3D;\n\nvar LinkAccessor = function () {\n  function LinkAccessor() {}\n\n  LinkAccessor.prototype.getSourceIndex = function (e) {\n    return e.source;\n  };\n\n  LinkAccessor.prototype.getTargetIndex = function (e) {\n    return e.target;\n  };\n\n  LinkAccessor.prototype.getLength = function (e) {\n    return e.length;\n  };\n\n  LinkAccessor.prototype.setLength = function (e, l) {\n    e.length = l;\n  };\n\n  return LinkAccessor;\n}();","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar gridrouter_1 = require(\"./gridrouter\");\n\nfunction gridify(pgLayout, nudgeGap, margin, groupMargin) {\n  pgLayout.cola.start(0, 0, 0, 10, false);\n  var gridrouter = route(pgLayout.cola.nodes(), pgLayout.cola.groups(), margin, groupMargin);\n  return gridrouter.routeEdges(pgLayout.powerGraph.powerEdges, nudgeGap, function (e) {\n    return e.source.routerNode.id;\n  }, function (e) {\n    return e.target.routerNode.id;\n  });\n}\n\nexports.gridify = gridify;\n\nfunction route(nodes, groups, margin, groupMargin) {\n  nodes.forEach(function (d) {\n    d.routerNode = {\n      name: d.name,\n      bounds: d.bounds.inflate(-margin)\n    };\n  });\n  groups.forEach(function (d) {\n    d.routerNode = {\n      bounds: d.bounds.inflate(-groupMargin),\n      children: (typeof d.groups !== 'undefined' ? d.groups.map(function (c) {\n        return nodes.length + c.id;\n      }) : []).concat(typeof d.leaves !== 'undefined' ? d.leaves.map(function (c) {\n        return c.index;\n      }) : [])\n    };\n  });\n  var gridRouterNodes = nodes.concat(groups).map(function (d, i) {\n    d.routerNode.id = i;\n    return d.routerNode;\n  });\n  return new gridrouter_1.GridRouter(gridRouterNodes, {\n    getChildren: function getChildren(v) {\n      return v.children;\n    },\n    getBounds: function getBounds(v) {\n      return v.bounds;\n    }\n  }, margin - groupMargin);\n}\n\nfunction powerGraphGridLayout(graph, size, grouppadding) {\n  var powerGraph;\n  graph.nodes.forEach(function (v, i) {\n    return v.index = i;\n  });\n  new layout_1.Layout().avoidOverlaps(false).nodes(graph.nodes).links(graph.links).powerGraphGroups(function (d) {\n    powerGraph = d;\n    powerGraph.groups.forEach(function (v) {\n      return v.padding = grouppadding;\n    });\n  });\n  var n = graph.nodes.length;\n  var edges = [];\n  var vs = graph.nodes.slice(0);\n  vs.forEach(function (v, i) {\n    return v.index = i;\n  });\n  powerGraph.groups.forEach(function (g) {\n    var sourceInd = g.index = g.id + n;\n    vs.push(g);\n    if (typeof g.leaves !== 'undefined') g.leaves.forEach(function (v) {\n      return edges.push({\n        source: sourceInd,\n        target: v.index\n      });\n    });\n    if (typeof g.groups !== 'undefined') g.groups.forEach(function (gg) {\n      return edges.push({\n        source: sourceInd,\n        target: gg.id + n\n      });\n    });\n  });\n  powerGraph.powerEdges.forEach(function (e) {\n    edges.push({\n      source: e.source.index,\n      target: e.target.index\n    });\n  });\n  new layout_1.Layout().size(size).nodes(vs).links(edges).avoidOverlaps(false).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100, 0, 0, 0, false);\n  return {\n    cola: new layout_1.Layout().convergenceThreshold(1e-3).size(size).avoidOverlaps(true).nodes(graph.nodes).links(graph.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function (d) {\n      powerGraph = d;\n      powerGraph.groups.forEach(function (v) {\n        v.padding = grouppadding;\n      });\n    }).start(50, 0, 100, 0, false),\n    powerGraph: powerGraph\n  };\n}\n\nexports.powerGraphGridLayout = powerGraphGridLayout;","\"use strict\";\n/**\r\n * Implementation of the Fast Node Overlap Removal (VPSC) algorithm\r\n *\r\n * Tim Dwyer, Kim Marriott, Peter J.Stuckey\r\n * A new algorithm for removing node overlapping in graph visualization,\r\n * Graph Drawing 2005\r\n * Pages 153-164,\r\n * Lecture Notes in Computer Science, vol 3843.\r\n * 2006,\r\n * Springer, Berlin, Heidelberg\r\n * ISBN 978-3-540-31667-1,\r\n * Online ISBN 978-3-540-31667-1,\r\n * https://doi.org/10.1007/11618058_15.\r\n * (https://link.springer.com/chapter/10.1007%2F11618058_15)\r\n *\r\n * courtesy to the webcola framework\r\n */\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar agora_graph_1 = require(\"agora-graph\");\n\nvar webcola_1 = require(\"webcola\");\n\nvar lodash_1 = __importDefault(require(\"lodash\"));\n\nexports.vpsc = agora_graph_1.createFunction(function (graph, options) {\n  if (options === void 0) {\n    options = {\n      padding: 0\n    };\n  }\n\n  var rects = lodash_1.default.map(graph.nodes, function (node) {\n    return new webcola_1.Rectangle(agora_graph_1.left(node), agora_graph_1.right(node), agora_graph_1.top(node), agora_graph_1.bottom(node));\n  });\n  webcola_1.removeOverlaps(rects);\n  lodash_1.default.forEach(graph.nodes, function (node) {\n    node.x = rects[node.index].cx();\n    node.y = rects[node.index].cy();\n  });\n  return {\n    graph: graph\n  };\n});\nexports.VPSCAlgorithm = {\n  name: 'VPSC',\n  algorithm: exports.vpsc\n};\nexports.default = exports.VPSCAlgorithm;"],"sourceRoot":""}