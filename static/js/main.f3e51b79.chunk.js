(window.webpackJsonpagora=window.webpackJsonpagora||[]).push([[0],{186:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(64),i=n.n(c),o=(n(77),n(36)),l=n.n(o),s=n(65),u=n(3),g=(n(79),n(66)),h=n.n(g),m=n(67),f=n.n(m),d=n(68),b=n.n(d),O=n(69),j=n.n(O),p=n(70),v=n(71),w=n.n(v),E=n(12),y=n(22),x=n(1),N=n.n(x),S=n(189),k=function(e){var t=e.source,n=e.target;return r.a.createElement("line",{className:"link",x1:t.x,y1:t.y,x2:n.x,y2:n.y})},P=function(e){var t=e.node,n=t.x,a=t.y,c=t.height,i=t.width,o=t.index,l=t.label,s=l||o;return"undefined"===s&&(s=o),r.a.createElement("g",{className:"node",transform:"translate(".concat(n,",").concat(a,")")},r.a.createElement("rect",{className:"rect",width:i,height:c,transform:"translate(".concat(-i/2,",").concat(-c/2,")")}),r.a.createElement("text",{className:"label",transform:"translate(-5,6)"},"undefined"!==l&&l||o))};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var C=function(e){var t=e.graph,n=e.over,a=void 0!==n&&n,c=e.width,i=e.height,o=e.svgRef,l=Object(E.a)(e,["graph","over","width","height","svgRef"]),s=function(e,t){var n=function e(t){return e.ratio*t};return n.ratio=Math.min(t.width/e.width,t.height/e.height),n}({width:Object(S.a)(t.nodes,(function(e){return e.x+e.width/2}))||0,height:Object(S.a)(t.nodes,(function(e){return e.y+e.height/2}))||0},{width:c,height:i}),u=N()(t.nodes).map((function(e){var t=e.width,n=e.height,a=e.x,r=e.y;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(E.a)(e,["width","height","x","y"]),{width:s(t),height:s(n),x:s(a),y:s(r)})})).sortBy("index").value(),g=t.edges.map((function(e){var t=e.source,n=e.target;return[N.a.find(u,{index:t}),N.a.find(u,{index:n})]}));return r.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:c,height:i,viewBox:"-5,-5,".concat(c+10,",").concat(i+10)},l,{ref:o}),r.a.createElement("style",null,"\n      .edges { \n        stroke: #878fff;\n        stroke-width: 2px;\n      }\n\n      .rect {\n        stroke: #000;\n        fill: #eee;\n      }\n      "),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{nodes:u}),r.a.createElement(L,{edges:g})):r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{edges:g}),r.a.createElement(B,{nodes:u})))},L=function(e){var t=e.edges;return r.a.createElement("g",{className:"edges"},t.map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return r.a.createElement(k,{key:n.index+":"+a.index,source:n,target:a})})))},B=function(e){var t=e.nodes;return r.a.createElement("g",{className:"nodes"},t.map((function(e){return r.a.createElement(P,{key:e.index,node:e})})))};var D=n(2),F=function(e){var t=e.content,n=e.name,c=e.children;var i=function(e,t){var n=new File([t],e,{type:"plain/text"});return URL.createObjectURL(n)}(n,t);return Object(a.useEffect)((function(){return function(){return URL.revokeObjectURL(i)}})),r.a.createElement("a",{href:i,download:n,className:"bw1 ba ph1 mr1 no-underline"},c||n)};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){var t=e.algorithm,n=t.name,c=t.algorithm,i=e.initial,o=e.className,l=e.width,s=e.height,g=Object(a.useState)(null),h=Object(u.a)(g,2),m=h[0],f=h[1],d=Object(a.useState)(null),b=Object(u.a)(d,2),O=b[0],j=b[1],p=Object(a.useState)(l),v=Object(u.a)(p,2),w=v[0],E=v[1],y=Object(a.useState)(s),x=Object(u.a)(y,2),N=x[0],S=x[1],k=Object(a.useCallback)((function(e){null!==e&&(s||S(e.getBoundingClientRect().height),l||E(e.getBoundingClientRect().width))}),[l,s]);Object(a.useEffect)((function(){var e={nodes:i.nodes.map((function(e){return J({},e)})),edges:i.edges.map((function(e){return J({},e)}))};j(Object(D.crop)(c(e).graph))}),[c,i]);var P=Object(a.useCallback)((function(e){if(e){var t=new XMLSerializer;f(t.serializeToString(e))}}),[O]);return r.a.createElement("div",{className:"graph "+o},r.a.createElement("h2",{className:"title"},n),r.a.createElement(T,{name:n,json:JSON.stringify(O),svg:m}),r.a.createElement("div",{className:"graph w-100 h-100 ma1",ref:k},O&&N&&w?r.a.createElement(C,{graph:O,height:N,width:w,svgRef:P}):"loading"))},z=function(e){var t=e.title,n=e.graph,c=e.fileContent,i=e.className,o=e.width,l=e.height,s=(Object(E.a)(e,["title","graph","fileContent","className","width","height"]),Object(a.useCallback)((function(e){if(e){var t=new XMLSerializer;f(t.serializeToString(e))}}),[n])),g=Object(a.useState)(null),h=Object(u.a)(g,2),m=h[0],f=h[1],d=Object(a.useState)(o),b=Object(u.a)(d,2),O=b[0],j=b[1],p=Object(a.useState)(l),v=Object(u.a)(p,2),w=v[0],y=v[1],x=Object(a.useCallback)((function(e){null!==e&&(l||y(e.getBoundingClientRect().height),o||j(e.getBoundingClientRect().width))}),[o,l]);return r.a.createElement("div",{className:"initial-graph "+i},r.a.createElement("h2",{className:"title"},t),r.a.createElement(T,{name:t,gml:c,json:JSON.stringify(n),svg:m}),r.a.createElement("div",{className:"graph w-100 h-100 ma1",ref:x},w&&O?r.a.createElement(C,{graph:n,width:O,height:w,svgRef:s}):null))},T=function(e){var t=e.name,n=e.gml,a=e.json,c=e.svg;return r.a.createElement("div",null,n?r.a.createElement(F,{content:n,name:t+".gml"},"GML"):null,r.a.createElement(F,{content:a,name:t+".json"},"JSON"),c?r.a.createElement(F,{content:c,name:t+".svg"},"SVG"):null)},U=n(13);function A(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){return t(a.result)},a.onerror=n,a.readAsText(e)}))}var W=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,Object.assign({algorithm:w.a},e,{className:"w-25",height:300})),r.a.createElement(M,Object.assign({algorithm:h.a},e,{className:"w-25",height:300})),r.a.createElement(M,Object.assign({algorithm:f.a},e,{className:"w-25",height:300})),r.a.createElement(M,Object.assign({algorithm:b.a},e,{className:"w-25",height:300})),r.a.createElement(M,Object.assign({algorithm:p.RWordleLAlgorithm},e,{className:"w-25",height:300})),r.a.createElement(M,Object.assign({algorithm:j.a},e,{className:"w-25",height:300})))},I=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),o=Object(u.a)(i,2),g=o[0],h=o[1],m=Object(a.useState)(),f=Object(u.a)(m,2),d=f[0],b=f[1],O=Object(a.useState)(),j=Object(u.a)(O,2),p=j[0],v=j[1];return Object(a.useEffect)((function(){void 0!==n&&Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(null),e.next=4,A(n);case 4:t=e.sent,a=Object(U.parseGML)(t),console.log(a),h(Object(D.crop)(Object(U.toGraph)(a))),b(t),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),v(e.t0.message||e.t0),console.log(e.t0),c(void 0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[n]),Object(a.useEffect)((function(){console.log(g)}),[g]),r.a.createElement("div",{className:"App ma1"},p||null,n?g?r.a.createElement("div",{className:"flex flex-wrap"},r.a.createElement(z,{title:"Initial Graph",graph:g,fileContent:d,height:300,over:!0,className:"w-25"}),r.a.createElement(W,{initial:g,over:!0})):null:r.a.createElement("input",{type:"file",name:"file",id:"file",onChange:function(e){c(e.currentTarget.files[0])}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,n){e.exports=n(186)},77:function(e,t,n){},79:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.f3e51b79.chunk.js.map