(window.webpackJsonpagora=window.webpackJsonpagora||[]).push([[0],{186:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(64),i=n.n(c),o=(n(77),n(36)),l=n.n(o),s=n(65),u=n(3),h=(n(79),n(6)),g=n(22),m=n(1),f=n.n(m),d=n(189),b=function(e){var t=e.source,n=e.target;return r.a.createElement("line",{className:"link",x1:t.x,y1:t.y,x2:n.x,y2:n.y})},O=function(e){var t=e.node,n=t.x,a=t.y,c=t.height,i=t.width,o=t.index,l=t.label,s=l||o;return"undefined"===s&&(s=o),r.a.createElement("g",{className:"node",transform:"translate(".concat(n,",").concat(a,")")},r.a.createElement("rect",{className:"rect",width:i,height:c,transform:"translate(".concat(-i/2,",").concat(-c/2,")")}),r.a.createElement("text",{className:"label",transform:"translate(-5,6)"},"undefined"!==l&&l||o))};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var j=function(e){var t=e.graph,n=e.over,a=void 0!==n&&n,c=e.width,i=e.height,o=e.svgRef,l=Object(h.a)(e,["graph","over","width","height","svgRef"]),s=function(e,t){var n=function e(t){return e.ratio*t};return n.ratio=Math.min(t.width/e.width,t.height/e.height),n}({width:Object(d.a)(t.nodes,(function(e){return e.x+e.width/2}))||0,height:Object(d.a)(t.nodes,(function(e){return e.y+e.height/2}))||0},{width:c,height:i}),u=f()(t.nodes).map((function(e){var t=e.width,n=e.height,a=e.x,r=e.y;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(h.a)(e,["width","height","x","y"]),{width:s(t),height:s(n),x:s(a),y:s(r)})})).sortBy("index").value(),m=t.edges.map((function(e){var t=e.source,n=e.target;return[f.a.find(u,{index:t}),f.a.find(u,{index:n})]}));return r.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:c,height:i,viewBox:"-5,-5,".concat(c+10,",").concat(i+10)},l,{ref:o}),r.a.createElement("style",null,"\n      .edges { \n        stroke: #878fff;\n        stroke-width: 2px;\n      }\n\n      .rect {\n        stroke: #000;\n        fill: #eee;\n      }\n      "),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{nodes:u}),r.a.createElement(w,{edges:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{edges:m}),r.a.createElement(v,{nodes:u})))},w=function(e){var t=e.edges;return r.a.createElement("g",{className:"edges"},t.map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return r.a.createElement(b,{key:n.index+":"+a.index,source:n,target:a})})))},v=function(e){var t=e.nodes;return r.a.createElement("g",{className:"nodes"},t.map((function(e){return r.a.createElement(O,{key:e.index,node:e})})))};var E=function(e){var t=e.content,n=e.name,c=e.children,i=Object(a.useState)(),o=Object(u.a)(i,2),l=o[0],s=o[1];return Object(a.useEffect)((function(){var e=new File([t],n,{type:"plain/text"}),a=URL.createObjectURL(e);return s(a),function(){return URL.revokeObjectURL(a)}}),[n,t]),l?r.a.createElement("a",{href:l,download:n,className:"bw1 ba ph1 mr1 no-underline"},c||n):null},y=function(e){var t=e.name,n=e.gml,a=e.json,c=e.svg;return r.a.createElement("div",null,n?r.a.createElement(E,{content:n,name:t+".gml"},"GML"):null,r.a.createElement(E,{content:a,name:t+".json"},"JSON"),c?r.a.createElement(E,{content:c,name:t+".svg"},"SVG"):null)},x=function(e){var t=e.title,n=e.graph,c=e.width,i=e.height,o=e.gml,l=e.className,s=Object(h.a)(e,["title","graph","width","height","gml","className"]),g=Object(a.useState)(null),m=Object(u.a)(g,2),f=m[0],d=m[1],b=Object(a.useState)(c),O=Object(u.a)(b,2),p=O[0],w=O[1],v=Object(a.useState)(i),E=Object(u.a)(v,2),x=E[0],N=E[1],S=Object(a.useCallback)((function(e){if(e){var t=new XMLSerializer;d(t.serializeToString(e))}}),[n]),k=Object(a.useCallback)((function(e){null!==e&&(i||N(e.getBoundingClientRect().height),c||w(e.getBoundingClientRect().width))}),[c,i]);return r.a.createElement("div",{className:"graph "+l},r.a.createElement("h2",{className:"title"},t),r.a.createElement(y,{name:t,json:JSON.stringify(n),gml:o,svg:f}),r.a.createElement("div",{className:"graph w-100 h-100 ma1",ref:k},x&&p?r.a.createElement(j,Object.assign({graph:n,width:p,height:x,svgRef:S},s)):null))},N=function(e){var t=e.title,n=e.graph,a=e.gml,c=e.width,i=e.height,o=Object(h.a)(e,["title","graph","gml","width","height"]);return r.a.createElement(x,Object.assign({title:t,graph:n,gml:a,width:c,height:i},o))},S=n(13),k=n(2),P=n(66),R=n.n(P),L=n(67),D=n.n(L),B=n(68),C=n.n(B),F=n(69),G=n.n(F),J=n(70),M=n(71),U=n.n(M);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(e){var t=e.algorithm,n=t.name,c=t.algorithm,i=e.initial,o=e.width,l=e.height,s=Object(h.a)(e,["algorithm","initial","width","height"]),g=Object(a.useState)(null),m=Object(u.a)(g,2),f=m[0],d=m[1];return Object(a.useEffect)((function(){var e={nodes:i.nodes.map((function(e){return T({},e)})),edges:i.edges.map((function(e){return T({},e)}))};d(Object(k.crop)(c(e).graph))}),[c,i]),f?r.a.createElement(x,Object.assign({title:n,graph:f,height:l,width:o},s)):r.a.createElement("p",null,"Loading")},z=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,Object.assign({algorithm:U.a},e,{className:"w-25",height:300})),r.a.createElement(W,Object.assign({algorithm:R.a},e,{className:"w-25",height:300})),r.a.createElement(W,Object.assign({algorithm:D.a},e,{className:"w-25",height:300})),r.a.createElement(W,Object.assign({algorithm:C.a},e,{className:"w-25",height:300})),r.a.createElement(W,Object.assign({algorithm:J.RWordleLAlgorithm},e,{className:"w-25",height:300})),r.a.createElement(W,Object.assign({algorithm:G.a},e,{className:"w-25",height:300})))};function I(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){return t(a.result)},a.onerror=n,a.readAsText(e)}))}var V=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),o=Object(u.a)(i,2),h=o[0],g=o[1],m=Object(a.useState)(),f=Object(u.a)(m,2),d=f[0],b=f[1],O=Object(a.useState)(),p=Object(u.a)(O,2),j=p[0],w=p[1];return Object(a.useEffect)((function(){void 0!==n&&Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(null),e.next=4,I(n);case 4:t=e.sent,a=Object(S.parseGML)(t),console.log(a),g(Object(k.crop)(Object(S.toGraph)(a))),b(t),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),w(e.t0.message||e.t0),console.log(e.t0),c(void 0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[n]),Object(a.useEffect)((function(){console.log(h)}),[h]),r.a.createElement("div",{className:"App ma1"},j||null,n?h?r.a.createElement("div",{className:"flex flex-wrap"},r.a.createElement(N,{title:"Initial Graph",graph:h,gml:d,height:300,over:!0,className:"w-25"}),r.a.createElement(z,{initial:h,over:!0})):null:r.a.createElement("input",{type:"file",name:"file",id:"file",onChange:function(e){c(e.currentTarget.files[0])}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,n){e.exports=n(186)},77:function(e,t,n){},79:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.d5b1a21e.chunk.js.map